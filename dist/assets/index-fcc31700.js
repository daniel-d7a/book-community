function x9(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var eC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var nC={exports:{}},Mf={},rC={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hc=Symbol.for("react.element"),b9=Symbol.for("react.portal"),R9=Symbol.for("react.fragment"),N9=Symbol.for("react.strict_mode"),A9=Symbol.for("react.profiler"),O9=Symbol.for("react.provider"),P9=Symbol.for("react.context"),D9=Symbol.for("react.forward_ref"),M9=Symbol.for("react.suspense"),L9=Symbol.for("react.memo"),F9=Symbol.for("react.lazy"),j_=Symbol.iterator;function U9(t){return t===null||typeof t!="object"?null:(t=j_&&t[j_]||t["@@iterator"],typeof t=="function"?t:null)}var iC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sC=Object.assign,oC={};function Va(t,e,n){this.props=t,this.context=e,this.refs=oC,this.updater=n||iC}Va.prototype.isReactComponent={};Va.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Va.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function aC(){}aC.prototype=Va.prototype;function P0(t,e,n){this.props=t,this.context=e,this.refs=oC,this.updater=n||iC}var D0=P0.prototype=new aC;D0.constructor=P0;sC(D0,Va.prototype);D0.isPureReactComponent=!0;var z_=Array.isArray,lC=Object.prototype.hasOwnProperty,M0={current:null},uC={key:!0,ref:!0,__self:!0,__source:!0};function cC(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)lC.call(e,r)&&!uC.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:hc,type:t,key:s,ref:o,props:i,_owner:M0.current}}function $9(t,e){return{$$typeof:hc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function L0(t){return typeof t=="object"&&t!==null&&t.$$typeof===hc}function V9(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var B_=/\/+/g;function hm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?V9(""+t.key):e.toString(36)}function Lh(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case hc:case b9:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+hm(o,0):r,z_(i)?(n="",t!=null&&(n=t.replace(B_,"$&/")+"/"),Lh(i,e,n,"",function(u){return u})):i!=null&&(L0(i)&&(i=$9(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(B_,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",z_(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+hm(s,a);o+=Lh(s,e,n,l,i)}else if(l=U9(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+hm(s,a++),o+=Lh(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function th(t,e,n){if(t==null)return t;var r=[],i=0;return Lh(t,r,"","",function(s){return e.call(n,s,i++)}),r}function j9(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var wn={current:null},Fh={transition:null},z9={ReactCurrentDispatcher:wn,ReactCurrentBatchConfig:Fh,ReactCurrentOwner:M0};ve.Children={map:th,forEach:function(t,e,n){th(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return th(t,function(){e++}),e},toArray:function(t){return th(t,function(e){return e})||[]},only:function(t){if(!L0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ve.Component=Va;ve.Fragment=R9;ve.Profiler=A9;ve.PureComponent=P0;ve.StrictMode=N9;ve.Suspense=M9;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z9;ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=sC({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=M0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)lC.call(e,l)&&!uC.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:hc,type:t.type,key:i,ref:s,props:r,_owner:o}};ve.createContext=function(t){return t={$$typeof:P9,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:O9,_context:t},t.Consumer=t};ve.createElement=cC;ve.createFactory=function(t){var e=cC.bind(null,t);return e.type=t,e};ve.createRef=function(){return{current:null}};ve.forwardRef=function(t){return{$$typeof:D9,render:t}};ve.isValidElement=L0;ve.lazy=function(t){return{$$typeof:F9,_payload:{_status:-1,_result:t},_init:j9}};ve.memo=function(t,e){return{$$typeof:L9,type:t,compare:e===void 0?null:e}};ve.startTransition=function(t){var e=Fh.transition;Fh.transition={};try{t()}finally{Fh.transition=e}};ve.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ve.useCallback=function(t,e){return wn.current.useCallback(t,e)};ve.useContext=function(t){return wn.current.useContext(t)};ve.useDebugValue=function(){};ve.useDeferredValue=function(t){return wn.current.useDeferredValue(t)};ve.useEffect=function(t,e){return wn.current.useEffect(t,e)};ve.useId=function(){return wn.current.useId()};ve.useImperativeHandle=function(t,e,n){return wn.current.useImperativeHandle(t,e,n)};ve.useInsertionEffect=function(t,e){return wn.current.useInsertionEffect(t,e)};ve.useLayoutEffect=function(t,e){return wn.current.useLayoutEffect(t,e)};ve.useMemo=function(t,e){return wn.current.useMemo(t,e)};ve.useReducer=function(t,e,n){return wn.current.useReducer(t,e,n)};ve.useRef=function(t){return wn.current.useRef(t)};ve.useState=function(t){return wn.current.useState(t)};ve.useSyncExternalStore=function(t,e,n){return wn.current.useSyncExternalStore(t,e,n)};ve.useTransition=function(){return wn.current.useTransition()};ve.version="18.2.0";rC.exports=ve;var I=rC.exports;const Nt=tC(I),B9=x9({__proto__:null,default:Nt},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W9=I,q9=Symbol.for("react.element"),H9=Symbol.for("react.fragment"),K9=Object.prototype.hasOwnProperty,G9=W9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Q9={key:!0,ref:!0,__self:!0,__source:!0};function hC(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)K9.call(e,r)&&!Q9.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:q9,type:t,key:s,ref:o,props:i,_owner:G9.current}}Mf.Fragment=H9;Mf.jsx=hC;Mf.jsxs=hC;nC.exports=Mf;var F0=nC.exports;const vr=F0.Fragment,v=F0.jsx,A=F0.jsxs;var Cg={},dC={exports:{}},Vn={},fC={exports:{}},pC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,G){var ie=U.length;U.push(G);e:for(;0<ie;){var Le=ie-1>>>1,Ue=U[Le];if(0<i(Ue,G))U[Le]=G,U[ie]=Ue,ie=Le;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var G=U[0],ie=U.pop();if(ie!==G){U[0]=ie;e:for(var Le=0,Ue=U.length,Hr=Ue>>>1;Le<Hr;){var Lt=2*(Le+1)-1,ki=U[Lt],Et=Lt+1,nr=U[Et];if(0>i(ki,ie))Et<Ue&&0>i(nr,ki)?(U[Le]=nr,U[Et]=ie,Le=Et):(U[Le]=ki,U[Lt]=ie,Le=Lt);else if(Et<Ue&&0>i(nr,ie))U[Le]=nr,U[Et]=ie,Le=Et;else break e}}return G}function i(U,G){var ie=U.sortIndex-G.sortIndex;return ie!==0?ie:U.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,d=3,p=!1,g=!1,_=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(U){for(var G=n(u);G!==null;){if(G.callback===null)r(u);else if(G.startTime<=U)r(u),G.sortIndex=G.expirationTime,e(l,G);else break;G=n(u)}}function E(U){if(_=!1,m(U),!g)if(n(l)!==null)g=!0,It(C);else{var G=n(u);G!==null&&Mt(E,G.startTime-U)}}function C(U,G){g=!1,_&&(_=!1,y(k),k=-1),p=!0;var ie=d;try{for(m(G),h=n(l);h!==null&&(!(h.expirationTime>G)||U&&!be());){var Le=h.callback;if(typeof Le=="function"){h.callback=null,d=h.priorityLevel;var Ue=Le(h.expirationTime<=G);G=t.unstable_now(),typeof Ue=="function"?h.callback=Ue:h===n(l)&&r(l),m(G)}else r(l);h=n(l)}if(h!==null)var Hr=!0;else{var Lt=n(u);Lt!==null&&Mt(E,Lt.startTime-G),Hr=!1}return Hr}finally{h=null,d=ie,p=!1}}var T=!1,b=null,k=-1,H=5,Y=-1;function be(){return!(t.unstable_now()-Y<H)}function he(){if(b!==null){var U=t.unstable_now();Y=U;var G=!0;try{G=b(!0,U)}finally{G?re():(T=!1,b=null)}}else T=!1}var re;if(typeof f=="function")re=function(){f(he)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,Ne=fe.port2;fe.port1.onmessage=he,re=function(){Ne.postMessage(null)}}else re=function(){w(he,0)};function It(U){b=U,T||(T=!0,re())}function Mt(U,G){k=w(function(){U(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,It(C))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(d){case 1:case 2:case 3:var G=3;break;default:G=d}var ie=d;d=G;try{return U()}finally{d=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,G){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var ie=d;d=U;try{return G()}finally{d=ie}},t.unstable_scheduleCallback=function(U,G,ie){var Le=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?Le+ie:Le):ie=Le,U){case 1:var Ue=-1;break;case 2:Ue=250;break;case 5:Ue=1073741823;break;case 4:Ue=1e4;break;default:Ue=5e3}return Ue=ie+Ue,U={id:c++,callback:G,priorityLevel:U,startTime:ie,expirationTime:Ue,sortIndex:-1},ie>Le?(U.sortIndex=ie,e(u,U),n(l)===null&&U===n(u)&&(_?(y(k),k=-1):_=!0,Mt(E,ie-Le))):(U.sortIndex=Ue,e(l,U),g||p||(g=!0,It(C))),U},t.unstable_shouldYield=be,t.unstable_wrapCallback=function(U){var G=d;return function(){var ie=d;d=G;try{return U.apply(this,arguments)}finally{d=ie}}}})(pC);fC.exports=pC;var Y9=fC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mC=I,Fn=Y9;function O(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gC=new Set,hu={};function vo(t,e){ga(t,e),ga(t+"Capture",e)}function ga(t,e){for(hu[t]=e,t=0;t<e.length;t++)gC.add(e[t])}var ci=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tg=Object.prototype.hasOwnProperty,Z9=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,W_={},q_={};function X9(t){return Tg.call(q_,t)?!0:Tg.call(W_,t)?!1:Z9.test(t)?q_[t]=!0:(W_[t]=!0,!1)}function J9(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function e4(t,e,n,r){if(e===null||typeof e>"u"||J9(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function En(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var qt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){qt[t]=new En(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];qt[e]=new En(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){qt[t]=new En(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){qt[t]=new En(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){qt[t]=new En(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){qt[t]=new En(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){qt[t]=new En(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){qt[t]=new En(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){qt[t]=new En(t,5,!1,t.toLowerCase(),null,!1,!1)});var U0=/[\-:]([a-z])/g;function $0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(U0,$0);qt[e]=new En(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(U0,$0);qt[e]=new En(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(U0,$0);qt[e]=new En(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){qt[t]=new En(t,1,!1,t.toLowerCase(),null,!1,!1)});qt.xlinkHref=new En("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){qt[t]=new En(t,1,!1,t.toLowerCase(),null,!0,!0)});function V0(t,e,n,r){var i=qt.hasOwnProperty(e)?qt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(e4(e,n,i,r)&&(n=null),r||i===null?X9(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ci=mC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nh=Symbol.for("react.element"),Fo=Symbol.for("react.portal"),Uo=Symbol.for("react.fragment"),j0=Symbol.for("react.strict_mode"),Ig=Symbol.for("react.profiler"),yC=Symbol.for("react.provider"),vC=Symbol.for("react.context"),z0=Symbol.for("react.forward_ref"),kg=Symbol.for("react.suspense"),xg=Symbol.for("react.suspense_list"),B0=Symbol.for("react.memo"),Ai=Symbol.for("react.lazy"),_C=Symbol.for("react.offscreen"),H_=Symbol.iterator;function gl(t){return t===null||typeof t!="object"?null:(t=H_&&t[H_]||t["@@iterator"],typeof t=="function"?t:null)}var st=Object.assign,dm;function Ol(t){if(dm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);dm=e&&e[1]||""}return`
`+dm+t}var fm=!1;function pm(t,e){if(!t||fm)return"";fm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{fm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ol(t):""}function t4(t){switch(t.tag){case 5:return Ol(t.type);case 16:return Ol("Lazy");case 13:return Ol("Suspense");case 19:return Ol("SuspenseList");case 0:case 2:case 15:return t=pm(t.type,!1),t;case 11:return t=pm(t.type.render,!1),t;case 1:return t=pm(t.type,!0),t;default:return""}}function bg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Uo:return"Fragment";case Fo:return"Portal";case Ig:return"Profiler";case j0:return"StrictMode";case kg:return"Suspense";case xg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case vC:return(t.displayName||"Context")+".Consumer";case yC:return(t._context.displayName||"Context")+".Provider";case z0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case B0:return e=t.displayName||null,e!==null?e:bg(t.type)||"Memo";case Ai:e=t._payload,t=t._init;try{return bg(t(e))}catch{}}return null}function n4(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bg(e);case 8:return e===j0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ls(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function wC(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function r4(t){var e=wC(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function rh(t){t._valueTracker||(t._valueTracker=r4(t))}function EC(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=wC(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function sd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Rg(t,e){var n=e.checked;return st({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function K_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ls(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function SC(t,e){e=e.checked,e!=null&&V0(t,"checked",e,!1)}function Ng(t,e){SC(t,e);var n=ls(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ag(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ag(t,e.type,ls(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function G_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ag(t,e,n){(e!=="number"||sd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Pl=Array.isArray;function ea(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ls(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Og(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(O(91));return st({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Q_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(O(92));if(Pl(n)){if(1<n.length)throw Error(O(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ls(n)}}function CC(t,e){var n=ls(e.value),r=ls(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Y_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function TC(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?TC(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ih,IC=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ih=ih||document.createElement("div"),ih.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ih.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function du(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ql={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},i4=["Webkit","ms","Moz","O"];Object.keys(ql).forEach(function(t){i4.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ql[e]=ql[t]})});function kC(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ql.hasOwnProperty(t)&&ql[t]?(""+e).trim():e+"px"}function xC(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=kC(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var s4=st({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Dg(t,e){if(e){if(s4[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(O(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(O(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(O(61))}if(e.style!=null&&typeof e.style!="object")throw Error(O(62))}}function Mg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lg=null;function W0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fg=null,ta=null,na=null;function Z_(t){if(t=pc(t)){if(typeof Fg!="function")throw Error(O(280));var e=t.stateNode;e&&(e=Vf(e),Fg(t.stateNode,t.type,e))}}function bC(t){ta?na?na.push(t):na=[t]:ta=t}function RC(){if(ta){var t=ta,e=na;if(na=ta=null,Z_(t),e)for(t=0;t<e.length;t++)Z_(e[t])}}function NC(t,e){return t(e)}function AC(){}var mm=!1;function OC(t,e,n){if(mm)return t(e,n);mm=!0;try{return NC(t,e,n)}finally{mm=!1,(ta!==null||na!==null)&&(AC(),RC())}}function fu(t,e){var n=t.stateNode;if(n===null)return null;var r=Vf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(O(231,e,typeof n));return n}var Ug=!1;if(ci)try{var yl={};Object.defineProperty(yl,"passive",{get:function(){Ug=!0}}),window.addEventListener("test",yl,yl),window.removeEventListener("test",yl,yl)}catch{Ug=!1}function o4(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Hl=!1,od=null,ad=!1,$g=null,a4={onError:function(t){Hl=!0,od=t}};function l4(t,e,n,r,i,s,o,a,l){Hl=!1,od=null,o4.apply(a4,arguments)}function u4(t,e,n,r,i,s,o,a,l){if(l4.apply(this,arguments),Hl){if(Hl){var u=od;Hl=!1,od=null}else throw Error(O(198));ad||(ad=!0,$g=u)}}function _o(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function PC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function X_(t){if(_o(t)!==t)throw Error(O(188))}function c4(t){var e=t.alternate;if(!e){if(e=_o(t),e===null)throw Error(O(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return X_(i),t;if(s===r)return X_(i),e;s=s.sibling}throw Error(O(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(O(189))}}if(n.alternate!==r)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?t:e}function DC(t){return t=c4(t),t!==null?MC(t):null}function MC(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=MC(t);if(e!==null)return e;t=t.sibling}return null}var LC=Fn.unstable_scheduleCallback,J_=Fn.unstable_cancelCallback,h4=Fn.unstable_shouldYield,d4=Fn.unstable_requestPaint,mt=Fn.unstable_now,f4=Fn.unstable_getCurrentPriorityLevel,q0=Fn.unstable_ImmediatePriority,FC=Fn.unstable_UserBlockingPriority,ld=Fn.unstable_NormalPriority,p4=Fn.unstable_LowPriority,UC=Fn.unstable_IdlePriority,Lf=null,Lr=null;function m4(t){if(Lr&&typeof Lr.onCommitFiberRoot=="function")try{Lr.onCommitFiberRoot(Lf,t,void 0,(t.current.flags&128)===128)}catch{}}var fr=Math.clz32?Math.clz32:v4,g4=Math.log,y4=Math.LN2;function v4(t){return t>>>=0,t===0?32:31-(g4(t)/y4|0)|0}var sh=64,oh=4194304;function Dl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ud(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Dl(a):(s&=o,s!==0&&(r=Dl(s)))}else o=n&~i,o!==0?r=Dl(o):s!==0&&(r=Dl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-fr(e),i=1<<n,r|=t[n],e&=~i;return r}function _4(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function w4(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-fr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=_4(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Vg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $C(){var t=sh;return sh<<=1,!(sh&4194240)&&(sh=64),t}function gm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function dc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-fr(e),t[e]=n}function E4(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-fr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function H0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-fr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Oe=0;function VC(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var jC,K0,zC,BC,WC,jg=!1,ah=[],Ki=null,Gi=null,Qi=null,pu=new Map,mu=new Map,Di=[],S4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ew(t,e){switch(t){case"focusin":case"focusout":Ki=null;break;case"dragenter":case"dragleave":Gi=null;break;case"mouseover":case"mouseout":Qi=null;break;case"pointerover":case"pointerout":pu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":mu.delete(e.pointerId)}}function vl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=pc(e),e!==null&&K0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function C4(t,e,n,r,i){switch(e){case"focusin":return Ki=vl(Ki,t,e,n,r,i),!0;case"dragenter":return Gi=vl(Gi,t,e,n,r,i),!0;case"mouseover":return Qi=vl(Qi,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return pu.set(s,vl(pu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,mu.set(s,vl(mu.get(s)||null,t,e,n,r,i)),!0}return!1}function qC(t){var e=Ms(t.target);if(e!==null){var n=_o(e);if(n!==null){if(e=n.tag,e===13){if(e=PC(n),e!==null){t.blockedOn=e,WC(t.priority,function(){zC(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Uh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=zg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Lg=r,n.target.dispatchEvent(r),Lg=null}else return e=pc(n),e!==null&&K0(e),t.blockedOn=n,!1;e.shift()}return!0}function tw(t,e,n){Uh(t)&&n.delete(e)}function T4(){jg=!1,Ki!==null&&Uh(Ki)&&(Ki=null),Gi!==null&&Uh(Gi)&&(Gi=null),Qi!==null&&Uh(Qi)&&(Qi=null),pu.forEach(tw),mu.forEach(tw)}function _l(t,e){t.blockedOn===e&&(t.blockedOn=null,jg||(jg=!0,Fn.unstable_scheduleCallback(Fn.unstable_NormalPriority,T4)))}function gu(t){function e(i){return _l(i,t)}if(0<ah.length){_l(ah[0],t);for(var n=1;n<ah.length;n++){var r=ah[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ki!==null&&_l(Ki,t),Gi!==null&&_l(Gi,t),Qi!==null&&_l(Qi,t),pu.forEach(e),mu.forEach(e),n=0;n<Di.length;n++)r=Di[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Di.length&&(n=Di[0],n.blockedOn===null);)qC(n),n.blockedOn===null&&Di.shift()}var ra=Ci.ReactCurrentBatchConfig,cd=!0;function I4(t,e,n,r){var i=Oe,s=ra.transition;ra.transition=null;try{Oe=1,G0(t,e,n,r)}finally{Oe=i,ra.transition=s}}function k4(t,e,n,r){var i=Oe,s=ra.transition;ra.transition=null;try{Oe=4,G0(t,e,n,r)}finally{Oe=i,ra.transition=s}}function G0(t,e,n,r){if(cd){var i=zg(t,e,n,r);if(i===null)km(t,e,r,hd,n),ew(t,r);else if(C4(i,t,e,n,r))r.stopPropagation();else if(ew(t,r),e&4&&-1<S4.indexOf(t)){for(;i!==null;){var s=pc(i);if(s!==null&&jC(s),s=zg(t,e,n,r),s===null&&km(t,e,r,hd,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else km(t,e,r,null,n)}}var hd=null;function zg(t,e,n,r){if(hd=null,t=W0(r),t=Ms(t),t!==null)if(e=_o(t),e===null)t=null;else if(n=e.tag,n===13){if(t=PC(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return hd=t,null}function HC(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(f4()){case q0:return 1;case FC:return 4;case ld:case p4:return 16;case UC:return 536870912;default:return 16}default:return 16}}var zi=null,Q0=null,$h=null;function KC(){if($h)return $h;var t,e=Q0,n=e.length,r,i="value"in zi?zi.value:zi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return $h=i.slice(t,1<r?1-r:void 0)}function Vh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function lh(){return!0}function nw(){return!1}function jn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?lh:nw,this.isPropagationStopped=nw,this}return st(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=lh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=lh)},persist:function(){},isPersistent:lh}),e}var ja={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Y0=jn(ja),fc=st({},ja,{view:0,detail:0}),x4=jn(fc),ym,vm,wl,Ff=st({},fc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Z0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wl&&(wl&&t.type==="mousemove"?(ym=t.screenX-wl.screenX,vm=t.screenY-wl.screenY):vm=ym=0,wl=t),ym)},movementY:function(t){return"movementY"in t?t.movementY:vm}}),rw=jn(Ff),b4=st({},Ff,{dataTransfer:0}),R4=jn(b4),N4=st({},fc,{relatedTarget:0}),_m=jn(N4),A4=st({},ja,{animationName:0,elapsedTime:0,pseudoElement:0}),O4=jn(A4),P4=st({},ja,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),D4=jn(P4),M4=st({},ja,{data:0}),iw=jn(M4),L4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},F4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},U4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=U4[t])?!!e[t]:!1}function Z0(){return $4}var V4=st({},fc,{key:function(t){if(t.key){var e=L4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Vh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?F4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Z0,charCode:function(t){return t.type==="keypress"?Vh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),j4=jn(V4),z4=st({},Ff,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sw=jn(z4),B4=st({},fc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Z0}),W4=jn(B4),q4=st({},ja,{propertyName:0,elapsedTime:0,pseudoElement:0}),H4=jn(q4),K4=st({},Ff,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),G4=jn(K4),Q4=[9,13,27,32],X0=ci&&"CompositionEvent"in window,Kl=null;ci&&"documentMode"in document&&(Kl=document.documentMode);var Y4=ci&&"TextEvent"in window&&!Kl,GC=ci&&(!X0||Kl&&8<Kl&&11>=Kl),ow=String.fromCharCode(32),aw=!1;function QC(t,e){switch(t){case"keyup":return Q4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function YC(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $o=!1;function Z4(t,e){switch(t){case"compositionend":return YC(e);case"keypress":return e.which!==32?null:(aw=!0,ow);case"textInput":return t=e.data,t===ow&&aw?null:t;default:return null}}function X4(t,e){if($o)return t==="compositionend"||!X0&&QC(t,e)?(t=KC(),$h=Q0=zi=null,$o=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return GC&&e.locale!=="ko"?null:e.data;default:return null}}var J4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!J4[t.type]:e==="textarea"}function ZC(t,e,n,r){bC(r),e=dd(e,"onChange"),0<e.length&&(n=new Y0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Gl=null,yu=null;function eA(t){lT(t,0)}function Uf(t){var e=zo(t);if(EC(e))return t}function tA(t,e){if(t==="change")return e}var XC=!1;if(ci){var wm;if(ci){var Em="oninput"in document;if(!Em){var uw=document.createElement("div");uw.setAttribute("oninput","return;"),Em=typeof uw.oninput=="function"}wm=Em}else wm=!1;XC=wm&&(!document.documentMode||9<document.documentMode)}function cw(){Gl&&(Gl.detachEvent("onpropertychange",JC),yu=Gl=null)}function JC(t){if(t.propertyName==="value"&&Uf(yu)){var e=[];ZC(e,yu,t,W0(t)),OC(eA,e)}}function nA(t,e,n){t==="focusin"?(cw(),Gl=e,yu=n,Gl.attachEvent("onpropertychange",JC)):t==="focusout"&&cw()}function rA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Uf(yu)}function iA(t,e){if(t==="click")return Uf(e)}function sA(t,e){if(t==="input"||t==="change")return Uf(e)}function oA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _r=typeof Object.is=="function"?Object.is:oA;function vu(t,e){if(_r(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Tg.call(e,i)||!_r(t[i],e[i]))return!1}return!0}function hw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function dw(t,e){var n=hw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=hw(n)}}function eT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?eT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function tT(){for(var t=window,e=sd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=sd(t.document)}return e}function J0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function aA(t){var e=tT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&eT(n.ownerDocument.documentElement,n)){if(r!==null&&J0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=dw(n,s);var o=dw(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var lA=ci&&"documentMode"in document&&11>=document.documentMode,Vo=null,Bg=null,Ql=null,Wg=!1;function fw(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Wg||Vo==null||Vo!==sd(r)||(r=Vo,"selectionStart"in r&&J0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ql&&vu(Ql,r)||(Ql=r,r=dd(Bg,"onSelect"),0<r.length&&(e=new Y0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Vo)))}function uh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var jo={animationend:uh("Animation","AnimationEnd"),animationiteration:uh("Animation","AnimationIteration"),animationstart:uh("Animation","AnimationStart"),transitionend:uh("Transition","TransitionEnd")},Sm={},nT={};ci&&(nT=document.createElement("div").style,"AnimationEvent"in window||(delete jo.animationend.animation,delete jo.animationiteration.animation,delete jo.animationstart.animation),"TransitionEvent"in window||delete jo.transitionend.transition);function $f(t){if(Sm[t])return Sm[t];if(!jo[t])return t;var e=jo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in nT)return Sm[t]=e[n];return t}var rT=$f("animationend"),iT=$f("animationiteration"),sT=$f("animationstart"),oT=$f("transitionend"),aT=new Map,pw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _s(t,e){aT.set(t,e),vo(e,[t])}for(var Cm=0;Cm<pw.length;Cm++){var Tm=pw[Cm],uA=Tm.toLowerCase(),cA=Tm[0].toUpperCase()+Tm.slice(1);_s(uA,"on"+cA)}_s(rT,"onAnimationEnd");_s(iT,"onAnimationIteration");_s(sT,"onAnimationStart");_s("dblclick","onDoubleClick");_s("focusin","onFocus");_s("focusout","onBlur");_s(oT,"onTransitionEnd");ga("onMouseEnter",["mouseout","mouseover"]);ga("onMouseLeave",["mouseout","mouseover"]);ga("onPointerEnter",["pointerout","pointerover"]);ga("onPointerLeave",["pointerout","pointerover"]);vo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vo("onBeforeInput",["compositionend","keypress","textInput","paste"]);vo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ml="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ml));function mw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,u4(r,e,void 0,t),t.currentTarget=null}function lT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;mw(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;mw(i,a,u),s=l}}}if(ad)throw t=$g,ad=!1,$g=null,t}function ze(t,e){var n=e[Qg];n===void 0&&(n=e[Qg]=new Set);var r=t+"__bubble";n.has(r)||(uT(e,t,2,!1),n.add(r))}function Im(t,e,n){var r=0;e&&(r|=4),uT(n,t,r,e)}var ch="_reactListening"+Math.random().toString(36).slice(2);function _u(t){if(!t[ch]){t[ch]=!0,gC.forEach(function(n){n!=="selectionchange"&&(hA.has(n)||Im(n,!1,t),Im(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ch]||(e[ch]=!0,Im("selectionchange",!1,e))}}function uT(t,e,n,r){switch(HC(e)){case 1:var i=I4;break;case 4:i=k4;break;default:i=G0}n=i.bind(null,e,n,t),i=void 0,!Ug||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function km(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ms(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}OC(function(){var u=s,c=W0(n),h=[];e:{var d=aT.get(t);if(d!==void 0){var p=Y0,g=t;switch(t){case"keypress":if(Vh(n)===0)break e;case"keydown":case"keyup":p=j4;break;case"focusin":g="focus",p=_m;break;case"focusout":g="blur",p=_m;break;case"beforeblur":case"afterblur":p=_m;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=rw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=R4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=W4;break;case rT:case iT:case sT:p=O4;break;case oT:p=H4;break;case"scroll":p=x4;break;case"wheel":p=G4;break;case"copy":case"cut":case"paste":p=D4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=sw}var _=(e&4)!==0,w=!_&&t==="scroll",y=_?d!==null?d+"Capture":null:d;_=[];for(var f=u,m;f!==null;){m=f;var E=m.stateNode;if(m.tag===5&&E!==null&&(m=E,y!==null&&(E=fu(f,y),E!=null&&_.push(wu(f,E,m)))),w)break;f=f.return}0<_.length&&(d=new p(d,g,null,n,c),h.push({event:d,listeners:_}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",d&&n!==Lg&&(g=n.relatedTarget||n.fromElement)&&(Ms(g)||g[hi]))break e;if((p||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=u,g=g?Ms(g):null,g!==null&&(w=_o(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(_=rw,E="onMouseLeave",y="onMouseEnter",f="mouse",(t==="pointerout"||t==="pointerover")&&(_=sw,E="onPointerLeave",y="onPointerEnter",f="pointer"),w=p==null?d:zo(p),m=g==null?d:zo(g),d=new _(E,f+"leave",p,n,c),d.target=w,d.relatedTarget=m,E=null,Ms(c)===u&&(_=new _(y,f+"enter",g,n,c),_.target=m,_.relatedTarget=w,E=_),w=E,p&&g)t:{for(_=p,y=g,f=0,m=_;m;m=No(m))f++;for(m=0,E=y;E;E=No(E))m++;for(;0<f-m;)_=No(_),f--;for(;0<m-f;)y=No(y),m--;for(;f--;){if(_===y||y!==null&&_===y.alternate)break t;_=No(_),y=No(y)}_=null}else _=null;p!==null&&gw(h,d,p,_,!1),g!==null&&w!==null&&gw(h,w,g,_,!0)}}e:{if(d=u?zo(u):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var C=tA;else if(lw(d))if(XC)C=sA;else{C=rA;var T=nA}else(p=d.nodeName)&&p.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(C=iA);if(C&&(C=C(t,u))){ZC(h,C,n,c);break e}T&&T(t,d,u),t==="focusout"&&(T=d._wrapperState)&&T.controlled&&d.type==="number"&&Ag(d,"number",d.value)}switch(T=u?zo(u):window,t){case"focusin":(lw(T)||T.contentEditable==="true")&&(Vo=T,Bg=u,Ql=null);break;case"focusout":Ql=Bg=Vo=null;break;case"mousedown":Wg=!0;break;case"contextmenu":case"mouseup":case"dragend":Wg=!1,fw(h,n,c);break;case"selectionchange":if(lA)break;case"keydown":case"keyup":fw(h,n,c)}var b;if(X0)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else $o?QC(t,n)&&(k="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(GC&&n.locale!=="ko"&&($o||k!=="onCompositionStart"?k==="onCompositionEnd"&&$o&&(b=KC()):(zi=c,Q0="value"in zi?zi.value:zi.textContent,$o=!0)),T=dd(u,k),0<T.length&&(k=new iw(k,t,null,n,c),h.push({event:k,listeners:T}),b?k.data=b:(b=YC(n),b!==null&&(k.data=b)))),(b=Y4?Z4(t,n):X4(t,n))&&(u=dd(u,"onBeforeInput"),0<u.length&&(c=new iw("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=b))}lT(h,e)})}function wu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function dd(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=fu(t,n),s!=null&&r.unshift(wu(t,s,i)),s=fu(t,e),s!=null&&r.push(wu(t,s,i))),t=t.return}return r}function No(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function gw(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=fu(n,s),l!=null&&o.unshift(wu(n,l,a))):i||(l=fu(n,s),l!=null&&o.push(wu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var dA=/\r\n?/g,fA=/\u0000|\uFFFD/g;function yw(t){return(typeof t=="string"?t:""+t).replace(dA,`
`).replace(fA,"")}function hh(t,e,n){if(e=yw(e),yw(t)!==e&&n)throw Error(O(425))}function fd(){}var qg=null,Hg=null;function Kg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Gg=typeof setTimeout=="function"?setTimeout:void 0,pA=typeof clearTimeout=="function"?clearTimeout:void 0,vw=typeof Promise=="function"?Promise:void 0,mA=typeof queueMicrotask=="function"?queueMicrotask:typeof vw<"u"?function(t){return vw.resolve(null).then(t).catch(gA)}:Gg;function gA(t){setTimeout(function(){throw t})}function xm(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),gu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);gu(e)}function Yi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function _w(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var za=Math.random().toString(36).slice(2),xr="__reactFiber$"+za,Eu="__reactProps$"+za,hi="__reactContainer$"+za,Qg="__reactEvents$"+za,yA="__reactListeners$"+za,vA="__reactHandles$"+za;function Ms(t){var e=t[xr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[hi]||n[xr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=_w(t);t!==null;){if(n=t[xr])return n;t=_w(t)}return e}t=n,n=t.parentNode}return null}function pc(t){return t=t[xr]||t[hi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function zo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(O(33))}function Vf(t){return t[Eu]||null}var Yg=[],Bo=-1;function ws(t){return{current:t}}function He(t){0>Bo||(t.current=Yg[Bo],Yg[Bo]=null,Bo--)}function je(t,e){Bo++,Yg[Bo]=t.current,t.current=e}var us={},ln=ws(us),kn=ws(!1),Xs=us;function ya(t,e){var n=t.type.contextTypes;if(!n)return us;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function xn(t){return t=t.childContextTypes,t!=null}function pd(){He(kn),He(ln)}function ww(t,e,n){if(ln.current!==us)throw Error(O(168));je(ln,e),je(kn,n)}function cT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(O(108,n4(t)||"Unknown",i));return st({},n,r)}function md(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||us,Xs=ln.current,je(ln,t),je(kn,kn.current),!0}function Ew(t,e,n){var r=t.stateNode;if(!r)throw Error(O(169));n?(t=cT(t,e,Xs),r.__reactInternalMemoizedMergedChildContext=t,He(kn),He(ln),je(ln,t)):He(kn),je(kn,n)}var Zr=null,jf=!1,bm=!1;function hT(t){Zr===null?Zr=[t]:Zr.push(t)}function _A(t){jf=!0,hT(t)}function Es(){if(!bm&&Zr!==null){bm=!0;var t=0,e=Oe;try{var n=Zr;for(Oe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Zr=null,jf=!1}catch(i){throw Zr!==null&&(Zr=Zr.slice(t+1)),LC(q0,Es),i}finally{Oe=e,bm=!1}}return null}var Wo=[],qo=0,gd=null,yd=0,Wn=[],qn=0,Js=null,ei=1,ti="";function Rs(t,e){Wo[qo++]=yd,Wo[qo++]=gd,gd=t,yd=e}function dT(t,e,n){Wn[qn++]=ei,Wn[qn++]=ti,Wn[qn++]=Js,Js=t;var r=ei;t=ti;var i=32-fr(r)-1;r&=~(1<<i),n+=1;var s=32-fr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ei=1<<32-fr(e)+i|n<<i|r,ti=s+t}else ei=1<<s|n<<i|r,ti=t}function ev(t){t.return!==null&&(Rs(t,1),dT(t,1,0))}function tv(t){for(;t===gd;)gd=Wo[--qo],Wo[qo]=null,yd=Wo[--qo],Wo[qo]=null;for(;t===Js;)Js=Wn[--qn],Wn[qn]=null,ti=Wn[--qn],Wn[qn]=null,ei=Wn[--qn],Wn[qn]=null}var Mn=null,On=null,Ye=!1,lr=null;function fT(t,e){var n=Kn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Sw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Mn=t,On=Yi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Mn=t,On=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Js!==null?{id:ei,overflow:ti}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Kn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Mn=t,On=null,!0):!1;default:return!1}}function Zg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Xg(t){if(Ye){var e=On;if(e){var n=e;if(!Sw(t,e)){if(Zg(t))throw Error(O(418));e=Yi(n.nextSibling);var r=Mn;e&&Sw(t,e)?fT(r,n):(t.flags=t.flags&-4097|2,Ye=!1,Mn=t)}}else{if(Zg(t))throw Error(O(418));t.flags=t.flags&-4097|2,Ye=!1,Mn=t}}}function Cw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Mn=t}function dh(t){if(t!==Mn)return!1;if(!Ye)return Cw(t),Ye=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Kg(t.type,t.memoizedProps)),e&&(e=On)){if(Zg(t))throw pT(),Error(O(418));for(;e;)fT(t,e),e=Yi(e.nextSibling)}if(Cw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(O(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){On=Yi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}On=null}}else On=Mn?Yi(t.stateNode.nextSibling):null;return!0}function pT(){for(var t=On;t;)t=Yi(t.nextSibling)}function va(){On=Mn=null,Ye=!1}function nv(t){lr===null?lr=[t]:lr.push(t)}var wA=Ci.ReactCurrentBatchConfig;function or(t,e){if(t&&t.defaultProps){e=st({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var vd=ws(null),_d=null,Ho=null,rv=null;function iv(){rv=Ho=_d=null}function sv(t){var e=vd.current;He(vd),t._currentValue=e}function Jg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ia(t,e){_d=t,rv=Ho=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Tn=!0),t.firstContext=null)}function Xn(t){var e=t._currentValue;if(rv!==t)if(t={context:t,memoizedValue:e,next:null},Ho===null){if(_d===null)throw Error(O(308));Ho=t,_d.dependencies={lanes:0,firstContext:t}}else Ho=Ho.next=t;return e}var Ls=null;function ov(t){Ls===null?Ls=[t]:Ls.push(t)}function mT(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,ov(e)):(n.next=i.next,i.next=n),e.interleaved=n,di(t,r)}function di(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Oi=!1;function av(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function oi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Zi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ie&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,di(t,n)}return i=r.interleaved,i===null?(e.next=e,ov(r)):(e.next=i.next,i.next=e),r.interleaved=e,di(t,n)}function jh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,H0(t,n)}}function Tw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function wd(t,e,n,r){var i=t.updateQueue;Oi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,c=u=l=null,a=s;do{var d=a.lane,p=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,_=a;switch(d=e,p=n,_.tag){case 1:if(g=_.payload,typeof g=="function"){h=g.call(p,h,d);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=_.payload,d=typeof g=="function"?g.call(p,h,d):g,d==null)break e;h=st({},h,d);break e;case 2:Oi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else p={eventTime:p,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=p,l=h):c=c.next=p,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(1);if(c===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);to|=o,t.lanes=o,t.memoizedState=h}}function Iw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(O(191,i));i.call(r)}}}var yT=new mC.Component().refs;function ey(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:st({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var zf={isMounted:function(t){return(t=t._reactInternals)?_o(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=yn(),i=Ji(t),s=oi(r,i);s.payload=e,n!=null&&(s.callback=n),e=Zi(t,s,i),e!==null&&(pr(e,t,i,r),jh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=yn(),i=Ji(t),s=oi(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Zi(t,s,i),e!==null&&(pr(e,t,i,r),jh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=yn(),r=Ji(t),i=oi(n,r);i.tag=2,e!=null&&(i.callback=e),e=Zi(t,i,r),e!==null&&(pr(e,t,r,n),jh(e,t,r))}};function kw(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!vu(n,r)||!vu(i,s):!0}function vT(t,e,n){var r=!1,i=us,s=e.contextType;return typeof s=="object"&&s!==null?s=Xn(s):(i=xn(e)?Xs:ln.current,r=e.contextTypes,s=(r=r!=null)?ya(t,i):us),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=zf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function xw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&zf.enqueueReplaceState(e,e.state,null)}function ty(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=yT,av(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Xn(s):(s=xn(e)?Xs:ln.current,i.context=ya(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ey(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&zf.enqueueReplaceState(i,i.state,null),wd(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function El(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(O(309));var r=n.stateNode}if(!r)throw Error(O(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===yT&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(O(284));if(!n._owner)throw Error(O(290,t))}return t}function fh(t,e){throw t=Object.prototype.toString.call(e),Error(O(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function bw(t){var e=t._init;return e(t._payload)}function _T(t){function e(y,f){if(t){var m=y.deletions;m===null?(y.deletions=[f],y.flags|=16):m.push(f)}}function n(y,f){if(!t)return null;for(;f!==null;)e(y,f),f=f.sibling;return null}function r(y,f){for(y=new Map;f!==null;)f.key!==null?y.set(f.key,f):y.set(f.index,f),f=f.sibling;return y}function i(y,f){return y=es(y,f),y.index=0,y.sibling=null,y}function s(y,f,m){return y.index=m,t?(m=y.alternate,m!==null?(m=m.index,m<f?(y.flags|=2,f):m):(y.flags|=2,f)):(y.flags|=1048576,f)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,f,m,E){return f===null||f.tag!==6?(f=Mm(m,y.mode,E),f.return=y,f):(f=i(f,m),f.return=y,f)}function l(y,f,m,E){var C=m.type;return C===Uo?c(y,f,m.props.children,E,m.key):f!==null&&(f.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Ai&&bw(C)===f.type)?(E=i(f,m.props),E.ref=El(y,f,m),E.return=y,E):(E=Kh(m.type,m.key,m.props,null,y.mode,E),E.ref=El(y,f,m),E.return=y,E)}function u(y,f,m,E){return f===null||f.tag!==4||f.stateNode.containerInfo!==m.containerInfo||f.stateNode.implementation!==m.implementation?(f=Lm(m,y.mode,E),f.return=y,f):(f=i(f,m.children||[]),f.return=y,f)}function c(y,f,m,E,C){return f===null||f.tag!==7?(f=qs(m,y.mode,E,C),f.return=y,f):(f=i(f,m),f.return=y,f)}function h(y,f,m){if(typeof f=="string"&&f!==""||typeof f=="number")return f=Mm(""+f,y.mode,m),f.return=y,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case nh:return m=Kh(f.type,f.key,f.props,null,y.mode,m),m.ref=El(y,null,f),m.return=y,m;case Fo:return f=Lm(f,y.mode,m),f.return=y,f;case Ai:var E=f._init;return h(y,E(f._payload),m)}if(Pl(f)||gl(f))return f=qs(f,y.mode,m,null),f.return=y,f;fh(y,f)}return null}function d(y,f,m,E){var C=f!==null?f.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return C!==null?null:a(y,f,""+m,E);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case nh:return m.key===C?l(y,f,m,E):null;case Fo:return m.key===C?u(y,f,m,E):null;case Ai:return C=m._init,d(y,f,C(m._payload),E)}if(Pl(m)||gl(m))return C!==null?null:c(y,f,m,E,null);fh(y,m)}return null}function p(y,f,m,E,C){if(typeof E=="string"&&E!==""||typeof E=="number")return y=y.get(m)||null,a(f,y,""+E,C);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case nh:return y=y.get(E.key===null?m:E.key)||null,l(f,y,E,C);case Fo:return y=y.get(E.key===null?m:E.key)||null,u(f,y,E,C);case Ai:var T=E._init;return p(y,f,m,T(E._payload),C)}if(Pl(E)||gl(E))return y=y.get(m)||null,c(f,y,E,C,null);fh(f,E)}return null}function g(y,f,m,E){for(var C=null,T=null,b=f,k=f=0,H=null;b!==null&&k<m.length;k++){b.index>k?(H=b,b=null):H=b.sibling;var Y=d(y,b,m[k],E);if(Y===null){b===null&&(b=H);break}t&&b&&Y.alternate===null&&e(y,b),f=s(Y,f,k),T===null?C=Y:T.sibling=Y,T=Y,b=H}if(k===m.length)return n(y,b),Ye&&Rs(y,k),C;if(b===null){for(;k<m.length;k++)b=h(y,m[k],E),b!==null&&(f=s(b,f,k),T===null?C=b:T.sibling=b,T=b);return Ye&&Rs(y,k),C}for(b=r(y,b);k<m.length;k++)H=p(b,y,k,m[k],E),H!==null&&(t&&H.alternate!==null&&b.delete(H.key===null?k:H.key),f=s(H,f,k),T===null?C=H:T.sibling=H,T=H);return t&&b.forEach(function(be){return e(y,be)}),Ye&&Rs(y,k),C}function _(y,f,m,E){var C=gl(m);if(typeof C!="function")throw Error(O(150));if(m=C.call(m),m==null)throw Error(O(151));for(var T=C=null,b=f,k=f=0,H=null,Y=m.next();b!==null&&!Y.done;k++,Y=m.next()){b.index>k?(H=b,b=null):H=b.sibling;var be=d(y,b,Y.value,E);if(be===null){b===null&&(b=H);break}t&&b&&be.alternate===null&&e(y,b),f=s(be,f,k),T===null?C=be:T.sibling=be,T=be,b=H}if(Y.done)return n(y,b),Ye&&Rs(y,k),C;if(b===null){for(;!Y.done;k++,Y=m.next())Y=h(y,Y.value,E),Y!==null&&(f=s(Y,f,k),T===null?C=Y:T.sibling=Y,T=Y);return Ye&&Rs(y,k),C}for(b=r(y,b);!Y.done;k++,Y=m.next())Y=p(b,y,k,Y.value,E),Y!==null&&(t&&Y.alternate!==null&&b.delete(Y.key===null?k:Y.key),f=s(Y,f,k),T===null?C=Y:T.sibling=Y,T=Y);return t&&b.forEach(function(he){return e(y,he)}),Ye&&Rs(y,k),C}function w(y,f,m,E){if(typeof m=="object"&&m!==null&&m.type===Uo&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case nh:e:{for(var C=m.key,T=f;T!==null;){if(T.key===C){if(C=m.type,C===Uo){if(T.tag===7){n(y,T.sibling),f=i(T,m.props.children),f.return=y,y=f;break e}}else if(T.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Ai&&bw(C)===T.type){n(y,T.sibling),f=i(T,m.props),f.ref=El(y,T,m),f.return=y,y=f;break e}n(y,T);break}else e(y,T);T=T.sibling}m.type===Uo?(f=qs(m.props.children,y.mode,E,m.key),f.return=y,y=f):(E=Kh(m.type,m.key,m.props,null,y.mode,E),E.ref=El(y,f,m),E.return=y,y=E)}return o(y);case Fo:e:{for(T=m.key;f!==null;){if(f.key===T)if(f.tag===4&&f.stateNode.containerInfo===m.containerInfo&&f.stateNode.implementation===m.implementation){n(y,f.sibling),f=i(f,m.children||[]),f.return=y,y=f;break e}else{n(y,f);break}else e(y,f);f=f.sibling}f=Lm(m,y.mode,E),f.return=y,y=f}return o(y);case Ai:return T=m._init,w(y,f,T(m._payload),E)}if(Pl(m))return g(y,f,m,E);if(gl(m))return _(y,f,m,E);fh(y,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,f!==null&&f.tag===6?(n(y,f.sibling),f=i(f,m),f.return=y,y=f):(n(y,f),f=Mm(m,y.mode,E),f.return=y,y=f),o(y)):n(y,f)}return w}var _a=_T(!0),wT=_T(!1),mc={},Fr=ws(mc),Su=ws(mc),Cu=ws(mc);function Fs(t){if(t===mc)throw Error(O(174));return t}function lv(t,e){switch(je(Cu,e),je(Su,t),je(Fr,mc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Pg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Pg(e,t)}He(Fr),je(Fr,e)}function wa(){He(Fr),He(Su),He(Cu)}function ET(t){Fs(Cu.current);var e=Fs(Fr.current),n=Pg(e,t.type);e!==n&&(je(Su,t),je(Fr,n))}function uv(t){Su.current===t&&(He(Fr),He(Su))}var nt=ws(0);function Ed(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Rm=[];function cv(){for(var t=0;t<Rm.length;t++)Rm[t]._workInProgressVersionPrimary=null;Rm.length=0}var zh=Ci.ReactCurrentDispatcher,Nm=Ci.ReactCurrentBatchConfig,eo=0,rt=null,St=null,bt=null,Sd=!1,Yl=!1,Tu=0,EA=0;function Ht(){throw Error(O(321))}function hv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!_r(t[n],e[n]))return!1;return!0}function dv(t,e,n,r,i,s){if(eo=s,rt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,zh.current=t===null||t.memoizedState===null?IA:kA,t=n(r,i),Yl){s=0;do{if(Yl=!1,Tu=0,25<=s)throw Error(O(301));s+=1,bt=St=null,e.updateQueue=null,zh.current=xA,t=n(r,i)}while(Yl)}if(zh.current=Cd,e=St!==null&&St.next!==null,eo=0,bt=St=rt=null,Sd=!1,e)throw Error(O(300));return t}function fv(){var t=Tu!==0;return Tu=0,t}function kr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bt===null?rt.memoizedState=bt=t:bt=bt.next=t,bt}function Jn(){if(St===null){var t=rt.alternate;t=t!==null?t.memoizedState:null}else t=St.next;var e=bt===null?rt.memoizedState:bt.next;if(e!==null)bt=e,St=t;else{if(t===null)throw Error(O(310));St=t,t={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},bt===null?rt.memoizedState=bt=t:bt=bt.next=t}return bt}function Iu(t,e){return typeof e=="function"?e(t):e}function Am(t){var e=Jn(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var r=St,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((eo&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,rt.lanes|=c,to|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,_r(r,e.memoizedState)||(Tn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,rt.lanes|=s,to|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Om(t){var e=Jn(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);_r(s,e.memoizedState)||(Tn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function ST(){}function CT(t,e){var n=rt,r=Jn(),i=e(),s=!_r(r.memoizedState,i);if(s&&(r.memoizedState=i,Tn=!0),r=r.queue,pv(kT.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||bt!==null&&bt.memoizedState.tag&1){if(n.flags|=2048,ku(9,IT.bind(null,n,r,i,e),void 0,null),Ot===null)throw Error(O(349));eo&30||TT(n,e,i)}return i}function TT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=rt.updateQueue,e===null?(e={lastEffect:null,stores:null},rt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function IT(t,e,n,r){e.value=n,e.getSnapshot=r,xT(e)&&bT(t)}function kT(t,e,n){return n(function(){xT(e)&&bT(t)})}function xT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!_r(t,n)}catch{return!0}}function bT(t){var e=di(t,1);e!==null&&pr(e,t,1,-1)}function Rw(t){var e=kr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Iu,lastRenderedState:t},e.queue=t,t=t.dispatch=TA.bind(null,rt,t),[e.memoizedState,t]}function ku(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=rt.updateQueue,e===null?(e={lastEffect:null,stores:null},rt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function RT(){return Jn().memoizedState}function Bh(t,e,n,r){var i=kr();rt.flags|=t,i.memoizedState=ku(1|e,n,void 0,r===void 0?null:r)}function Bf(t,e,n,r){var i=Jn();r=r===void 0?null:r;var s=void 0;if(St!==null){var o=St.memoizedState;if(s=o.destroy,r!==null&&hv(r,o.deps)){i.memoizedState=ku(e,n,s,r);return}}rt.flags|=t,i.memoizedState=ku(1|e,n,s,r)}function Nw(t,e){return Bh(8390656,8,t,e)}function pv(t,e){return Bf(2048,8,t,e)}function NT(t,e){return Bf(4,2,t,e)}function AT(t,e){return Bf(4,4,t,e)}function OT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function PT(t,e,n){return n=n!=null?n.concat([t]):null,Bf(4,4,OT.bind(null,e,t),n)}function mv(){}function DT(t,e){var n=Jn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&hv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function MT(t,e){var n=Jn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&hv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function LT(t,e,n){return eo&21?(_r(n,e)||(n=$C(),rt.lanes|=n,to|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Tn=!0),t.memoizedState=n)}function SA(t,e){var n=Oe;Oe=n!==0&&4>n?n:4,t(!0);var r=Nm.transition;Nm.transition={};try{t(!1),e()}finally{Oe=n,Nm.transition=r}}function FT(){return Jn().memoizedState}function CA(t,e,n){var r=Ji(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},UT(t))$T(e,n);else if(n=mT(t,e,n,r),n!==null){var i=yn();pr(n,t,r,i),VT(n,e,r)}}function TA(t,e,n){var r=Ji(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(UT(t))$T(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,_r(a,o)){var l=e.interleaved;l===null?(i.next=i,ov(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=mT(t,e,i,r),n!==null&&(i=yn(),pr(n,t,r,i),VT(n,e,r))}}function UT(t){var e=t.alternate;return t===rt||e!==null&&e===rt}function $T(t,e){Yl=Sd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function VT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,H0(t,n)}}var Cd={readContext:Xn,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useInsertionEffect:Ht,useLayoutEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useMutableSource:Ht,useSyncExternalStore:Ht,useId:Ht,unstable_isNewReconciler:!1},IA={readContext:Xn,useCallback:function(t,e){return kr().memoizedState=[t,e===void 0?null:e],t},useContext:Xn,useEffect:Nw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Bh(4194308,4,OT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Bh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Bh(4,2,t,e)},useMemo:function(t,e){var n=kr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=kr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=CA.bind(null,rt,t),[r.memoizedState,t]},useRef:function(t){var e=kr();return t={current:t},e.memoizedState=t},useState:Rw,useDebugValue:mv,useDeferredValue:function(t){return kr().memoizedState=t},useTransition:function(){var t=Rw(!1),e=t[0];return t=SA.bind(null,t[1]),kr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=rt,i=kr();if(Ye){if(n===void 0)throw Error(O(407));n=n()}else{if(n=e(),Ot===null)throw Error(O(349));eo&30||TT(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Nw(kT.bind(null,r,s,t),[t]),r.flags|=2048,ku(9,IT.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=kr(),e=Ot.identifierPrefix;if(Ye){var n=ti,r=ei;n=(r&~(1<<32-fr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Tu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=EA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},kA={readContext:Xn,useCallback:DT,useContext:Xn,useEffect:pv,useImperativeHandle:PT,useInsertionEffect:NT,useLayoutEffect:AT,useMemo:MT,useReducer:Am,useRef:RT,useState:function(){return Am(Iu)},useDebugValue:mv,useDeferredValue:function(t){var e=Jn();return LT(e,St.memoizedState,t)},useTransition:function(){var t=Am(Iu)[0],e=Jn().memoizedState;return[t,e]},useMutableSource:ST,useSyncExternalStore:CT,useId:FT,unstable_isNewReconciler:!1},xA={readContext:Xn,useCallback:DT,useContext:Xn,useEffect:pv,useImperativeHandle:PT,useInsertionEffect:NT,useLayoutEffect:AT,useMemo:MT,useReducer:Om,useRef:RT,useState:function(){return Om(Iu)},useDebugValue:mv,useDeferredValue:function(t){var e=Jn();return St===null?e.memoizedState=t:LT(e,St.memoizedState,t)},useTransition:function(){var t=Om(Iu)[0],e=Jn().memoizedState;return[t,e]},useMutableSource:ST,useSyncExternalStore:CT,useId:FT,unstable_isNewReconciler:!1};function Ea(t,e){try{var n="",r=e;do n+=t4(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Pm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ny(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var bA=typeof WeakMap=="function"?WeakMap:Map;function jT(t,e,n){n=oi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Id||(Id=!0,dy=r),ny(t,e)},n}function zT(t,e,n){n=oi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ny(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){ny(t,e),typeof r!="function"&&(Xi===null?Xi=new Set([this]):Xi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Aw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new bA;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=zA.bind(null,t,e,n),e.then(t,t))}function Ow(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Pw(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=oi(-1,1),e.tag=2,Zi(n,e,1))),n.lanes|=1),t)}var RA=Ci.ReactCurrentOwner,Tn=!1;function pn(t,e,n,r){e.child=t===null?wT(e,null,n,r):_a(e,t.child,n,r)}function Dw(t,e,n,r,i){n=n.render;var s=e.ref;return ia(e,i),r=dv(t,e,n,r,s,i),n=fv(),t!==null&&!Tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,fi(t,e,i)):(Ye&&n&&ev(e),e.flags|=1,pn(t,e,r,i),e.child)}function Mw(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Cv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,BT(t,e,s,r,i)):(t=Kh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:vu,n(o,r)&&t.ref===e.ref)return fi(t,e,i)}return e.flags|=1,t=es(s,r),t.ref=e.ref,t.return=e,e.child=t}function BT(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(vu(s,r)&&t.ref===e.ref)if(Tn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Tn=!0);else return e.lanes=t.lanes,fi(t,e,i)}return ry(t,e,n,r,i)}function WT(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},je(Go,Nn),Nn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,je(Go,Nn),Nn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,je(Go,Nn),Nn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,je(Go,Nn),Nn|=r;return pn(t,e,i,n),e.child}function qT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ry(t,e,n,r,i){var s=xn(n)?Xs:ln.current;return s=ya(e,s),ia(e,i),n=dv(t,e,n,r,s,i),r=fv(),t!==null&&!Tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,fi(t,e,i)):(Ye&&r&&ev(e),e.flags|=1,pn(t,e,n,i),e.child)}function Lw(t,e,n,r,i){if(xn(n)){var s=!0;md(e)}else s=!1;if(ia(e,i),e.stateNode===null)Wh(t,e),vT(e,n,r),ty(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Xn(u):(u=xn(n)?Xs:ln.current,u=ya(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&xw(e,o,r,u),Oi=!1;var d=e.memoizedState;o.state=d,wd(e,r,o,i),l=e.memoizedState,a!==r||d!==l||kn.current||Oi?(typeof c=="function"&&(ey(e,n,c,r),l=e.memoizedState),(a=Oi||kw(e,n,a,r,d,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,gT(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:or(e.type,a),o.props=u,h=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Xn(l):(l=xn(n)?Xs:ln.current,l=ya(e,l));var p=n.getDerivedStateFromProps;(c=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&xw(e,o,r,l),Oi=!1,d=e.memoizedState,o.state=d,wd(e,r,o,i);var g=e.memoizedState;a!==h||d!==g||kn.current||Oi?(typeof p=="function"&&(ey(e,n,p,r),g=e.memoizedState),(u=Oi||kw(e,n,u,r,d,g,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return iy(t,e,n,r,s,i)}function iy(t,e,n,r,i,s){qT(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Ew(e,n,!1),fi(t,e,s);r=e.stateNode,RA.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=_a(e,t.child,null,s),e.child=_a(e,null,a,s)):pn(t,e,a,s),e.memoizedState=r.state,i&&Ew(e,n,!0),e.child}function HT(t){var e=t.stateNode;e.pendingContext?ww(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ww(t,e.context,!1),lv(t,e.containerInfo)}function Fw(t,e,n,r,i){return va(),nv(i),e.flags|=256,pn(t,e,n,r),e.child}var sy={dehydrated:null,treeContext:null,retryLane:0};function oy(t){return{baseLanes:t,cachePool:null,transitions:null}}function KT(t,e,n){var r=e.pendingProps,i=nt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),je(nt,i&1),t===null)return Xg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Hf(o,r,0,null),t=qs(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=oy(n),e.memoizedState=sy,t):gv(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return NA(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=es(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=es(a,s):(s=qs(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?oy(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=sy,r}return s=t.child,t=s.sibling,r=es(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function gv(t,e){return e=Hf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ph(t,e,n,r){return r!==null&&nv(r),_a(e,t.child,null,n),t=gv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function NA(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Pm(Error(O(422))),ph(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Hf({mode:"visible",children:r.children},i,0,null),s=qs(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&_a(e,t.child,null,o),e.child.memoizedState=oy(o),e.memoizedState=sy,s);if(!(e.mode&1))return ph(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(O(419)),r=Pm(s,r,void 0),ph(t,e,o,r)}if(a=(o&t.childLanes)!==0,Tn||a){if(r=Ot,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,di(t,i),pr(r,t,i,-1))}return Sv(),r=Pm(Error(O(421))),ph(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=BA.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,On=Yi(i.nextSibling),Mn=e,Ye=!0,lr=null,t!==null&&(Wn[qn++]=ei,Wn[qn++]=ti,Wn[qn++]=Js,ei=t.id,ti=t.overflow,Js=e),e=gv(e,r.children),e.flags|=4096,e)}function Uw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Jg(t.return,e,n)}function Dm(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function GT(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(pn(t,e,r.children,n),r=nt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Uw(t,n,e);else if(t.tag===19)Uw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(je(nt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ed(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Dm(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ed(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Dm(e,!0,n,null,s);break;case"together":Dm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Wh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function fi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),to|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(O(153));if(e.child!==null){for(t=e.child,n=es(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=es(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function AA(t,e,n){switch(e.tag){case 3:HT(e),va();break;case 5:ET(e);break;case 1:xn(e.type)&&md(e);break;case 4:lv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;je(vd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(je(nt,nt.current&1),e.flags|=128,null):n&e.child.childLanes?KT(t,e,n):(je(nt,nt.current&1),t=fi(t,e,n),t!==null?t.sibling:null);je(nt,nt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return GT(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),je(nt,nt.current),r)break;return null;case 22:case 23:return e.lanes=0,WT(t,e,n)}return fi(t,e,n)}var QT,ay,YT,ZT;QT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ay=function(){};YT=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Fs(Fr.current);var s=null;switch(n){case"input":i=Rg(t,i),r=Rg(t,r),s=[];break;case"select":i=st({},i,{value:void 0}),r=st({},r,{value:void 0}),s=[];break;case"textarea":i=Og(t,i),r=Og(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=fd)}Dg(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(hu.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(hu.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ze("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};ZT=function(t,e,n,r){n!==r&&(e.flags|=4)};function Sl(t,e){if(!Ye)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Kt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function OA(t,e,n){var r=e.pendingProps;switch(tv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(e),null;case 1:return xn(e.type)&&pd(),Kt(e),null;case 3:return r=e.stateNode,wa(),He(kn),He(ln),cv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(dh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,lr!==null&&(my(lr),lr=null))),ay(t,e),Kt(e),null;case 5:uv(e);var i=Fs(Cu.current);if(n=e.type,t!==null&&e.stateNode!=null)YT(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(O(166));return Kt(e),null}if(t=Fs(Fr.current),dh(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[xr]=e,r[Eu]=s,t=(e.mode&1)!==0,n){case"dialog":ze("cancel",r),ze("close",r);break;case"iframe":case"object":case"embed":ze("load",r);break;case"video":case"audio":for(i=0;i<Ml.length;i++)ze(Ml[i],r);break;case"source":ze("error",r);break;case"img":case"image":case"link":ze("error",r),ze("load",r);break;case"details":ze("toggle",r);break;case"input":K_(r,s),ze("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ze("invalid",r);break;case"textarea":Q_(r,s),ze("invalid",r)}Dg(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&hh(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&hh(r.textContent,a,t),i=["children",""+a]):hu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ze("scroll",r)}switch(n){case"input":rh(r),G_(r,s,!0);break;case"textarea":rh(r),Y_(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=fd)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=TC(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[xr]=e,t[Eu]=r,QT(t,e,!1,!1),e.stateNode=t;e:{switch(o=Mg(n,r),n){case"dialog":ze("cancel",t),ze("close",t),i=r;break;case"iframe":case"object":case"embed":ze("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ml.length;i++)ze(Ml[i],t);i=r;break;case"source":ze("error",t),i=r;break;case"img":case"image":case"link":ze("error",t),ze("load",t),i=r;break;case"details":ze("toggle",t),i=r;break;case"input":K_(t,r),i=Rg(t,r),ze("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=st({},r,{value:void 0}),ze("invalid",t);break;case"textarea":Q_(t,r),i=Og(t,r),ze("invalid",t);break;default:i=r}Dg(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?xC(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&IC(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&du(t,l):typeof l=="number"&&du(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(hu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ze("scroll",t):l!=null&&V0(t,s,l,o))}switch(n){case"input":rh(t),G_(t,r,!1);break;case"textarea":rh(t),Y_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ls(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ea(t,!!r.multiple,s,!1):r.defaultValue!=null&&ea(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=fd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Kt(e),null;case 6:if(t&&e.stateNode!=null)ZT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(O(166));if(n=Fs(Cu.current),Fs(Fr.current),dh(e)){if(r=e.stateNode,n=e.memoizedProps,r[xr]=e,(s=r.nodeValue!==n)&&(t=Mn,t!==null))switch(t.tag){case 3:hh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&hh(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[xr]=e,e.stateNode=r}return Kt(e),null;case 13:if(He(nt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ye&&On!==null&&e.mode&1&&!(e.flags&128))pT(),va(),e.flags|=98560,s=!1;else if(s=dh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(O(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(O(317));s[xr]=e}else va(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Kt(e),s=!1}else lr!==null&&(my(lr),lr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||nt.current&1?Ct===0&&(Ct=3):Sv())),e.updateQueue!==null&&(e.flags|=4),Kt(e),null);case 4:return wa(),ay(t,e),t===null&&_u(e.stateNode.containerInfo),Kt(e),null;case 10:return sv(e.type._context),Kt(e),null;case 17:return xn(e.type)&&pd(),Kt(e),null;case 19:if(He(nt),s=e.memoizedState,s===null)return Kt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Sl(s,!1);else{if(Ct!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ed(t),o!==null){for(e.flags|=128,Sl(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return je(nt,nt.current&1|2),e.child}t=t.sibling}s.tail!==null&&mt()>Sa&&(e.flags|=128,r=!0,Sl(s,!1),e.lanes=4194304)}else{if(!r)if(t=Ed(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Sl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ye)return Kt(e),null}else 2*mt()-s.renderingStartTime>Sa&&n!==1073741824&&(e.flags|=128,r=!0,Sl(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=mt(),e.sibling=null,n=nt.current,je(nt,r?n&1|2:n&1),e):(Kt(e),null);case 22:case 23:return Ev(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Nn&1073741824&&(Kt(e),e.subtreeFlags&6&&(e.flags|=8192)):Kt(e),null;case 24:return null;case 25:return null}throw Error(O(156,e.tag))}function PA(t,e){switch(tv(e),e.tag){case 1:return xn(e.type)&&pd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return wa(),He(kn),He(ln),cv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return uv(e),null;case 13:if(He(nt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(O(340));va()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return He(nt),null;case 4:return wa(),null;case 10:return sv(e.type._context),null;case 22:case 23:return Ev(),null;case 24:return null;default:return null}}var mh=!1,Zt=!1,DA=typeof WeakSet=="function"?WeakSet:Set,q=null;function Ko(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){lt(t,e,r)}else n.current=null}function ly(t,e,n){try{n()}catch(r){lt(t,e,r)}}var $w=!1;function MA(t,e){if(qg=cd,t=tT(),J0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,h=t,d=null;t:for(;;){for(var p;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)d=h,h=p;for(;;){if(h===t)break t;if(d===n&&++u===i&&(a=o),d===s&&++c===r&&(l=o),(p=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Hg={focusedElem:t,selectionRange:n},cd=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var _=g.memoizedProps,w=g.memoizedState,y=e.stateNode,f=y.getSnapshotBeforeUpdate(e.elementType===e.type?_:or(e.type,_),w);y.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(E){lt(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return g=$w,$w=!1,g}function Zl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&ly(e,n,s)}i=i.next}while(i!==r)}}function Wf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function uy(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function XT(t){var e=t.alternate;e!==null&&(t.alternate=null,XT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[xr],delete e[Eu],delete e[Qg],delete e[yA],delete e[vA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function JT(t){return t.tag===5||t.tag===3||t.tag===4}function Vw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||JT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function cy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=fd));else if(r!==4&&(t=t.child,t!==null))for(cy(t,e,n),t=t.sibling;t!==null;)cy(t,e,n),t=t.sibling}function hy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(hy(t,e,n),t=t.sibling;t!==null;)hy(t,e,n),t=t.sibling}var $t=null,ar=!1;function xi(t,e,n){for(n=n.child;n!==null;)eI(t,e,n),n=n.sibling}function eI(t,e,n){if(Lr&&typeof Lr.onCommitFiberUnmount=="function")try{Lr.onCommitFiberUnmount(Lf,n)}catch{}switch(n.tag){case 5:Zt||Ko(n,e);case 6:var r=$t,i=ar;$t=null,xi(t,e,n),$t=r,ar=i,$t!==null&&(ar?(t=$t,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):$t.removeChild(n.stateNode));break;case 18:$t!==null&&(ar?(t=$t,n=n.stateNode,t.nodeType===8?xm(t.parentNode,n):t.nodeType===1&&xm(t,n),gu(t)):xm($t,n.stateNode));break;case 4:r=$t,i=ar,$t=n.stateNode.containerInfo,ar=!0,xi(t,e,n),$t=r,ar=i;break;case 0:case 11:case 14:case 15:if(!Zt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&ly(n,e,o),i=i.next}while(i!==r)}xi(t,e,n);break;case 1:if(!Zt&&(Ko(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){lt(n,e,a)}xi(t,e,n);break;case 21:xi(t,e,n);break;case 22:n.mode&1?(Zt=(r=Zt)||n.memoizedState!==null,xi(t,e,n),Zt=r):xi(t,e,n);break;default:xi(t,e,n)}}function jw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new DA),e.forEach(function(r){var i=WA.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function rr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:$t=a.stateNode,ar=!1;break e;case 3:$t=a.stateNode.containerInfo,ar=!0;break e;case 4:$t=a.stateNode.containerInfo,ar=!0;break e}a=a.return}if($t===null)throw Error(O(160));eI(s,o,i),$t=null,ar=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){lt(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)tI(e,t),e=e.sibling}function tI(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(rr(e,t),Tr(t),r&4){try{Zl(3,t,t.return),Wf(3,t)}catch(_){lt(t,t.return,_)}try{Zl(5,t,t.return)}catch(_){lt(t,t.return,_)}}break;case 1:rr(e,t),Tr(t),r&512&&n!==null&&Ko(n,n.return);break;case 5:if(rr(e,t),Tr(t),r&512&&n!==null&&Ko(n,n.return),t.flags&32){var i=t.stateNode;try{du(i,"")}catch(_){lt(t,t.return,_)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&SC(i,s),Mg(a,o);var u=Mg(a,s);for(o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?xC(i,h):c==="dangerouslySetInnerHTML"?IC(i,h):c==="children"?du(i,h):V0(i,c,h,u)}switch(a){case"input":Ng(i,s);break;case"textarea":CC(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?ea(i,!!s.multiple,p,!1):d!==!!s.multiple&&(s.defaultValue!=null?ea(i,!!s.multiple,s.defaultValue,!0):ea(i,!!s.multiple,s.multiple?[]:"",!1))}i[Eu]=s}catch(_){lt(t,t.return,_)}}break;case 6:if(rr(e,t),Tr(t),r&4){if(t.stateNode===null)throw Error(O(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(_){lt(t,t.return,_)}}break;case 3:if(rr(e,t),Tr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{gu(e.containerInfo)}catch(_){lt(t,t.return,_)}break;case 4:rr(e,t),Tr(t);break;case 13:rr(e,t),Tr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(_v=mt())),r&4&&jw(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Zt=(u=Zt)||c,rr(e,t),Zt=u):rr(e,t),Tr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(q=t,c=t.child;c!==null;){for(h=q=c;q!==null;){switch(d=q,p=d.child,d.tag){case 0:case 11:case 14:case 15:Zl(4,d,d.return);break;case 1:Ko(d,d.return);var g=d.stateNode;if(typeof g.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(_){lt(r,n,_)}}break;case 5:Ko(d,d.return);break;case 22:if(d.memoizedState!==null){Bw(h);continue}}p!==null?(p.return=d,q=p):Bw(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=kC("display",o))}catch(_){lt(t,t.return,_)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(_){lt(t,t.return,_)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:rr(e,t),Tr(t),r&4&&jw(t);break;case 21:break;default:rr(e,t),Tr(t)}}function Tr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(JT(n)){var r=n;break e}n=n.return}throw Error(O(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(du(i,""),r.flags&=-33);var s=Vw(t);hy(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Vw(t);cy(t,a,o);break;default:throw Error(O(161))}}catch(l){lt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function LA(t,e,n){q=t,nI(t)}function nI(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var i=q,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||mh;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Zt;a=mh;var u=Zt;if(mh=o,(Zt=l)&&!u)for(q=i;q!==null;)o=q,l=o.child,o.tag===22&&o.memoizedState!==null?Ww(i):l!==null?(l.return=o,q=l):Ww(i);for(;s!==null;)q=s,nI(s),s=s.sibling;q=i,mh=a,Zt=u}zw(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,q=s):zw(t)}}function zw(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Zt||Wf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Zt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:or(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Iw(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Iw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&gu(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}Zt||e.flags&512&&uy(e)}catch(d){lt(e,e.return,d)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function Bw(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function Ww(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Wf(4,e)}catch(l){lt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){lt(e,i,l)}}var s=e.return;try{uy(e)}catch(l){lt(e,s,l)}break;case 5:var o=e.return;try{uy(e)}catch(l){lt(e,o,l)}}}catch(l){lt(e,e.return,l)}if(e===t){q=null;break}var a=e.sibling;if(a!==null){a.return=e.return,q=a;break}q=e.return}}var FA=Math.ceil,Td=Ci.ReactCurrentDispatcher,yv=Ci.ReactCurrentOwner,Qn=Ci.ReactCurrentBatchConfig,Ie=0,Ot=null,_t=null,Bt=0,Nn=0,Go=ws(0),Ct=0,xu=null,to=0,qf=0,vv=0,Xl=null,Sn=null,_v=0,Sa=1/0,Yr=null,Id=!1,dy=null,Xi=null,gh=!1,Bi=null,kd=0,Jl=0,fy=null,qh=-1,Hh=0;function yn(){return Ie&6?mt():qh!==-1?qh:qh=mt()}function Ji(t){return t.mode&1?Ie&2&&Bt!==0?Bt&-Bt:wA.transition!==null?(Hh===0&&(Hh=$C()),Hh):(t=Oe,t!==0||(t=window.event,t=t===void 0?16:HC(t.type)),t):1}function pr(t,e,n,r){if(50<Jl)throw Jl=0,fy=null,Error(O(185));dc(t,n,r),(!(Ie&2)||t!==Ot)&&(t===Ot&&(!(Ie&2)&&(qf|=n),Ct===4&&Mi(t,Bt)),bn(t,r),n===1&&Ie===0&&!(e.mode&1)&&(Sa=mt()+500,jf&&Es()))}function bn(t,e){var n=t.callbackNode;w4(t,e);var r=ud(t,t===Ot?Bt:0);if(r===0)n!==null&&J_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&J_(n),e===1)t.tag===0?_A(qw.bind(null,t)):hT(qw.bind(null,t)),mA(function(){!(Ie&6)&&Es()}),n=null;else{switch(VC(r)){case 1:n=q0;break;case 4:n=FC;break;case 16:n=ld;break;case 536870912:n=UC;break;default:n=ld}n=cI(n,rI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function rI(t,e){if(qh=-1,Hh=0,Ie&6)throw Error(O(327));var n=t.callbackNode;if(sa()&&t.callbackNode!==n)return null;var r=ud(t,t===Ot?Bt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=xd(t,r);else{e=r;var i=Ie;Ie|=2;var s=sI();(Ot!==t||Bt!==e)&&(Yr=null,Sa=mt()+500,Ws(t,e));do try{VA();break}catch(a){iI(t,a)}while(1);iv(),Td.current=s,Ie=i,_t!==null?e=0:(Ot=null,Bt=0,e=Ct)}if(e!==0){if(e===2&&(i=Vg(t),i!==0&&(r=i,e=py(t,i))),e===1)throw n=xu,Ws(t,0),Mi(t,r),bn(t,mt()),n;if(e===6)Mi(t,r);else{if(i=t.current.alternate,!(r&30)&&!UA(i)&&(e=xd(t,r),e===2&&(s=Vg(t),s!==0&&(r=s,e=py(t,s))),e===1))throw n=xu,Ws(t,0),Mi(t,r),bn(t,mt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(O(345));case 2:Ns(t,Sn,Yr);break;case 3:if(Mi(t,r),(r&130023424)===r&&(e=_v+500-mt(),10<e)){if(ud(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){yn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Gg(Ns.bind(null,t,Sn,Yr),e);break}Ns(t,Sn,Yr);break;case 4:if(Mi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-fr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=mt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*FA(r/1960))-r,10<r){t.timeoutHandle=Gg(Ns.bind(null,t,Sn,Yr),r);break}Ns(t,Sn,Yr);break;case 5:Ns(t,Sn,Yr);break;default:throw Error(O(329))}}}return bn(t,mt()),t.callbackNode===n?rI.bind(null,t):null}function py(t,e){var n=Xl;return t.current.memoizedState.isDehydrated&&(Ws(t,e).flags|=256),t=xd(t,e),t!==2&&(e=Sn,Sn=n,e!==null&&my(e)),t}function my(t){Sn===null?Sn=t:Sn.push.apply(Sn,t)}function UA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!_r(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Mi(t,e){for(e&=~vv,e&=~qf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-fr(e),r=1<<n;t[n]=-1,e&=~r}}function qw(t){if(Ie&6)throw Error(O(327));sa();var e=ud(t,0);if(!(e&1))return bn(t,mt()),null;var n=xd(t,e);if(t.tag!==0&&n===2){var r=Vg(t);r!==0&&(e=r,n=py(t,r))}if(n===1)throw n=xu,Ws(t,0),Mi(t,e),bn(t,mt()),n;if(n===6)throw Error(O(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ns(t,Sn,Yr),bn(t,mt()),null}function wv(t,e){var n=Ie;Ie|=1;try{return t(e)}finally{Ie=n,Ie===0&&(Sa=mt()+500,jf&&Es())}}function no(t){Bi!==null&&Bi.tag===0&&!(Ie&6)&&sa();var e=Ie;Ie|=1;var n=Qn.transition,r=Oe;try{if(Qn.transition=null,Oe=1,t)return t()}finally{Oe=r,Qn.transition=n,Ie=e,!(Ie&6)&&Es()}}function Ev(){Nn=Go.current,He(Go)}function Ws(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,pA(n)),_t!==null)for(n=_t.return;n!==null;){var r=n;switch(tv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&pd();break;case 3:wa(),He(kn),He(ln),cv();break;case 5:uv(r);break;case 4:wa();break;case 13:He(nt);break;case 19:He(nt);break;case 10:sv(r.type._context);break;case 22:case 23:Ev()}n=n.return}if(Ot=t,_t=t=es(t.current,null),Bt=Nn=e,Ct=0,xu=null,vv=qf=to=0,Sn=Xl=null,Ls!==null){for(e=0;e<Ls.length;e++)if(n=Ls[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ls=null}return t}function iI(t,e){do{var n=_t;try{if(iv(),zh.current=Cd,Sd){for(var r=rt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Sd=!1}if(eo=0,bt=St=rt=null,Yl=!1,Tu=0,yv.current=null,n===null||n.return===null){Ct=1,xu=e,_t=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Bt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=Ow(o);if(p!==null){p.flags&=-257,Pw(p,o,a,s,e),p.mode&1&&Aw(s,u,e),e=p,l=u;var g=e.updateQueue;if(g===null){var _=new Set;_.add(l),e.updateQueue=_}else g.add(l);break e}else{if(!(e&1)){Aw(s,u,e),Sv();break e}l=Error(O(426))}}else if(Ye&&a.mode&1){var w=Ow(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Pw(w,o,a,s,e),nv(Ea(l,a));break e}}s=l=Ea(l,a),Ct!==4&&(Ct=2),Xl===null?Xl=[s]:Xl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=jT(s,l,e);Tw(s,y);break e;case 1:a=l;var f=s.type,m=s.stateNode;if(!(s.flags&128)&&(typeof f.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Xi===null||!Xi.has(m)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=zT(s,a,e);Tw(s,E);break e}}s=s.return}while(s!==null)}aI(n)}catch(C){e=C,_t===n&&n!==null&&(_t=n=n.return);continue}break}while(1)}function sI(){var t=Td.current;return Td.current=Cd,t===null?Cd:t}function Sv(){(Ct===0||Ct===3||Ct===2)&&(Ct=4),Ot===null||!(to&268435455)&&!(qf&268435455)||Mi(Ot,Bt)}function xd(t,e){var n=Ie;Ie|=2;var r=sI();(Ot!==t||Bt!==e)&&(Yr=null,Ws(t,e));do try{$A();break}catch(i){iI(t,i)}while(1);if(iv(),Ie=n,Td.current=r,_t!==null)throw Error(O(261));return Ot=null,Bt=0,Ct}function $A(){for(;_t!==null;)oI(_t)}function VA(){for(;_t!==null&&!h4();)oI(_t)}function oI(t){var e=uI(t.alternate,t,Nn);t.memoizedProps=t.pendingProps,e===null?aI(t):_t=e,yv.current=null}function aI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=PA(n,e),n!==null){n.flags&=32767,_t=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ct=6,_t=null;return}}else if(n=OA(n,e,Nn),n!==null){_t=n;return}if(e=e.sibling,e!==null){_t=e;return}_t=e=t}while(e!==null);Ct===0&&(Ct=5)}function Ns(t,e,n){var r=Oe,i=Qn.transition;try{Qn.transition=null,Oe=1,jA(t,e,n,r)}finally{Qn.transition=i,Oe=r}return null}function jA(t,e,n,r){do sa();while(Bi!==null);if(Ie&6)throw Error(O(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(O(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(E4(t,s),t===Ot&&(_t=Ot=null,Bt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||gh||(gh=!0,cI(ld,function(){return sa(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Qn.transition,Qn.transition=null;var o=Oe;Oe=1;var a=Ie;Ie|=4,yv.current=null,MA(t,n),tI(n,t),aA(Hg),cd=!!qg,Hg=qg=null,t.current=n,LA(n),d4(),Ie=a,Oe=o,Qn.transition=s}else t.current=n;if(gh&&(gh=!1,Bi=t,kd=i),s=t.pendingLanes,s===0&&(Xi=null),m4(n.stateNode),bn(t,mt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Id)throw Id=!1,t=dy,dy=null,t;return kd&1&&t.tag!==0&&sa(),s=t.pendingLanes,s&1?t===fy?Jl++:(Jl=0,fy=t):Jl=0,Es(),null}function sa(){if(Bi!==null){var t=VC(kd),e=Qn.transition,n=Oe;try{if(Qn.transition=null,Oe=16>t?16:t,Bi===null)var r=!1;else{if(t=Bi,Bi=null,kd=0,Ie&6)throw Error(O(331));var i=Ie;for(Ie|=4,q=t.current;q!==null;){var s=q,o=s.child;if(q.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(q=u;q!==null;){var c=q;switch(c.tag){case 0:case 11:case 15:Zl(8,c,s)}var h=c.child;if(h!==null)h.return=c,q=h;else for(;q!==null;){c=q;var d=c.sibling,p=c.return;if(XT(c),c===u){q=null;break}if(d!==null){d.return=p,q=d;break}q=p}}}var g=s.alternate;if(g!==null){var _=g.child;if(_!==null){g.child=null;do{var w=_.sibling;_.sibling=null,_=w}while(_!==null)}}q=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,q=o;else e:for(;q!==null;){if(s=q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Zl(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,q=y;break e}q=s.return}}var f=t.current;for(q=f;q!==null;){o=q;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,q=m;else e:for(o=f;q!==null;){if(a=q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Wf(9,a)}}catch(C){lt(a,a.return,C)}if(a===o){q=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,q=E;break e}q=a.return}}if(Ie=i,Es(),Lr&&typeof Lr.onPostCommitFiberRoot=="function")try{Lr.onPostCommitFiberRoot(Lf,t)}catch{}r=!0}return r}finally{Oe=n,Qn.transition=e}}return!1}function Hw(t,e,n){e=Ea(n,e),e=jT(t,e,1),t=Zi(t,e,1),e=yn(),t!==null&&(dc(t,1,e),bn(t,e))}function lt(t,e,n){if(t.tag===3)Hw(t,t,n);else for(;e!==null;){if(e.tag===3){Hw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Xi===null||!Xi.has(r))){t=Ea(n,t),t=zT(e,t,1),e=Zi(e,t,1),t=yn(),e!==null&&(dc(e,1,t),bn(e,t));break}}e=e.return}}function zA(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=yn(),t.pingedLanes|=t.suspendedLanes&n,Ot===t&&(Bt&n)===n&&(Ct===4||Ct===3&&(Bt&130023424)===Bt&&500>mt()-_v?Ws(t,0):vv|=n),bn(t,e)}function lI(t,e){e===0&&(t.mode&1?(e=oh,oh<<=1,!(oh&130023424)&&(oh=4194304)):e=1);var n=yn();t=di(t,e),t!==null&&(dc(t,e,n),bn(t,n))}function BA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),lI(t,n)}function WA(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(O(314))}r!==null&&r.delete(e),lI(t,n)}var uI;uI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||kn.current)Tn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Tn=!1,AA(t,e,n);Tn=!!(t.flags&131072)}else Tn=!1,Ye&&e.flags&1048576&&dT(e,yd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Wh(t,e),t=e.pendingProps;var i=ya(e,ln.current);ia(e,n),i=dv(null,e,r,t,i,n);var s=fv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xn(r)?(s=!0,md(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,av(e),i.updater=zf,e.stateNode=i,i._reactInternals=e,ty(e,r,t,n),e=iy(null,e,r,!0,s,n)):(e.tag=0,Ye&&s&&ev(e),pn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Wh(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=HA(r),t=or(r,t),i){case 0:e=ry(null,e,r,t,n);break e;case 1:e=Lw(null,e,r,t,n);break e;case 11:e=Dw(null,e,r,t,n);break e;case 14:e=Mw(null,e,r,or(r.type,t),n);break e}throw Error(O(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:or(r,i),ry(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:or(r,i),Lw(t,e,r,i,n);case 3:e:{if(HT(e),t===null)throw Error(O(387));r=e.pendingProps,s=e.memoizedState,i=s.element,gT(t,e),wd(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ea(Error(O(423)),e),e=Fw(t,e,r,n,i);break e}else if(r!==i){i=Ea(Error(O(424)),e),e=Fw(t,e,r,n,i);break e}else for(On=Yi(e.stateNode.containerInfo.firstChild),Mn=e,Ye=!0,lr=null,n=wT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(va(),r===i){e=fi(t,e,n);break e}pn(t,e,r,n)}e=e.child}return e;case 5:return ET(e),t===null&&Xg(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Kg(r,i)?o=null:s!==null&&Kg(r,s)&&(e.flags|=32),qT(t,e),pn(t,e,o,n),e.child;case 6:return t===null&&Xg(e),null;case 13:return KT(t,e,n);case 4:return lv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=_a(e,null,r,n):pn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:or(r,i),Dw(t,e,r,i,n);case 7:return pn(t,e,e.pendingProps,n),e.child;case 8:return pn(t,e,e.pendingProps.children,n),e.child;case 12:return pn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,je(vd,r._currentValue),r._currentValue=o,s!==null)if(_r(s.value,o)){if(s.children===i.children&&!kn.current){e=fi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=oi(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Jg(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(O(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Jg(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}pn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ia(e,n),i=Xn(i),r=r(i),e.flags|=1,pn(t,e,r,n),e.child;case 14:return r=e.type,i=or(r,e.pendingProps),i=or(r.type,i),Mw(t,e,r,i,n);case 15:return BT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:or(r,i),Wh(t,e),e.tag=1,xn(r)?(t=!0,md(e)):t=!1,ia(e,n),vT(e,r,i),ty(e,r,i,n),iy(null,e,r,!0,t,n);case 19:return GT(t,e,n);case 22:return WT(t,e,n)}throw Error(O(156,e.tag))};function cI(t,e){return LC(t,e)}function qA(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kn(t,e,n,r){return new qA(t,e,n,r)}function Cv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function HA(t){if(typeof t=="function")return Cv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===z0)return 11;if(t===B0)return 14}return 2}function es(t,e){var n=t.alternate;return n===null?(n=Kn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Kh(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Cv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Uo:return qs(n.children,i,s,e);case j0:o=8,i|=8;break;case Ig:return t=Kn(12,n,e,i|2),t.elementType=Ig,t.lanes=s,t;case kg:return t=Kn(13,n,e,i),t.elementType=kg,t.lanes=s,t;case xg:return t=Kn(19,n,e,i),t.elementType=xg,t.lanes=s,t;case _C:return Hf(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case yC:o=10;break e;case vC:o=9;break e;case z0:o=11;break e;case B0:o=14;break e;case Ai:o=16,r=null;break e}throw Error(O(130,t==null?t:typeof t,""))}return e=Kn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function qs(t,e,n,r){return t=Kn(7,t,r,e),t.lanes=n,t}function Hf(t,e,n,r){return t=Kn(22,t,r,e),t.elementType=_C,t.lanes=n,t.stateNode={isHidden:!1},t}function Mm(t,e,n){return t=Kn(6,t,null,e),t.lanes=n,t}function Lm(t,e,n){return e=Kn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function KA(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gm(0),this.expirationTimes=gm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gm(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Tv(t,e,n,r,i,s,o,a,l){return t=new KA(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Kn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},av(s),t}function GA(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function hI(t){if(!t)return us;t=t._reactInternals;e:{if(_o(t)!==t||t.tag!==1)throw Error(O(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(O(171))}if(t.tag===1){var n=t.type;if(xn(n))return cT(t,n,e)}return e}function dI(t,e,n,r,i,s,o,a,l){return t=Tv(n,r,!0,t,i,s,o,a,l),t.context=hI(null),n=t.current,r=yn(),i=Ji(n),s=oi(r,i),s.callback=e??null,Zi(n,s,i),t.current.lanes=i,dc(t,i,r),bn(t,r),t}function Kf(t,e,n,r){var i=e.current,s=yn(),o=Ji(i);return n=hI(n),e.context===null?e.context=n:e.pendingContext=n,e=oi(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Zi(i,e,o),t!==null&&(pr(t,i,o,s),jh(t,i,o)),o}function bd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Kw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Iv(t,e){Kw(t,e),(t=t.alternate)&&Kw(t,e)}function QA(){return null}var fI=typeof reportError=="function"?reportError:function(t){console.error(t)};function kv(t){this._internalRoot=t}Gf.prototype.render=kv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(O(409));Kf(t,e,null,null)};Gf.prototype.unmount=kv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;no(function(){Kf(null,t,null,null)}),e[hi]=null}};function Gf(t){this._internalRoot=t}Gf.prototype.unstable_scheduleHydration=function(t){if(t){var e=BC();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Di.length&&e!==0&&e<Di[n].priority;n++);Di.splice(n,0,t),n===0&&qC(t)}};function xv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Qf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Gw(){}function YA(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=bd(o);s.call(u)}}var o=dI(e,r,t,0,null,!1,!1,"",Gw);return t._reactRootContainer=o,t[hi]=o.current,_u(t.nodeType===8?t.parentNode:t),no(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=bd(l);a.call(u)}}var l=Tv(t,0,!1,null,null,!1,!1,"",Gw);return t._reactRootContainer=l,t[hi]=l.current,_u(t.nodeType===8?t.parentNode:t),no(function(){Kf(e,l,n,r)}),l}function Yf(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=bd(o);a.call(l)}}Kf(e,o,t,i)}else o=YA(n,e,t,i,r);return bd(o)}jC=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Dl(e.pendingLanes);n!==0&&(H0(e,n|1),bn(e,mt()),!(Ie&6)&&(Sa=mt()+500,Es()))}break;case 13:no(function(){var r=di(t,1);if(r!==null){var i=yn();pr(r,t,1,i)}}),Iv(t,1)}};K0=function(t){if(t.tag===13){var e=di(t,134217728);if(e!==null){var n=yn();pr(e,t,134217728,n)}Iv(t,134217728)}};zC=function(t){if(t.tag===13){var e=Ji(t),n=di(t,e);if(n!==null){var r=yn();pr(n,t,e,r)}Iv(t,e)}};BC=function(){return Oe};WC=function(t,e){var n=Oe;try{return Oe=t,e()}finally{Oe=n}};Fg=function(t,e,n){switch(e){case"input":if(Ng(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Vf(r);if(!i)throw Error(O(90));EC(r),Ng(r,i)}}}break;case"textarea":CC(t,n);break;case"select":e=n.value,e!=null&&ea(t,!!n.multiple,e,!1)}};NC=wv;AC=no;var ZA={usingClientEntryPoint:!1,Events:[pc,zo,Vf,bC,RC,wv]},Cl={findFiberByHostInstance:Ms,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},XA={bundleType:Cl.bundleType,version:Cl.version,rendererPackageName:Cl.rendererPackageName,rendererConfig:Cl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ci.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=DC(t),t===null?null:t.stateNode},findFiberByHostInstance:Cl.findFiberByHostInstance||QA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yh.isDisabled&&yh.supportsFiber)try{Lf=yh.inject(XA),Lr=yh}catch{}}Vn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZA;Vn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xv(e))throw Error(O(200));return GA(t,e,null,n)};Vn.createRoot=function(t,e){if(!xv(t))throw Error(O(299));var n=!1,r="",i=fI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Tv(t,1,!1,null,null,n,!1,r,i),t[hi]=e.current,_u(t.nodeType===8?t.parentNode:t),new kv(e)};Vn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(O(188)):(t=Object.keys(t).join(","),Error(O(268,t)));return t=DC(e),t=t===null?null:t.stateNode,t};Vn.flushSync=function(t){return no(t)};Vn.hydrate=function(t,e,n){if(!Qf(e))throw Error(O(200));return Yf(null,t,e,!0,n)};Vn.hydrateRoot=function(t,e,n){if(!xv(t))throw Error(O(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=fI;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=dI(e,null,t,1,n??null,i,!1,s,o),t[hi]=e.current,_u(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Gf(e)};Vn.render=function(t,e,n){if(!Qf(e))throw Error(O(200));return Yf(null,t,e,!1,n)};Vn.unmountComponentAtNode=function(t){if(!Qf(t))throw Error(O(40));return t._reactRootContainer?(no(function(){Yf(null,null,t,!1,function(){t._reactRootContainer=null,t[hi]=null})}),!0):!1};Vn.unstable_batchedUpdates=wv;Vn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Qf(n))throw Error(O(200));if(t==null||t._reactInternals===void 0)throw Error(O(38));return Yf(t,e,n,!1,r)};Vn.version="18.2.0-next-9e3b772b8-20220608";function pI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pI)}catch(t){console.error(t)}}pI(),dC.exports=Vn;var JA=dC.exports,Qw=JA;Cg.createRoot=Qw.createRoot,Cg.hydrateRoot=Qw.hydrateRoot;/**
 * @remix-run/router v1.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bu(){return bu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bu.apply(this,arguments)}var Wi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Wi||(Wi={}));const Yw="popstate";function eO(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return gy("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Rd(i)}return nO(e,n,null,t)}function gt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function bv(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function tO(){return Math.random().toString(36).substr(2,8)}function Zw(t,e){return{usr:t.state,key:t.key,idx:e}}function gy(t,e,n,r){return n===void 0&&(n=null),bu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ba(e):e,{state:n,key:e&&e.key||r||tO()})}function Rd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ba(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function nO(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Wi.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(bu({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function h(){a=Wi.Pop;let w=c(),y=w==null?null:w-u;u=w,l&&l({action:a,location:_.location,delta:y})}function d(w,y){a=Wi.Push;let f=gy(_.location,w,y);n&&n(f,w),u=c()+1;let m=Zw(f,u),E=_.createHref(f);try{o.pushState(m,"",E)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;i.location.assign(E)}s&&l&&l({action:a,location:_.location,delta:1})}function p(w,y){a=Wi.Replace;let f=gy(_.location,w,y);n&&n(f,w),u=c();let m=Zw(f,u),E=_.createHref(f);o.replaceState(m,"",E),s&&l&&l({action:a,location:_.location,delta:0})}function g(w){let y=i.location.origin!=="null"?i.location.origin:i.location.href,f=typeof w=="string"?w:Rd(w);return gt(y,"No window.location.(origin|href) available to create URL for href: "+f),new URL(f,y)}let _={get action(){return a},get location(){return t(i,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Yw,h),l=w,()=>{i.removeEventListener(Yw,h),l=null}},createHref(w){return e(i,w)},createURL:g,encodeLocation(w){let y=g(w);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:p,go(w){return o.go(w)}};return _}var Xw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Xw||(Xw={}));function rO(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Ba(e):e,i=Rv(r.pathname||"/",n);if(i==null)return null;let s=mI(t);iO(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=fO(s[a],gO(i));return o}function mI(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(gt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=ts([r,l.relativePath]),c=n.concat(l);s.children&&s.children.length>0&&(gt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),mI(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:hO(u,s.index),routesMeta:c})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of gI(s.path))i(s,o,l)}),e}function gI(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=gI(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function iO(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:dO(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const sO=/^:\w+$/,oO=3,aO=2,lO=1,uO=10,cO=-2,Jw=t=>t==="*";function hO(t,e){let n=t.split("/"),r=n.length;return n.some(Jw)&&(r+=cO),e&&(r+=aO),n.filter(i=>!Jw(i)).reduce((i,s)=>i+(sO.test(s)?oO:s===""?lO:uO),r)}function dO(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function fO(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",c=pO({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},u);if(!c)return null;Object.assign(r,c.params);let h=a.route;s.push({params:r,pathname:ts([i,c.pathname]),pathnameBase:wO(ts([i,c.pathnameBase])),route:h}),c.pathnameBase!=="/"&&(i=ts([i,c.pathnameBase]))}return s}function pO(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=mO(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,c,h)=>{if(c==="*"){let d=a[h]||"";o=s.slice(0,s.length-d.length).replace(/(.)\/+$/,"$1")}return u[c]=yO(a[h]||"",c),u},{}),pathname:s,pathnameBase:o,pattern:t}}function mO(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),bv(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function gO(t){try{return decodeURI(t)}catch(e){return bv(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function yO(t,e){try{return decodeURIComponent(t)}catch(n){return bv(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Rv(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function vO(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Ba(t):t;return{pathname:n?n.startsWith("/")?n:_O(n,e):e,search:EO(r),hash:SO(i)}}function _O(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Fm(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Nv(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Av(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Ba(t):(i=bu({},t),gt(!i.pathname||!i.pathname.includes("?"),Fm("?","pathname","search",i)),gt(!i.pathname||!i.pathname.includes("#"),Fm("#","pathname","hash",i)),gt(!i.search||!i.search.includes("#"),Fm("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(r||o==null)a=n;else{let h=e.length-1;if(o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h-=1;i.pathname=d.join("/")}a=h>=0?e[h]:"/"}let l=vO(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const ts=t=>t.join("/").replace(/\/\/+/g,"/"),wO=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),EO=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,SO=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function CO(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const yI=["post","put","patch","delete"];new Set(yI);const TO=["get",...yI];new Set(TO);/**
 * React Router v6.14.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nd(){return Nd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nd.apply(this,arguments)}const Ov=I.createContext(null),IO=I.createContext(null),Wa=I.createContext(null),Zf=I.createContext(null),Ti=I.createContext({outlet:null,matches:[],isDataRoute:!1}),vI=I.createContext(null);function kO(t,e){let{relative:n}=e===void 0?{}:e;qa()||gt(!1);let{basename:r,navigator:i}=I.useContext(Wa),{hash:s,pathname:o,search:a}=wI(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:ts([r,o])),i.createHref({pathname:l,search:a,hash:s})}function qa(){return I.useContext(Zf)!=null}function gc(){return qa()||gt(!1),I.useContext(Zf).location}function _I(t){I.useContext(Wa).static||I.useLayoutEffect(t)}function tr(){let{isDataRoute:t}=I.useContext(Ti);return t?VO():xO()}function xO(){qa()||gt(!1);let t=I.useContext(Ov),{basename:e,navigator:n}=I.useContext(Wa),{matches:r}=I.useContext(Ti),{pathname:i}=gc(),s=JSON.stringify(Nv(r).map(l=>l.pathnameBase)),o=I.useRef(!1);return _I(()=>{o.current=!0}),I.useCallback(function(l,u){if(u===void 0&&(u={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let c=Av(l,JSON.parse(s),i,u.relative==="path");t==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:ts([e,c.pathname])),(u.replace?n.replace:n.push)(c,u.state,u)},[e,n,s,i,t])}function bO(){let{matches:t}=I.useContext(Ti),e=t[t.length-1];return e?e.params:{}}function wI(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=I.useContext(Ti),{pathname:i}=gc(),s=JSON.stringify(Nv(r).map(o=>o.pathnameBase));return I.useMemo(()=>Av(t,JSON.parse(s),i,n==="path"),[t,s,i,n])}function RO(t,e){return NO(t,e)}function NO(t,e,n){qa()||gt(!1);let{navigator:r}=I.useContext(Wa),{matches:i}=I.useContext(Ti),s=i[i.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let l=gc(),u;if(e){var c;let _=typeof e=="string"?Ba(e):e;a==="/"||(c=_.pathname)!=null&&c.startsWith(a)||gt(!1),u=_}else u=l;let h=u.pathname||"/",d=a==="/"?h:h.slice(a.length)||"/",p=rO(t,{pathname:d}),g=MO(p&&p.map(_=>Object.assign({},_,{params:Object.assign({},o,_.params),pathname:ts([a,r.encodeLocation?r.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?a:ts([a,r.encodeLocation?r.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),i,n);return e&&g?I.createElement(Zf.Provider,{value:{location:Nd({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Wi.Pop}},g):g}function AO(){let t=$O(),e=CO(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),n?I.createElement("pre",{style:i},n):null,s)}const OO=I.createElement(AO,null);class PO extends I.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?I.createElement(Ti.Provider,{value:this.props.routeContext},I.createElement(vI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function DO(t){let{routeContext:e,match:n,children:r}=t,i=I.useContext(Ov);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),I.createElement(Ti.Provider,{value:e},r)}function MO(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let s=t,o=(r=n)==null?void 0:r.errors;if(o!=null){let a=s.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||gt(!1),s=s.slice(0,Math.min(s.length,a+1))}return s.reduceRight((a,l,u)=>{let c=l.route.id?o==null?void 0:o[l.route.id]:null,h=null;n&&(h=l.route.errorElement||OO);let d=e.concat(s.slice(0,u+1)),p=()=>{let g;return c?g=h:l.route.Component?g=I.createElement(l.route.Component,null):l.route.element?g=l.route.element:g=a,I.createElement(DO,{match:l,routeContext:{outlet:a,matches:d,isDataRoute:n!=null},children:g})};return n&&(l.route.ErrorBoundary||l.route.errorElement||u===0)?I.createElement(PO,{location:n.location,revalidation:n.revalidation,component:h,error:c,children:p(),routeContext:{outlet:null,matches:d,isDataRoute:!0}}):p()},null)}var yy;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"})(yy||(yy={}));var Ru;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"})(Ru||(Ru={}));function LO(t){let e=I.useContext(Ov);return e||gt(!1),e}function FO(t){let e=I.useContext(IO);return e||gt(!1),e}function UO(t){let e=I.useContext(Ti);return e||gt(!1),e}function EI(t){let e=UO(),n=e.matches[e.matches.length-1];return n.route.id||gt(!1),n.route.id}function $O(){var t;let e=I.useContext(vI),n=FO(Ru.UseRouteError),r=EI(Ru.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function VO(){let{router:t}=LO(yy.UseNavigateStable),e=EI(Ru.UseNavigateStable),n=I.useRef(!1);return _I(()=>{n.current=!0}),I.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Nd({fromRouteId:e},s)))},[t,e])}function jO(t){let{to:e,replace:n,state:r,relative:i}=t;qa()||gt(!1);let{matches:s}=I.useContext(Ti),{pathname:o}=gc(),a=tr(),l=Av(e,Nv(s).map(c=>c.pathnameBase),o,i==="path"),u=JSON.stringify(l);return I.useEffect(()=>a(JSON.parse(u),{replace:n,state:r,relative:i}),[a,u,i,n,r]),null}function Xr(t){gt(!1)}function zO(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Wi.Pop,navigator:s,static:o=!1}=t;qa()&&gt(!1);let a=e.replace(/^\/*/,"/"),l=I.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof r=="string"&&(r=Ba(r));let{pathname:u="/",search:c="",hash:h="",state:d=null,key:p="default"}=r,g=I.useMemo(()=>{let _=Rv(u,a);return _==null?null:{location:{pathname:_,search:c,hash:h,state:d,key:p},navigationType:i}},[a,u,c,h,d,p,i]);return g==null?null:I.createElement(Wa.Provider,{value:l},I.createElement(Zf.Provider,{children:n,value:g}))}function SI(t){let{children:e,location:n}=t;return RO(vy(e),n)}var eE;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(eE||(eE={}));new Promise(()=>{});function vy(t,e){e===void 0&&(e=[]);let n=[];return I.Children.forEach(t,(r,i)=>{if(!I.isValidElement(r))return;let s=[...e,i];if(r.type===I.Fragment){n.push.apply(n,vy(r.props.children,s));return}r.type!==Xr&&gt(!1),!r.props.index||!r.props.children||gt(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=vy(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.14.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _y(){return _y=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_y.apply(this,arguments)}function BO(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function WO(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function qO(t,e){return t.button===0&&(!e||e==="_self")&&!WO(t)}const HO=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],KO="startTransition",tE=B9[KO];function GO(t){let{basename:e,children:n,future:r,window:i}=t,s=I.useRef();s.current==null&&(s.current=eO({window:i,v5Compat:!0}));let o=s.current,[a,l]=I.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},c=I.useCallback(h=>{u&&tE?tE(()=>l(h)):l(h)},[l,u]);return I.useLayoutEffect(()=>o.listen(c),[o,c]),I.createElement(zO,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o})}const QO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",YO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,CI=I.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c}=e,h=BO(e,HO),{basename:d}=I.useContext(Wa),p,g=!1;if(typeof u=="string"&&YO.test(u)&&(p=u,QO))try{let f=new URL(window.location.href),m=u.startsWith("//")?new URL(f.protocol+u):new URL(u),E=Rv(m.pathname,d);m.origin===f.origin&&E!=null?u=E+m.search+m.hash:g=!0}catch{}let _=kO(u,{relative:i}),w=ZO(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i});function y(f){r&&r(f),f.defaultPrevented||w(f)}return I.createElement("a",_y({},h,{href:p||_,onClick:g||s?r:y,ref:n,target:l}))});var nE;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(nE||(nE={}));var rE;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(rE||(rE={}));function ZO(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o}=e===void 0?{}:e,a=tr(),l=gc(),u=wI(t,{relative:o});return I.useCallback(c=>{if(qO(c,n)){c.preventDefault();let h=r!==void 0?r:Rd(l)===Rd(u);a(t,{replace:h,state:i,preventScrollReset:s,relative:o})}},[l,a,u,r,i,n,t,s,o])}var TI={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},iE=Nt.createContext&&Nt.createContext(TI),ns=globalThis&&globalThis.__assign||function(){return ns=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ns.apply(this,arguments)},XO=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function II(t){return t&&t.map(function(e,n){return Nt.createElement(e.tag,ns({key:n},e.attr),II(e.child))})}function Je(t){return function(e){return Nt.createElement(JO,ns({attr:ns({},t.attr)},e),II(t.child))}}function JO(t){var e=function(n){var r=t.attr,i=t.size,s=t.title,o=XO(t,["attr","size","title"]),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),Nt.createElement("svg",ns({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:ns(ns({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&Nt.createElement("title",null,s),t.children)};return iE!==void 0?Nt.createElement(iE.Consumer,null,function(n){return e(n)}):e(TI)}function e5(t){return Je({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 100-2 1 1 0 000 2zm7-1a1 1 0 11-2 0 1 1 0 012 0zm-.464 5.535a1 1 0 10-1.415-1.414 3 3 0 01-4.242 0 1 1 0 00-1.415 1.414 5 5 0 007.072 0z",clipRule:"evenodd"}}]})(t)}class Ha{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){const n={listener:e};return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const Nu=typeof window>"u"||"Deno"in window;function zn(){}function t5(t,e){return typeof t=="function"?t(e):t}function wy(t){return typeof t=="number"&&t>=0&&t!==1/0}function kI(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Ll(t,e,n){return yc(t)?typeof e=="function"?{...n,queryKey:t,queryFn:e}:{...e,queryKey:t}:t}function n5(t,e,n){return yc(t)?typeof e=="function"?{...n,mutationKey:t,mutationFn:e}:{...e,mutationKey:t}:typeof t=="function"?{...e,mutationFn:t}:{...t}}function Pi(t,e,n){return yc(t)?[{...e,queryKey:t},n]:[t||{},e]}function sE(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(yc(o)){if(r){if(e.queryHash!==Pv(o,e.options))return!1}else if(!Ad(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||typeof i<"u"&&i!==e.state.fetchStatus||s&&!s(e))}function oE(t,e){const{exact:n,fetching:r,predicate:i,mutationKey:s}=t;if(yc(s)){if(!e.options.mutationKey)return!1;if(n){if(Us(e.options.mutationKey)!==Us(s))return!1}else if(!Ad(e.options.mutationKey,s))return!1}return!(typeof r=="boolean"&&e.state.status==="loading"!==r||i&&!i(e))}function Pv(t,e){return((e==null?void 0:e.queryKeyHashFn)||Us)(t)}function Us(t){return JSON.stringify(t,(e,n)=>Sy(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function Ad(t,e){return xI(t,e)}function xI(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!xI(t[n],e[n])):!1}function bI(t,e){if(t===e)return t;const n=aE(t)&&aE(e);if(n||Sy(t)&&Sy(e)){const r=n?t.length:Object.keys(t).length,i=n?e:Object.keys(e),s=i.length,o=n?[]:{};let a=0;for(let l=0;l<s;l++){const u=n?l:i[l];o[u]=bI(t[u],e[u]),o[u]===t[u]&&a++}return r===s&&a===r?t:o}return e}function Ey(t,e){if(t&&!e||e&&!t)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function aE(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Sy(t){if(!lE(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!lE(n)||!n.hasOwnProperty("isPrototypeOf"))}function lE(t){return Object.prototype.toString.call(t)==="[object Object]"}function yc(t){return Array.isArray(t)}function RI(t){return new Promise(e=>{setTimeout(e,t)})}function uE(t){RI(0).then(t)}function r5(){if(typeof AbortController=="function")return new AbortController}function Cy(t,e,n){return n.isDataEqual!=null&&n.isDataEqual(t,e)?t:typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?bI(t,e):e}class i5 extends Ha{constructor(){super(),this.setup=e=>{if(!Nu&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),window.addEventListener("focus",n,!1),()=>{window.removeEventListener("visibilitychange",n),window.removeEventListener("focus",n)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var n;this.setup=e,(n=this.cleanup)==null||n.call(this),this.cleanup=e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()})}setFocused(e){this.focused!==e&&(this.focused=e,this.onFocus())}onFocus(){this.listeners.forEach(({listener:e})=>{e()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const Od=new i5,cE=["online","offline"];class s5 extends Ha{constructor(){super(),this.setup=e=>{if(!Nu&&window.addEventListener){const n=()=>e();return cE.forEach(r=>{window.addEventListener(r,n,!1)}),()=>{cE.forEach(r=>{window.removeEventListener(r,n)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var n;this.setup=e,(n=this.cleanup)==null||n.call(this),this.cleanup=e(r=>{typeof r=="boolean"?this.setOnline(r):this.onOnline()})}setOnline(e){this.online!==e&&(this.online=e,this.onOnline())}onOnline(){this.listeners.forEach(({listener:e})=>{e()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const Pd=new s5;function o5(t){return Math.min(1e3*2**t,3e4)}function Xf(t){return(t??"online")==="online"?Pd.isOnline():!0}class NI{constructor(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}}function Gh(t){return t instanceof NI}function AI(t){let e=!1,n=0,r=!1,i,s,o;const a=new Promise((w,y)=>{s=w,o=y}),l=w=>{r||(p(new NI(w)),t.abort==null||t.abort())},u=()=>{e=!0},c=()=>{e=!1},h=()=>!Od.isFocused()||t.networkMode!=="always"&&!Pd.isOnline(),d=w=>{r||(r=!0,t.onSuccess==null||t.onSuccess(w),i==null||i(),s(w))},p=w=>{r||(r=!0,t.onError==null||t.onError(w),i==null||i(),o(w))},g=()=>new Promise(w=>{i=y=>{const f=r||!h();return f&&w(y),f},t.onPause==null||t.onPause()}).then(()=>{i=void 0,r||t.onContinue==null||t.onContinue()}),_=()=>{if(r)return;let w;try{w=t.fn()}catch(y){w=Promise.reject(y)}Promise.resolve(w).then(d).catch(y=>{var f,m;if(r)return;const E=(f=t.retry)!=null?f:3,C=(m=t.retryDelay)!=null?m:o5,T=typeof C=="function"?C(n,y):C,b=E===!0||typeof E=="number"&&n<E||typeof E=="function"&&E(n,y);if(e||!b){p(y);return}n++,t.onFail==null||t.onFail(n,y),RI(T).then(()=>{if(h())return g()}).then(()=>{e?p(y):_()})})};return Xf(t.networkMode)?_():g().then(_),{promise:a,cancel:l,continue:()=>(i==null?void 0:i())?a:Promise.resolve(),cancelRetry:u,continueRetry:c}}const Dv=console;function a5(){let t=[],e=0,n=c=>{c()},r=c=>{c()};const i=c=>{let h;e++;try{h=c()}finally{e--,e||a()}return h},s=c=>{e?t.push(c):uE(()=>{n(c)})},o=c=>(...h)=>{s(()=>{c(...h)})},a=()=>{const c=t;t=[],c.length&&uE(()=>{r(()=>{c.forEach(h=>{n(h)})})})};return{batch:i,batchCalls:o,schedule:s,setNotifyFunction:c=>{n=c},setBatchNotifyFunction:c=>{r=c}}}const ut=a5();class OI{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),wy(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(e){this.cacheTime=Math.max(this.cacheTime||0,e??(Nu?1/0:5*60*1e3))}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class l5 extends OI{constructor(e){super(),this.abortSignalConsumed=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.logger=e.logger||Dv,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||u5(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(e,n){const r=Cy(this.state.data,e,this.options);return this.dispatch({data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){this.dispatch({type:"setState",state:e,setStateOptions:n})}cancel(e){var n;const r=this.promise;return(n=this.retryer)==null||n.cancel(e),r?r.then(zn).catch(zn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!kI(this.state.dataUpdatedAt,e)}onFocus(){var e;const n=this.observers.find(r=>r.shouldFetchOnWindowFocus());n&&n.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}onOnline(){var e;const n=this.observers.find(r=>r.shouldFetchOnReconnect());n&&n.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(e,n){var r,i;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&n!=null&&n.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var s;return(s=this.retryer)==null||s.continueRetry(),this.promise}}if(e&&this.setOptions(e),!this.options.queryFn){const p=this.observers.find(g=>g.options.queryFn);p&&this.setOptions(p.options)}Array.isArray(this.options.queryKey);const o=r5(),a={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},l=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>{if(o)return this.abortSignalConsumed=!0,o.signal}})};l(a);const u=()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(a)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'"),c={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:u};if(l(c),(r=this.options.behavior)==null||r.onFetch(c),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((i=c.fetchOptions)==null?void 0:i.meta)){var h;this.dispatch({type:"fetch",meta:(h=c.fetchOptions)==null?void 0:h.meta})}const d=p=>{if(Gh(p)&&p.silent||this.dispatch({type:"error",error:p}),!Gh(p)){var g,_,w,y;(g=(_=this.cache.config).onError)==null||g.call(_,p,this),(w=(y=this.cache.config).onSettled)==null||w.call(y,this.state.data,p,this)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=AI({fn:c.fetchFn,abort:o==null?void 0:o.abort.bind(o),onSuccess:p=>{var g,_,w,y;if(typeof p>"u"){d(new Error(this.queryHash+" data is undefined"));return}this.setData(p),(g=(_=this.cache.config).onSuccess)==null||g.call(_,p,this),(w=(y=this.cache.config).onSettled)==null||w.call(y,p,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:d,onFail:(p,g)=>{this.dispatch({type:"failed",failureCount:p,error:g})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(e){const n=r=>{var i,s;switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:(i=e.meta)!=null?i:null,fetchStatus:Xf(this.options.networkMode)?"fetching":"paused",...!r.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:(s=e.dataUpdatedAt)!=null?s:Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=e.error;return Gh(o)&&o.revert&&this.revertState?{...this.revertState}:{...r,error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),ut.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate(e)}),this.cache.notify({query:this,type:"updated",action:e})})}}function u5(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=typeof e<"u",r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"loading",fetchStatus:"idle"}}class c5 extends Ha{constructor(e){super(),this.config=e||{},this.queries=[],this.queriesMap={}}build(e,n,r){var i;const s=n.queryKey,o=(i=n.queryHash)!=null?i:Pv(s,n);let a=this.get(o);return a||(a=new l5({cache:this,logger:e.getLogger(),queryKey:s,queryHash:o,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"added",query:e}))}remove(e){const n=this.queriesMap[e.queryHash];n&&(e.destroy(),this.queries=this.queries.filter(r=>r!==e),n===e&&delete this.queriesMap[e.queryHash],this.notify({type:"removed",query:e}))}clear(){ut.batch(()=>{this.queries.forEach(e=>{this.remove(e)})})}get(e){return this.queriesMap[e]}getAll(){return this.queries}find(e,n){const[r]=Pi(e,n);return typeof r.exact>"u"&&(r.exact=!0),this.queries.find(i=>sE(r,i))}findAll(e,n){const[r]=Pi(e,n);return Object.keys(r).length>0?this.queries.filter(i=>sE(r,i)):this.queries}notify(e){ut.batch(()=>{this.listeners.forEach(({listener:n})=>{n(e)})})}onFocus(){ut.batch(()=>{this.queries.forEach(e=>{e.onFocus()})})}onOnline(){ut.batch(()=>{this.queries.forEach(e=>{e.onOnline()})})}}class h5 extends OI{constructor(e){super(),this.defaultOptions=e.defaultOptions,this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.logger=e.logger||Dv,this.observers=[],this.state=e.state||PI(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(e){this.dispatch({type:"setState",state:e})}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.observers=this.observers.filter(n=>n!==e),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){var e,n;return(e=(n=this.retryer)==null?void 0:n.continue())!=null?e:this.execute()}async execute(){const e=()=>{var b;return this.retryer=AI({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(k,H)=>{this.dispatch({type:"failed",failureCount:k,error:H})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(b=this.options.retry)!=null?b:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},n=this.state.status==="loading";try{var r,i,s,o,a,l,u,c;if(!n){var h,d,p,g;this.dispatch({type:"loading",variables:this.options.variables}),await((h=(d=this.mutationCache.config).onMutate)==null?void 0:h.call(d,this.state.variables,this));const k=await((p=(g=this.options).onMutate)==null?void 0:p.call(g,this.state.variables));k!==this.state.context&&this.dispatch({type:"loading",context:k,variables:this.state.variables})}const b=await e();return await((r=(i=this.mutationCache.config).onSuccess)==null?void 0:r.call(i,b,this.state.variables,this.state.context,this)),await((s=(o=this.options).onSuccess)==null?void 0:s.call(o,b,this.state.variables,this.state.context)),await((a=(l=this.mutationCache.config).onSettled)==null?void 0:a.call(l,b,null,this.state.variables,this.state.context,this)),await((u=(c=this.options).onSettled)==null?void 0:u.call(c,b,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:b}),b}catch(b){try{var _,w,y,f,m,E,C,T;throw await((_=(w=this.mutationCache.config).onError)==null?void 0:_.call(w,b,this.state.variables,this.state.context,this)),await((y=(f=this.options).onError)==null?void 0:y.call(f,b,this.state.variables,this.state.context)),await((m=(E=this.mutationCache.config).onSettled)==null?void 0:m.call(E,void 0,b,this.state.variables,this.state.context,this)),await((C=(T=this.options).onSettled)==null?void 0:C.call(T,void 0,b,this.state.variables,this.state.context)),b}finally{this.dispatch({type:"error",error:b})}}}dispatch(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"loading":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!Xf(this.options.networkMode),status:"loading",variables:e.variables};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"};case"setState":return{...r,...e.state}}};this.state=n(this.state),ut.batch(()=>{this.observers.forEach(r=>{r.onMutationUpdate(e)}),this.mutationCache.notify({mutation:this,type:"updated",action:e})})}}function PI(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class d5 extends Ha{constructor(e){super(),this.config=e||{},this.mutations=[],this.mutationId=0}build(e,n,r){const i=new h5({mutationCache:this,logger:e.getLogger(),mutationId:++this.mutationId,options:e.defaultMutationOptions(n),state:r,defaultOptions:n.mutationKey?e.getMutationDefaults(n.mutationKey):void 0});return this.add(i),i}add(e){this.mutations.push(e),this.notify({type:"added",mutation:e})}remove(e){this.mutations=this.mutations.filter(n=>n!==e),this.notify({type:"removed",mutation:e})}clear(){ut.batch(()=>{this.mutations.forEach(e=>{this.remove(e)})})}getAll(){return this.mutations}find(e){return typeof e.exact>"u"&&(e.exact=!0),this.mutations.find(n=>oE(e,n))}findAll(e){return this.mutations.filter(n=>oE(e,n))}notify(e){ut.batch(()=>{this.listeners.forEach(({listener:n})=>{n(e)})})}resumePausedMutations(){var e;return this.resuming=((e=this.resuming)!=null?e:Promise.resolve()).then(()=>{const n=this.mutations.filter(r=>r.state.isPaused);return ut.batch(()=>n.reduce((r,i)=>r.then(()=>i.continue().catch(zn)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function f5(){return{onFetch:t=>{t.fetchFn=()=>{var e,n,r,i,s,o;const a=(e=t.fetchOptions)==null||(n=e.meta)==null?void 0:n.refetchPage,l=(r=t.fetchOptions)==null||(i=r.meta)==null?void 0:i.fetchMore,u=l==null?void 0:l.pageParam,c=(l==null?void 0:l.direction)==="forward",h=(l==null?void 0:l.direction)==="backward",d=((s=t.state.data)==null?void 0:s.pages)||[],p=((o=t.state.data)==null?void 0:o.pageParams)||[];let g=p,_=!1;const w=T=>{Object.defineProperty(T,"signal",{enumerable:!0,get:()=>{var b;if((b=t.signal)!=null&&b.aborted)_=!0;else{var k;(k=t.signal)==null||k.addEventListener("abort",()=>{_=!0})}return t.signal}})},y=t.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+t.options.queryHash+"'")),f=(T,b,k,H)=>(g=H?[b,...g]:[...g,b],H?[k,...T]:[...T,k]),m=(T,b,k,H)=>{if(_)return Promise.reject("Cancelled");if(typeof k>"u"&&!b&&T.length)return Promise.resolve(T);const Y={queryKey:t.queryKey,pageParam:k,meta:t.options.meta};w(Y);const be=y(Y);return Promise.resolve(be).then(re=>f(T,k,re,H))};let E;if(!d.length)E=m([]);else if(c){const T=typeof u<"u",b=T?u:hE(t.options,d);E=m(d,T,b)}else if(h){const T=typeof u<"u",b=T?u:p5(t.options,d);E=m(d,T,b,!0)}else{g=[];const T=typeof t.options.getNextPageParam>"u";E=(a&&d[0]?a(d[0],0,d):!0)?m([],T,p[0]):Promise.resolve(f([],p[0],d[0]));for(let k=1;k<d.length;k++)E=E.then(H=>{if(a&&d[k]?a(d[k],k,d):!0){const be=T?p[k]:hE(t.options,H);return m(H,T,be)}return Promise.resolve(f(H,p[k],d[k]))})}return E.then(T=>({pages:T,pageParams:g}))}}}}function hE(t,e){return t.getNextPageParam==null?void 0:t.getNextPageParam(e[e.length-1],e)}function p5(t,e){return t.getPreviousPageParam==null?void 0:t.getPreviousPageParam(e[0],e)}class m5{constructor(e={}){this.queryCache=e.queryCache||new c5,this.mutationCache=e.mutationCache||new d5,this.logger=e.logger||Dv,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,this.mountCount===1&&(this.unsubscribeFocus=Od.subscribe(()=>{Od.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=Pd.subscribe(()=>{Pd.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var e,n;this.mountCount--,this.mountCount===0&&((e=this.unsubscribeFocus)==null||e.call(this),this.unsubscribeFocus=void 0,(n=this.unsubscribeOnline)==null||n.call(this),this.unsubscribeOnline=void 0)}isFetching(e,n){const[r]=Pi(e,n);return r.fetchStatus="fetching",this.queryCache.findAll(r).length}isMutating(e){return this.mutationCache.findAll({...e,fetching:!0}).length}getQueryData(e,n){var r;return(r=this.queryCache.find(e,n))==null?void 0:r.state.data}ensureQueryData(e,n,r){const i=Ll(e,n,r),s=this.getQueryData(i.queryKey);return s?Promise.resolve(s):this.fetchQuery(i)}getQueriesData(e){return this.getQueryCache().findAll(e).map(({queryKey:n,state:r})=>{const i=r.data;return[n,i]})}setQueryData(e,n,r){const i=this.queryCache.find(e),s=i==null?void 0:i.state.data,o=t5(n,s);if(typeof o>"u")return;const a=Ll(e),l=this.defaultQueryOptions(a);return this.queryCache.build(this,l).setData(o,{...r,manual:!0})}setQueriesData(e,n,r){return ut.batch(()=>this.getQueryCache().findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,n,r)]))}getQueryState(e,n){var r;return(r=this.queryCache.find(e,n))==null?void 0:r.state}removeQueries(e,n){const[r]=Pi(e,n),i=this.queryCache;ut.batch(()=>{i.findAll(r).forEach(s=>{i.remove(s)})})}resetQueries(e,n,r){const[i,s]=Pi(e,n,r),o=this.queryCache,a={type:"active",...i};return ut.batch(()=>(o.findAll(i).forEach(l=>{l.reset()}),this.refetchQueries(a,s)))}cancelQueries(e,n,r){const[i,s={}]=Pi(e,n,r);typeof s.revert>"u"&&(s.revert=!0);const o=ut.batch(()=>this.queryCache.findAll(i).map(a=>a.cancel(s)));return Promise.all(o).then(zn).catch(zn)}invalidateQueries(e,n,r){const[i,s]=Pi(e,n,r);return ut.batch(()=>{var o,a;if(this.queryCache.findAll(i).forEach(u=>{u.invalidate()}),i.refetchType==="none")return Promise.resolve();const l={...i,type:(o=(a=i.refetchType)!=null?a:i.type)!=null?o:"active"};return this.refetchQueries(l,s)})}refetchQueries(e,n,r){const[i,s]=Pi(e,n,r),o=ut.batch(()=>this.queryCache.findAll(i).filter(l=>!l.isDisabled()).map(l=>{var u;return l.fetch(void 0,{...s,cancelRefetch:(u=s==null?void 0:s.cancelRefetch)!=null?u:!0,meta:{refetchPage:i.refetchPage}})}));let a=Promise.all(o).then(zn);return s!=null&&s.throwOnError||(a=a.catch(zn)),a}fetchQuery(e,n,r){const i=Ll(e,n,r),s=this.defaultQueryOptions(i);typeof s.retry>"u"&&(s.retry=!1);const o=this.queryCache.build(this,s);return o.isStaleByTime(s.staleTime)?o.fetch(s):Promise.resolve(o.state.data)}prefetchQuery(e,n,r){return this.fetchQuery(e,n,r).then(zn).catch(zn)}fetchInfiniteQuery(e,n,r){const i=Ll(e,n,r);return i.behavior=f5(),this.fetchQuery(i)}prefetchInfiniteQuery(e,n,r){return this.fetchInfiniteQuery(e,n,r).then(zn).catch(zn)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(e){this.defaultOptions=e}setQueryDefaults(e,n){const r=this.queryDefaults.find(i=>Us(e)===Us(i.queryKey));r?r.defaultOptions=n:this.queryDefaults.push({queryKey:e,defaultOptions:n})}getQueryDefaults(e){if(!e)return;const n=this.queryDefaults.find(r=>Ad(e,r.queryKey));return n==null?void 0:n.defaultOptions}setMutationDefaults(e,n){const r=this.mutationDefaults.find(i=>Us(e)===Us(i.mutationKey));r?r.defaultOptions=n:this.mutationDefaults.push({mutationKey:e,defaultOptions:n})}getMutationDefaults(e){if(!e)return;const n=this.mutationDefaults.find(r=>Ad(e,r.mutationKey));return n==null?void 0:n.defaultOptions}defaultQueryOptions(e){if(e!=null&&e._defaulted)return e;const n={...this.defaultOptions.queries,...this.getQueryDefaults(e==null?void 0:e.queryKey),...e,_defaulted:!0};return!n.queryHash&&n.queryKey&&(n.queryHash=Pv(n.queryKey,n)),typeof n.refetchOnReconnect>"u"&&(n.refetchOnReconnect=n.networkMode!=="always"),typeof n.useErrorBoundary>"u"&&(n.useErrorBoundary=!!n.suspense),n}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...this.defaultOptions.mutations,...this.getMutationDefaults(e==null?void 0:e.mutationKey),...e,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}class g5 extends Ha{constructor(e,n){super(),this.client=e,this.options=n,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(n)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.currentQuery.addObserver(this),dE(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ty(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ty(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,n){const r=this.options,i=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),Ey(r,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=r.queryKey),this.updateQuery();const s=this.hasListeners();s&&fE(this.currentQuery,i,this.options,r)&&this.executeFetch(),this.updateResult(n),s&&(this.currentQuery!==i||this.options.enabled!==r.enabled||this.options.staleTime!==r.staleTime)&&this.updateStaleTimeout();const o=this.computeRefetchInterval();s&&(this.currentQuery!==i||this.options.enabled!==r.enabled||o!==this.currentRefetchInterval)&&this.updateRefetchInterval(o)}getOptimisticResult(e){const n=this.client.getQueryCache().build(this.client,e),r=this.createResult(n,e);return v5(this,r,e)&&(this.currentResult=r,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),r}getCurrentResult(){return this.currentResult}trackResult(e){const n={};return Object.keys(e).forEach(r=>{Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(r),e[r])})}),n}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...n}={}){return this.fetch({...n,meta:{refetchPage:e}})}fetchOptimistic(e){const n=this.client.defaultQueryOptions(e),r=this.client.getQueryCache().build(this.client,n);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,n))}fetch(e){var n;return this.executeFetch({...e,cancelRefetch:(n=e.cancelRefetch)!=null?n:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let n=this.currentQuery.fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(zn)),n}updateStaleTimeout(){if(this.clearStaleTimeout(),Nu||this.currentResult.isStale||!wy(this.options.staleTime))return;const n=kI(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},n)}computeRefetchInterval(){var e;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(e=this.options.refetchInterval)!=null?e:!1}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!(Nu||this.options.enabled===!1||!wy(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||Od.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,n){const r=this.currentQuery,i=this.options,s=this.currentResult,o=this.currentResultState,a=this.currentResultOptions,l=e!==r,u=l?e.state:this.currentQueryInitialState,c=l?this.currentResult:this.previousQueryResult,{state:h}=e;let{dataUpdatedAt:d,error:p,errorUpdatedAt:g,fetchStatus:_,status:w}=h,y=!1,f=!1,m;if(n._optimisticResults){const k=this.hasListeners(),H=!k&&dE(e,n),Y=k&&fE(e,r,n,i);(H||Y)&&(_=Xf(e.options.networkMode)?"fetching":"paused",d||(w="loading")),n._optimisticResults==="isRestoring"&&(_="idle")}if(n.keepPreviousData&&!h.dataUpdatedAt&&c!=null&&c.isSuccess&&w!=="error")m=c.data,d=c.dataUpdatedAt,w=c.status,y=!0;else if(n.select&&typeof h.data<"u")if(s&&h.data===(o==null?void 0:o.data)&&n.select===this.selectFn)m=this.selectResult;else try{this.selectFn=n.select,m=n.select(h.data),m=Cy(s==null?void 0:s.data,m,n),this.selectResult=m,this.selectError=null}catch(k){this.selectError=k}else m=h.data;if(typeof n.placeholderData<"u"&&typeof m>"u"&&w==="loading"){let k;if(s!=null&&s.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData))k=s.data;else if(k=typeof n.placeholderData=="function"?n.placeholderData():n.placeholderData,n.select&&typeof k<"u")try{k=n.select(k),this.selectError=null}catch(H){this.selectError=H}typeof k<"u"&&(w="success",m=Cy(s==null?void 0:s.data,k,n),f=!0)}this.selectError&&(p=this.selectError,m=this.selectResult,g=Date.now(),w="error");const E=_==="fetching",C=w==="loading",T=w==="error";return{status:w,fetchStatus:_,isLoading:C,isSuccess:w==="success",isError:T,isInitialLoading:C&&E,data:m,dataUpdatedAt:d,error:p,errorUpdatedAt:g,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:E,isRefetching:E&&!C,isLoadingError:T&&h.dataUpdatedAt===0,isPaused:_==="paused",isPlaceholderData:f,isPreviousData:y,isRefetchError:T&&h.dataUpdatedAt!==0,isStale:Mv(e,n),refetch:this.refetch,remove:this.remove}}updateResult(e){const n=this.currentResult,r=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,Ey(r,n))return;this.currentResult=r;const i={cache:!0},s=()=>{if(!n)return!0;const{notifyOnChangeProps:o}=this.options;if(o==="all"||!o&&!this.trackedProps.size)return!0;const a=new Set(o??this.trackedProps);return this.options.useErrorBoundary&&a.add("error"),Object.keys(this.currentResult).some(l=>{const u=l;return this.currentResult[u]!==n[u]&&a.has(u)})};(e==null?void 0:e.listeners)!==!1&&s()&&(i.listeners=!0),this.notify({...i,...e})}updateQuery(){const e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;const n=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){const n={};e.type==="success"?n.onSuccess=!e.manual:e.type==="error"&&!Gh(e.error)&&(n.onError=!0),this.updateResult(n),this.hasListeners()&&this.updateTimers()}notify(e){ut.batch(()=>{if(e.onSuccess){var n,r,i,s;(n=(r=this.options).onSuccess)==null||n.call(r,this.currentResult.data),(i=(s=this.options).onSettled)==null||i.call(s,this.currentResult.data,null)}else if(e.onError){var o,a,l,u;(o=(a=this.options).onError)==null||o.call(a,this.currentResult.error),(l=(u=this.options).onSettled)==null||l.call(u,void 0,this.currentResult.error)}e.listeners&&this.listeners.forEach(({listener:c})=>{c(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function y5(t,e){return e.enabled!==!1&&!t.state.dataUpdatedAt&&!(t.state.status==="error"&&e.retryOnMount===!1)}function dE(t,e){return y5(t,e)||t.state.dataUpdatedAt>0&&Ty(t,e,e.refetchOnMount)}function Ty(t,e,n){if(e.enabled!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Mv(t,e)}return!1}function fE(t,e,n,r){return n.enabled!==!1&&(t!==e||r.enabled===!1)&&(!n.suspense||t.state.status!=="error")&&Mv(t,n)}function Mv(t,e){return t.isStaleByTime(e.staleTime)}function v5(t,e,n){return n.keepPreviousData?!1:n.placeholderData!==void 0?e.isPlaceholderData:t.getCurrentResult()!==e}let _5=class extends Ha{constructor(e,n){super(),this.client=e,this.setOptions(n),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var n;const r=this.options;this.options=this.client.defaultMutationOptions(e),Ey(r,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),(n=this.currentMutation)==null||n.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.currentMutation)==null||e.removeObserver(this)}}onMutationUpdate(e){this.updateResult();const n={listeners:!0};e.type==="success"?n.onSuccess=!0:e.type==="error"&&(n.onError=!0),this.notify(n)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,n){return this.mutateOptions=n,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:typeof e<"u"?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const e=this.currentMutation?this.currentMutation.state:PI(),n={...e,isLoading:e.status==="loading",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset};this.currentResult=n}notify(e){ut.batch(()=>{if(this.mutateOptions&&this.hasListeners()){if(e.onSuccess){var n,r,i,s;(n=(r=this.mutateOptions).onSuccess)==null||n.call(r,this.currentResult.data,this.currentResult.variables,this.currentResult.context),(i=(s=this.mutateOptions).onSettled)==null||i.call(s,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)}else if(e.onError){var o,a,l,u;(o=(a=this.mutateOptions).onError)==null||o.call(a,this.currentResult.error,this.currentResult.variables,this.currentResult.context),(l=(u=this.mutateOptions).onSettled)==null||l.call(u,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}}e.listeners&&this.listeners.forEach(({listener:c})=>{c(this.currentResult)})})}};var DI={exports:{}},MI={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ca=I;function w5(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var E5=typeof Object.is=="function"?Object.is:w5,S5=Ca.useState,C5=Ca.useEffect,T5=Ca.useLayoutEffect,I5=Ca.useDebugValue;function k5(t,e){var n=e(),r=S5({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return T5(function(){i.value=n,i.getSnapshot=e,Um(i)&&s({inst:i})},[t,n,e]),C5(function(){return Um(i)&&s({inst:i}),t(function(){Um(i)&&s({inst:i})})},[t]),I5(n),n}function Um(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!E5(t,n)}catch{return!0}}function x5(t,e){return e()}var b5=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?x5:k5;MI.useSyncExternalStore=Ca.useSyncExternalStore!==void 0?Ca.useSyncExternalStore:b5;DI.exports=MI;var R5=DI.exports;const LI=R5.useSyncExternalStore,pE=I.createContext(void 0),FI=I.createContext(!1);function UI(t,e){return t||(e&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=pE),window.ReactQueryClientContext):pE)}const wo=({context:t}={})=>{const e=I.useContext(UI(t,I.useContext(FI)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},N5=({client:t,children:e,context:n,contextSharing:r=!1})=>{I.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]);const i=UI(n,r);return I.createElement(FI.Provider,{value:!n&&r},I.createElement(i.Provider,{value:t},e))},$I=I.createContext(!1),A5=()=>I.useContext($I);$I.Provider;function O5(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}const P5=I.createContext(O5()),D5=()=>I.useContext(P5);function VI(t,e){return typeof t=="function"?t(...e):!!t}const M5=(t,e)=>{(t.suspense||t.useErrorBoundary)&&(e.isReset()||(t.retryOnMount=!1))},L5=t=>{I.useEffect(()=>{t.clearReset()},[t])},F5=({result:t,errorResetBoundary:e,useErrorBoundary:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&VI(n,[t.error,r]),U5=t=>{t.suspense&&typeof t.staleTime!="number"&&(t.staleTime=1e3)},$5=(t,e)=>t.isLoading&&t.isFetching&&!e,V5=(t,e,n)=>(t==null?void 0:t.suspense)&&$5(e,n),j5=(t,e,n)=>e.fetchOptimistic(t).then(({data:r})=>{t.onSuccess==null||t.onSuccess(r),t.onSettled==null||t.onSettled(r,null)}).catch(r=>{n.clearReset(),t.onError==null||t.onError(r),t.onSettled==null||t.onSettled(void 0,r)});function z5(t,e){const n=wo({context:t.context}),r=A5(),i=D5(),s=n.defaultQueryOptions(t);s._optimisticResults=r?"isRestoring":"optimistic",s.onError&&(s.onError=ut.batchCalls(s.onError)),s.onSuccess&&(s.onSuccess=ut.batchCalls(s.onSuccess)),s.onSettled&&(s.onSettled=ut.batchCalls(s.onSettled)),U5(s),M5(s,i),L5(i);const[o]=I.useState(()=>new e(n,s)),a=o.getOptimisticResult(s);if(LI(I.useCallback(l=>{const u=r?()=>{}:o.subscribe(ut.batchCalls(l));return o.updateResult(),u},[o,r]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),I.useEffect(()=>{o.setOptions(s,{listeners:!1})},[s,o]),V5(s,a,r))throw j5(s,o,i);if(F5({result:a,errorResetBoundary:i,useErrorBoundary:s.useErrorBoundary,query:o.getCurrentQuery()}))throw a.error;return s.notifyOnChangeProps?a:o.trackResult(a)}function Un(t,e,n){const r=Ll(t,e,n);return z5(r,g5)}function pi(t,e,n){const r=n5(t,e,n),i=wo({context:r.context}),[s]=I.useState(()=>new _5(i,r));I.useEffect(()=>{s.setOptions(r)},[s,r]);const o=LI(I.useCallback(l=>s.subscribe(ut.batchCalls(l)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),a=I.useCallback((l,u)=>{s.mutate(l,u).catch(B5)},[s]);if(o.error&&VI(s.options.useErrorBoundary,[o.error]))throw o.error;return{...o,mutate:a,mutateAsync:o.mutate}}function B5(){}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $=function(t,e){if(!t)throw Ka(e)},Ka=function(t){return new Error("Firebase Database ("+jI.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},W5=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Lv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=s>>2,h=(s&3)<<4|a>>4;let d=(a&15)<<2|u>>6,p=u&63;l||(p=64,o||(d=64)),r.push(n[c],n[h],n[d],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(zI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):W5(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||h==null)throw new q5;const d=s<<2|a>>4;if(r.push(d),u!==64){const p=a<<4&240|u>>2;if(r.push(p),h!==64){const g=u<<6&192|h;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class q5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const BI=function(t){const e=zI(t);return Lv.encodeByteArray(e,!0)},Dd=function(t){return BI(t).replace(/\./g,"")},Md=function(t){try{return Lv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H5(t){return WI(void 0,t)}function WI(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!K5(n)||(t[n]=WI(t[n],e[n]));return t}function K5(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q5=()=>G5().__FIREBASE_DEFAULTS__,Y5=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Z5=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Md(t[1]);return e&&JSON.parse(e)},Jf=()=>{try{return Q5()||Y5()||Z5()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},qI=t=>{var e,n;return(n=(e=Jf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},HI=t=>{const e=qI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},KI=()=>{var t;return(t=Jf())===null||t===void 0?void 0:t.config},GI=t=>{var e;return(e=Jf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Dd(JSON.stringify(n)),Dd(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Uv(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(un())}function X5(){var t;const e=(t=Jf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function J5(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function YI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eP(){const t=un();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ZI(){return jI.NODE_ADMIN===!0}function tP(){try{return typeof indexedDB=="object"}catch{return!1}}function nP(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP="FirebaseError";class Wr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=rP,Object.setPrototypeOf(this,Wr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vc.prototype.create)}}class vc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?iP(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Wr(i,a,r)}}function iP(t,e){return t.replace(sP,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const sP=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(t){return JSON.parse(t)}function zt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Au(Md(s[0])||""),n=Au(Md(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},oP=function(t){const e=XI(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},aP=function(t){const e=XI(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ta(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Iy(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ld(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Fd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(mE(s)&&mE(o)){if(!Fd(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function mE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ga(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Fl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ul(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)r[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const d=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(d<<1|d>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],u,c;for(let h=0;h<80;h++){h<40?h<20?(u=a^s&(o^a),c=1518500249):(u=s^o^a,c=1859775393):h<60?(u=s&o|a&(s|o),c=2400959708):(u=s^o^a,c=3395469782);const d=(i<<5|i>>>27)+u+l+c+r[h]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=d}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function uP(t,e){const n=new cP(t,e);return n.subscribe.bind(n)}class cP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");hP(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=$m),i.error===void 0&&(i.error=$m),i.complete===void 0&&(i.complete=$m);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function $m(){}function dP(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,$(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},ep=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(t){return t&&t._delegate?t._delegate:t}class mi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Fv;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gP(e))try{this.getOrInitializeService({instanceIdentifier:As})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=As){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=As){return this.instances.has(e)}getOptions(e=As){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:mP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=As){return this.component?this.component.multipleInstances?e:As:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mP(t){return t===As?void 0:t}function gP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new pP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Te;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Te||(Te={}));const vP={debug:Te.DEBUG,verbose:Te.VERBOSE,info:Te.INFO,warn:Te.WARN,error:Te.ERROR,silent:Te.SILENT},_P=Te.INFO,wP={[Te.DEBUG]:"log",[Te.VERBOSE]:"log",[Te.INFO]:"info",[Te.WARN]:"warn",[Te.ERROR]:"error"},EP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=wP[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class tp{constructor(e){this.name=e,this._logLevel=_P,this._logHandler=EP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Te.DEBUG,...e),this._logHandler(this,Te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Te.VERBOSE,...e),this._logHandler(this,Te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Te.INFO,...e),this._logHandler(this,Te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Te.WARN,...e),this._logHandler(this,Te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Te.ERROR,...e),this._logHandler(this,Te.ERROR,...e)}}const SP=(t,e)=>e.some(n=>t instanceof n);let gE,yE;function CP(){return gE||(gE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TP(){return yE||(yE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const JI=new WeakMap,ky=new WeakMap,ek=new WeakMap,Vm=new WeakMap,$v=new WeakMap;function IP(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(rs(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&JI.set(n,t)}).catch(()=>{}),$v.set(e,t),e}function kP(t){if(ky.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});ky.set(t,e)}let xy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ky.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ek.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return rs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function xP(t){xy=t(xy)}function bP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(jm(this),e,...n);return ek.set(r,e.sort?e.sort():[e]),rs(r)}:TP().includes(t)?function(...e){return t.apply(jm(this),e),rs(JI.get(this))}:function(...e){return rs(t.apply(jm(this),e))}}function RP(t){return typeof t=="function"?bP(t):(t instanceof IDBTransaction&&kP(t),SP(t,CP())?new Proxy(t,xy):t)}function rs(t){if(t instanceof IDBRequest)return IP(t);if(Vm.has(t))return Vm.get(t);const e=RP(t);return e!==t&&(Vm.set(t,e),$v.set(e,t)),e}const jm=t=>$v.get(t);function NP(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=rs(o);return r&&o.addEventListener("upgradeneeded",l=>{r(rs(o.result),l.oldVersion,l.newVersion,rs(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const AP=["get","getKey","getAll","getAllKeys","count"],OP=["put","add","delete","clear"],zm=new Map;function vE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(zm.get(e))return zm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=OP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||AP.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return zm.set(e,s),s}xP(t=>({...t,get:(e,n,r)=>vE(e,n)||t.get(e,n,r),has:(e,n)=>!!vE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(DP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function DP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const by="@firebase/app",_E="0.9.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=new tp("@firebase/app"),MP="@firebase/app-compat",LP="@firebase/analytics-compat",FP="@firebase/analytics",UP="@firebase/app-check-compat",$P="@firebase/app-check",VP="@firebase/auth",jP="@firebase/auth-compat",zP="@firebase/database",BP="@firebase/database-compat",WP="@firebase/functions",qP="@firebase/functions-compat",HP="@firebase/installations",KP="@firebase/installations-compat",GP="@firebase/messaging",QP="@firebase/messaging-compat",YP="@firebase/performance",ZP="@firebase/performance-compat",XP="@firebase/remote-config",JP="@firebase/remote-config-compat",eD="@firebase/storage",tD="@firebase/storage-compat",nD="@firebase/firestore",rD="@firebase/firestore-compat",iD="firebase",sD="9.23.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry="[DEFAULT]",oD={[by]:"fire-core",[MP]:"fire-core-compat",[FP]:"fire-analytics",[LP]:"fire-analytics-compat",[$P]:"fire-app-check",[UP]:"fire-app-check-compat",[VP]:"fire-auth",[jP]:"fire-auth-compat",[zP]:"fire-rtdb",[BP]:"fire-rtdb-compat",[WP]:"fire-fn",[qP]:"fire-fn-compat",[HP]:"fire-iid",[KP]:"fire-iid-compat",[GP]:"fire-fcm",[QP]:"fire-fcm-compat",[YP]:"fire-perf",[ZP]:"fire-perf-compat",[XP]:"fire-rc",[JP]:"fire-rc-compat",[eD]:"fire-gcs",[tD]:"fire-gcs-compat",[nD]:"fire-fst",[rD]:"fire-fst-compat","fire-js":"fire-js",[iD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud=new Map,Ny=new Map;function aD(t,e){try{t.container.addComponent(e)}catch(n){ro.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function cs(t){const e=t.name;if(Ny.has(e))return ro.debug(`There were multiple attempts to register component ${e}.`),!1;Ny.set(e,t);for(const n of Ud.values())aD(n,t);return!0}function np(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},is=new vc("app","Firebase",lD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new mi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw is.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss=sD;function tk(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ry,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw is.create("bad-app-name",{appName:String(i)});if(n||(n=KI()),!n)throw is.create("no-options");const s=Ud.get(i);if(s){if(Fd(n,s.options)&&Fd(r,s.config))return s;throw is.create("duplicate-app",{appName:i})}const o=new yP(i);for(const l of Ny.values())o.addComponent(l);const a=new uD(n,r,o);return Ud.set(i,a),a}function Vv(t=Ry){const e=Ud.get(t);if(!e&&t===Ry&&KI())return tk();if(!e)throw is.create("no-app",{appName:t});return e}function Yn(t,e,n){var r;let i=(r=oD[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ro.warn(a.join(" "));return}cs(new mi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD="firebase-heartbeat-database",hD=1,Ou="firebase-heartbeat-store";let Bm=null;function nk(){return Bm||(Bm=NP(cD,hD,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ou)}}}).catch(t=>{throw is.create("idb-open",{originalErrorMessage:t.message})})),Bm}async function dD(t){try{return await(await nk()).transaction(Ou).objectStore(Ou).get(rk(t))}catch(e){if(e instanceof Wr)ro.warn(e.message);else{const n=is.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ro.warn(n.message)}}}async function wE(t,e){try{const r=(await nk()).transaction(Ou,"readwrite");await r.objectStore(Ou).put(e,rk(t)),await r.done}catch(n){if(n instanceof Wr)ro.warn(n.message);else{const r=is.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ro.warn(r.message)}}}function rk(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD=1024,pD=30*24*60*60*1e3;class mD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new yD(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=EE();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=pD}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=EE(),{heartbeatsToSend:n,unsentEntries:r}=gD(this._heartbeatsCache.heartbeats),i=Dd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function EE(){return new Date().toISOString().substring(0,10)}function gD(t,e=fD){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),SE(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),SE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class yD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tP()?nP().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await dD(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return wE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return wE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function SE(t){return Dd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(t){cs(new mi("platform-logger",e=>new PP(e),"PRIVATE")),cs(new mi("heartbeat",e=>new mD(e),"PRIVATE")),Yn(by,_E,t),Yn(by,_E,"esm2017"),Yn("fire-js","")}vD("");var _D=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},V,jv=jv||{},ae=_D||self;function rp(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function _c(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function wD(t){return Object.prototype.hasOwnProperty.call(t,Wm)&&t[Wm]||(t[Wm]=++ED)}var Wm="closure_uid_"+(1e9*Math.random()>>>0),ED=0;function SD(t,e,n){return t.call.apply(t.bind,arguments)}function CD(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function rn(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?rn=SD:rn=CD,rn.apply(null,arguments)}function vh(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Dt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Cs(){this.s=this.s,this.o=this.o}var TD=0;Cs.prototype.s=!1;Cs.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),TD!=0)&&wD(this)};Cs.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ik=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function zv(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function CE(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(rp(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function sn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}sn.prototype.h=function(){this.defaultPrevented=!0};var ID=function(){if(!ae.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ae.addEventListener("test",()=>{},e),ae.removeEventListener("test",()=>{},e)}catch{}return t}();function Pu(t){return/^[\s\xa0]*$/.test(t)}function ip(){var t=ae.navigator;return t&&(t=t.userAgent)?t:""}function br(t){return ip().indexOf(t)!=-1}function Bv(t){return Bv[" "](t),t}Bv[" "]=function(){};function kD(t,e){var n=v3;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var xD=br("Opera"),Ia=br("Trident")||br("MSIE"),sk=br("Edge"),Ay=sk||Ia,ok=br("Gecko")&&!(ip().toLowerCase().indexOf("webkit")!=-1&&!br("Edge"))&&!(br("Trident")||br("MSIE"))&&!br("Edge"),bD=ip().toLowerCase().indexOf("webkit")!=-1&&!br("Edge");function ak(){var t=ae.document;return t?t.documentMode:void 0}var Oy;e:{var qm="",Hm=function(){var t=ip();if(ok)return/rv:([^\);]+)(\)|;)/.exec(t);if(sk)return/Edge\/([\d\.]+)/.exec(t);if(Ia)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(bD)return/WebKit\/(\S+)/.exec(t);if(xD)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Hm&&(qm=Hm?Hm[1]:""),Ia){var Km=ak();if(Km!=null&&Km>parseFloat(qm)){Oy=String(Km);break e}}Oy=qm}var Py;if(ae.document&&Ia){var TE=ak();Py=TE||parseInt(Oy,10)||void 0}else Py=void 0;var RD=Py;function Du(t,e){if(sn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(ok){e:{try{Bv(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:ND[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Du.$.h.call(this)}}Dt(Du,sn);var ND={2:"touch",3:"pen",4:"mouse"};Du.prototype.h=function(){Du.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var wc="closure_listenable_"+(1e6*Math.random()|0),AD=0;function OD(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++AD,this.fa=this.ia=!1}function sp(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Wv(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function PD(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function lk(t){const e={};for(const n in t)e[n]=t[n];return e}const IE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function uk(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<IE.length;s++)n=IE[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function op(t){this.src=t,this.g={},this.h=0}op.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=My(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new OD(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function Dy(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=ik(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(sp(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function My(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var qv="closure_lm_"+(1e6*Math.random()|0),Gm={};function ck(t,e,n,r,i){if(r&&r.once)return dk(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)ck(t,e[s],n,r,i);return null}return n=Gv(n),t&&t[wc]?t.O(e,n,_c(r)?!!r.capture:!!r,i):hk(t,e,n,!1,r,i)}function hk(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=_c(i)?!!i.capture:!!i,a=Kv(t);if(a||(t[qv]=a=new op(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=DD(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ID||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(pk(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function DD(){function t(n){return e.call(t.src,t.listener,n)}const e=MD;return t}function dk(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)dk(t,e[s],n,r,i);return null}return n=Gv(n),t&&t[wc]?t.P(e,n,_c(r)?!!r.capture:!!r,i):hk(t,e,n,!0,r,i)}function fk(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)fk(t,e[s],n,r,i);else r=_c(r)?!!r.capture:!!r,n=Gv(n),t&&t[wc]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=My(s,n,r,i),-1<n&&(sp(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=Kv(t))&&(e=t.g[e.toString()],t=-1,e&&(t=My(e,n,r,i)),(n=-1<t?e[t]:null)&&Hv(n))}function Hv(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[wc])Dy(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(pk(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Kv(e))?(Dy(n,t),n.h==0&&(n.src=null,e[qv]=null)):sp(t)}}}function pk(t){return t in Gm?Gm[t]:Gm[t]="on"+t}function MD(t,e){if(t.fa)t=!0;else{e=new Du(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Hv(t),t=n.call(r,e)}return t}function Kv(t){return t=t[qv],t instanceof op?t:null}var Qm="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gv(t){return typeof t=="function"?t:(t[Qm]||(t[Qm]=function(e){return t.handleEvent(e)}),t[Qm])}function Pt(){Cs.call(this),this.i=new op(this),this.S=this,this.J=null}Dt(Pt,Cs);Pt.prototype[wc]=!0;Pt.prototype.removeEventListener=function(t,e,n,r){fk(this,t,e,n,r)};function Wt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new sn(e,t);else if(e instanceof sn)e.target=e.target||t;else{var i=e;e=new sn(r,t),uk(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=_h(o,r,!0,e)&&i}if(o=e.g=t,i=_h(o,r,!0,e)&&i,i=_h(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=_h(o,r,!1,e)&&i}Pt.prototype.N=function(){if(Pt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)sp(n[r]);delete t.g[e],t.h--}}this.J=null};Pt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Pt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function _h(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Dy(t.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var Qv=ae.JSON.stringify;class LD{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function FD(){var t=Yv;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class UD{constructor(){this.h=this.g=null}add(e,n){const r=mk.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var mk=new LD(()=>new $D,t=>t.reset());class $D{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function VD(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function jD(t){ae.setTimeout(()=>{throw t},0)}let Mu,Lu=!1,Yv=new UD,gk=()=>{const t=ae.Promise.resolve(void 0);Mu=()=>{t.then(zD)}};var zD=()=>{for(var t;t=FD();){try{t.h.call(t.g)}catch(n){jD(n)}var e=mk;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Lu=!1};function ap(t,e){Pt.call(this),this.h=t||1,this.g=e||ae,this.j=rn(this.qb,this),this.l=Date.now()}Dt(ap,Pt);V=ap.prototype;V.ga=!1;V.T=null;V.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Wt(this,"tick"),this.ga&&(Zv(this),this.start()))}};V.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Zv(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}V.N=function(){ap.$.N.call(this),Zv(this),delete this.g};function Xv(t,e,n){if(typeof t=="function")n&&(t=rn(t,n));else if(t&&typeof t.handleEvent=="function")t=rn(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:ae.setTimeout(t,e||0)}function yk(t){t.g=Xv(()=>{t.g=null,t.i&&(t.i=!1,yk(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class BD extends Cs{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:yk(this)}N(){super.N(),this.g&&(ae.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fu(t){Cs.call(this),this.h=t,this.g={}}Dt(Fu,Cs);var kE=[];function vk(t,e,n,r){Array.isArray(n)||(n&&(kE[0]=n.toString()),n=kE);for(var i=0;i<n.length;i++){var s=ck(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function _k(t){Wv(t.g,function(e,n){this.g.hasOwnProperty(n)&&Hv(e)},t),t.g={}}Fu.prototype.N=function(){Fu.$.N.call(this),_k(this)};Fu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function lp(){this.g=!0}lp.prototype.Ea=function(){this.g=!1};function WD(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&h[1]=="type"?o+(c+"="+u+"&"):o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function qD(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function Qo(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+KD(t,n)+(r?" "+r:"")})}function HD(t,e){t.info(function(){return"TIMEOUT: "+e})}lp.prototype.info=function(){};function KD(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Qv(n)}catch{return e}}var Eo={},xE=null;function up(){return xE=xE||new Pt}Eo.Ta="serverreachability";function wk(t){sn.call(this,Eo.Ta,t)}Dt(wk,sn);function Uu(t){const e=up();Wt(e,new wk(e))}Eo.STAT_EVENT="statevent";function Ek(t,e){sn.call(this,Eo.STAT_EVENT,t),this.stat=e}Dt(Ek,sn);function gn(t){const e=up();Wt(e,new Ek(e,t))}Eo.Ua="timingevent";function Sk(t,e){sn.call(this,Eo.Ua,t),this.size=e}Dt(Sk,sn);function Ec(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return ae.setTimeout(function(){t()},e)}var cp={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Ck={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Jv(){}Jv.prototype.h=null;function bE(t){return t.h||(t.h=t.i())}function Tk(){}var Sc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function e1(){sn.call(this,"d")}Dt(e1,sn);function t1(){sn.call(this,"c")}Dt(t1,sn);var Ly;function hp(){}Dt(hp,Jv);hp.prototype.g=function(){return new XMLHttpRequest};hp.prototype.i=function(){return{}};Ly=new hp;function Cc(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Fu(this),this.P=GD,t=Ay?125:void 0,this.V=new ap(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Ik}function Ik(){this.i=null,this.g="",this.h=!1}var GD=45e3,Fy={},$d={};V=Cc.prototype;V.setTimeout=function(t){this.P=t};function Uy(t,e,n){t.L=1,t.v=fp(gi(e)),t.s=n,t.S=!0,kk(t,null)}function kk(t,e){t.G=Date.now(),Tc(t),t.A=gi(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),Dk(n.i,"t",r),t.C=0,n=t.l.J,t.h=new Ik,t.g=tx(t.l,n?e:null,!t.s),0<t.O&&(t.M=new BD(rn(t.Pa,t,t.g),t.O)),vk(t.U,t.g,"readystatechange",t.nb),e=t.I?lk(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Uu(),WD(t.j,t.u,t.A,t.m,t.W,t.s)}V.nb=function(t){t=t.target;const e=this.M;e&&Rr(t)==3?e.l():this.Pa(t)};V.Pa=function(t){try{if(t==this.g)e:{const c=Rr(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>c)&&(c!=3||Ay||this.g&&(this.h.h||this.g.ja()||OE(this.g)))){this.J||c!=4||e==7||(e==8||0>=h?Uu(3):Uu(2)),dp(this);var n=this.g.da();this.ca=n;t:if(xk(this)){var r=OE(this.g);t="";var i=r.length,s=Rr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$s(this),eu(this);var o="";break t}this.h.i=new ae.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,qD(this.j,this.u,this.A,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Pu(a)){var u=a;break t}}u=null}if(n=u)Qo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$y(this,n);else{this.i=!1,this.o=3,gn(12),$s(this),eu(this);break e}}this.S?(bk(this,c,o),Ay&&this.i&&c==3&&(vk(this.U,this.V,"tick",this.mb),this.V.start())):(Qo(this.j,this.m,o,null),$y(this,o)),c==4&&$s(this),this.i&&!this.J&&(c==4?Zk(this.l,this):(this.i=!1,Tc(this)))}else m3(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,gn(12)):(this.o=0,gn(13)),$s(this),eu(this)}}}catch{}finally{}};function xk(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function bk(t,e,n){let r=!0,i;for(;!t.J&&t.C<n.length;)if(i=QD(t,n),i==$d){e==4&&(t.o=4,gn(14),r=!1),Qo(t.j,t.m,null,"[Incomplete Response]");break}else if(i==Fy){t.o=4,gn(15),Qo(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Qo(t.j,t.m,i,null),$y(t,i);xk(t)&&i!=$d&&i!=Fy&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,gn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),a1(e),e.M=!0,gn(11))):(Qo(t.j,t.m,n,"[Invalid Chunked Response]"),$s(t),eu(t))}V.mb=function(){if(this.g){var t=Rr(this.g),e=this.g.ja();this.C<e.length&&(dp(this),bk(this,t,e),this.i&&t!=4&&Tc(this))}};function QD(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?$d:(n=Number(e.substring(n,r)),isNaN(n)?Fy:(r+=1,r+n>e.length?$d:(e=e.slice(r,r+n),t.C=r+n,e)))}V.cancel=function(){this.J=!0,$s(this)};function Tc(t){t.Y=Date.now()+t.P,Rk(t,t.P)}function Rk(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Ec(rn(t.lb,t),e)}function dp(t){t.B&&(ae.clearTimeout(t.B),t.B=null)}V.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(HD(this.j,this.A),this.L!=2&&(Uu(),gn(17)),$s(this),this.o=2,eu(this)):Rk(this,this.Y-t)};function eu(t){t.l.H==0||t.J||Zk(t.l,t)}function $s(t){dp(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Zv(t.V),_k(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function $y(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Vy(n.i,t))){if(!t.K&&Vy(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)zd(n),gp(n);else break e;o1(n),gn(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Ec(rn(n.ib,n),6e3));if(1>=Fk(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Vs(n,11)}else if((t.K||n.g==t)&&zd(n),!Pu(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];const c=u[3];c!=null&&(n.ra=c,n.l.info("VER="+n.ra));const h=u[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const d=u[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const p=t.g;if(p){const g=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var s=r.i;s.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(n1(s,s.h),s.h=null))}if(r.F){const _=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;_&&(r.Da=_,qe(r.I,r.F,_))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=ex(r,r.J?r.pa:null,r.Y),o.K){Uk(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(dp(a),Tc(a)),r.g=o}else Qk(r);0<n.j.length&&yp(n)}else u[0]!="stop"&&u[0]!="close"||Vs(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?Vs(n,7):s1(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}Uu(4)}catch{}}function YD(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(rp(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function ZD(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(rp(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function Nk(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(rp(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=ZD(t),r=YD(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var Ak=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function XD(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Hs(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Hs){this.h=t.h,Vd(this,t.j),this.s=t.s,this.g=t.g,jd(this,t.m),this.l=t.l;var e=t.i,n=new $u;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),RE(this,n),this.o=t.o}else t&&(e=String(t).match(Ak))?(this.h=!1,Vd(this,e[1]||"",!0),this.s=$l(e[2]||""),this.g=$l(e[3]||"",!0),jd(this,e[4]),this.l=$l(e[5]||"",!0),RE(this,e[6]||"",!0),this.o=$l(e[7]||"")):(this.h=!1,this.i=new $u(null,this.h))}Hs.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Vl(e,NE,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Vl(e,NE,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Vl(n,n.charAt(0)=="/"?t3:e3,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Vl(n,r3)),t.join("")};function gi(t){return new Hs(t)}function Vd(t,e,n){t.j=n?$l(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function jd(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function RE(t,e,n){e instanceof $u?(t.i=e,i3(t.i,t.h)):(n||(e=Vl(e,n3)),t.i=new $u(e,t.h))}function qe(t,e,n){t.i.set(e,n)}function fp(t){return qe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function $l(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Vl(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,JD),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function JD(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var NE=/[#\/\?@]/g,e3=/[#\?:]/g,t3=/[#\?]/g,n3=/[#\?@]/g,r3=/#/g;function $u(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ts(t){t.g||(t.g=new Map,t.h=0,t.i&&XD(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}V=$u.prototype;V.add=function(t,e){Ts(this),this.i=null,t=Qa(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Ok(t,e){Ts(t),e=Qa(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Pk(t,e){return Ts(t),e=Qa(t,e),t.g.has(e)}V.forEach=function(t,e){Ts(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};V.ta=function(){Ts(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};V.Z=function(t){Ts(this);let e=[];if(typeof t=="string")Pk(this,t)&&(e=e.concat(this.g.get(Qa(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};V.set=function(t,e){return Ts(this),this.i=null,t=Qa(this,t),Pk(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};V.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function Dk(t,e,n){Ok(t,e),0<n.length&&(t.i=null,t.g.set(Qa(t,e),zv(n)),t.h+=n.length)}V.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function Qa(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function i3(t,e){e&&!t.j&&(Ts(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(Ok(this,r),Dk(this,i,n))},t)),t.j=e}var s3=class{constructor(t,e){this.g=t,this.map=e}};function Mk(t){this.l=t||o3,ae.PerformanceNavigationTiming?(t=ae.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(ae.g&&ae.g.Ka&&ae.g.Ka()&&ae.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var o3=10;function Lk(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Fk(t){return t.h?1:t.g?t.g.size:0}function Vy(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function n1(t,e){t.g?t.g.add(e):t.h=e}function Uk(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Mk.prototype.cancel=function(){if(this.i=$k(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function $k(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return zv(t.i)}var a3=class{stringify(t){return ae.JSON.stringify(t,void 0)}parse(t){return ae.JSON.parse(t,void 0)}};function l3(){this.g=new a3}function u3(t,e,n){const r=n||"";try{Nk(t,function(i,s){let o=i;_c(i)&&(o=Qv(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function c3(t,e){const n=new lp;if(ae.Image){const r=new Image;r.onload=vh(wh,n,r,"TestLoadImage: loaded",!0,e),r.onerror=vh(wh,n,r,"TestLoadImage: error",!1,e),r.onabort=vh(wh,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=vh(wh,n,r,"TestLoadImage: timeout",!1,e),ae.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function wh(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Ic(t){this.l=t.fc||null,this.j=t.ob||!1}Dt(Ic,Jv);Ic.prototype.g=function(){return new pp(this.l,this.j)};Ic.prototype.i=function(t){return function(){return t}}({});function pp(t,e){Pt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=r1,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Dt(pp,Pt);var r1=0;V=pp.prototype;V.open=function(t,e){if(this.readyState!=r1)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Vu(this)};V.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||ae).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};V.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,kc(this)),this.readyState=r1};V.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Vu(this)),this.g&&(this.readyState=3,Vu(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ae.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Vk(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function Vk(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}V.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?kc(this):Vu(this),this.readyState==3&&Vk(this)}};V.Za=function(t){this.g&&(this.response=this.responseText=t,kc(this))};V.Ya=function(t){this.g&&(this.response=t,kc(this))};V.ka=function(){this.g&&kc(this)};function kc(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Vu(t)}V.setRequestHeader=function(t,e){this.v.append(t,e)};V.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};V.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Vu(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(pp.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var h3=ae.JSON.parse;function ct(t){Pt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=jk,this.L=this.M=!1}Dt(ct,Pt);var jk="",d3=/^https?$/i,f3=["POST","PUT"];V=ct.prototype;V.Oa=function(t){this.M=t};V.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ly.g(),this.C=this.u?bE(this.u):bE(Ly),this.g.onreadystatechange=rn(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){AE(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=ae.FormData&&t instanceof ae.FormData,!(0<=ik(f3,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Wk(this),0<this.B&&((this.L=p3(this.g))?(this.g.timeout=this.B,this.g.ontimeout=rn(this.ua,this)):this.A=Xv(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){AE(this,s)}};function p3(t){return Ia&&typeof t.timeout=="number"&&t.ontimeout!==void 0}V.ua=function(){typeof jv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Wt(this,"timeout"),this.abort(8))};function AE(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,zk(t),mp(t)}function zk(t){t.F||(t.F=!0,Wt(t,"complete"),Wt(t,"error"))}V.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Wt(this,"complete"),Wt(this,"abort"),mp(this))};V.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),mp(this,!0)),ct.$.N.call(this)};V.La=function(){this.s||(this.G||this.v||this.l?Bk(this):this.kb())};V.kb=function(){Bk(this)};function Bk(t){if(t.h&&typeof jv<"u"&&(!t.C[1]||Rr(t)!=4||t.da()!=2)){if(t.v&&Rr(t)==4)Xv(t.La,0,t);else if(Wt(t,"readystatechange"),Rr(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(Ak)[1]||null;!i&&ae.self&&ae.self.location&&(i=ae.self.location.protocol.slice(0,-1)),r=!d3.test(i?i.toLowerCase():"")}n=r}if(n)Wt(t,"complete"),Wt(t,"success");else{t.m=6;try{var s=2<Rr(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",zk(t)}}finally{mp(t)}}}}function mp(t,e){if(t.g){Wk(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Wt(t,"ready");try{n.onreadystatechange=r}catch{}}}function Wk(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(ae.clearTimeout(t.A),t.A=null)}V.isActive=function(){return!!this.g};function Rr(t){return t.g?t.g.readyState:0}V.da=function(){try{return 2<Rr(this)?this.g.status:-1}catch{return-1}};V.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};V.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),h3(e)}};function OE(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case jk:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function m3(t){const e={};t=(t.g&&2<=Rr(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Pu(t[r]))continue;var n=VD(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}PD(e,function(r){return r.join(", ")})}V.Ia=function(){return this.m};V.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function qk(t){let e="";return Wv(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function i1(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=qk(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):qe(t,e,n))}function Tl(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Hk(t){this.Ga=0,this.j=[],this.l=new lp,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Tl("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Tl("baseRetryDelayMs",5e3,t),this.hb=Tl("retryDelaySeedMs",1e4,t),this.eb=Tl("forwardChannelMaxRetries",2,t),this.xa=Tl("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new Mk(t&&t.concurrentRequestLimit),this.Ja=new l3,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}V=Hk.prototype;V.ra=8;V.H=1;function s1(t){if(Kk(t),t.H==3){var e=t.W++,n=gi(t.I);if(qe(n,"SID",t.K),qe(n,"RID",e),qe(n,"TYPE","terminate"),xc(t,n),e=new Cc(t,t.l,e),e.L=2,e.v=fp(gi(n)),n=!1,ae.navigator&&ae.navigator.sendBeacon)try{n=ae.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&ae.Image&&(new Image().src=e.v,n=!0),n||(e.g=tx(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Tc(e)}Jk(t)}function gp(t){t.g&&(a1(t),t.g.cancel(),t.g=null)}function Kk(t){gp(t),t.u&&(ae.clearTimeout(t.u),t.u=null),zd(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&ae.clearTimeout(t.m),t.m=null)}function yp(t){if(!Lk(t.i)&&!t.m){t.m=!0;var e=t.Na;Mu||gk(),Lu||(Mu(),Lu=!0),Yv.add(e,t),t.C=0}}function g3(t,e){return Fk(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Ec(rn(t.Na,t,e),Xk(t,t.C)),t.C++,!0)}V.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Cc(this,this.l,t);let s=this.s;if(this.U&&(s?(s=lk(s),uk(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Gk(this,i,e),n=gi(this.I),qe(n,"RID",t),qe(n,"CVER",22),this.F&&qe(n,"X-HTTP-Session-Id",this.F),xc(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(qk(s)))+"&"+e:this.o&&i1(n,this.o,s)),n1(this.i,i),this.bb&&qe(n,"TYPE","init"),this.P?(qe(n,"$req",e),qe(n,"SID","null"),i.aa=!0,Uy(i,n,null)):Uy(i,n,e),this.H=2}}else this.H==3&&(t?PE(this,t):this.j.length==0||Lk(this.i)||PE(this))};function PE(t,e){var n;e?n=e.m:n=t.W++;const r=gi(t.I);qe(r,"SID",t.K),qe(r,"RID",n),qe(r,"AID",t.V),xc(t,r),t.o&&t.s&&i1(r,t.o,t.s),n=new Cc(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Gk(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),n1(t.i,n),Uy(n,r,e)}function xc(t,e){t.na&&Wv(t.na,function(n,r){qe(e,r,n)}),t.h&&Nk({},function(n,r){qe(e,r,n)})}function Gk(t,e,n){n=Math.min(t.j.length,n);var r=t.h?rn(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let u=i[l].g;const c=i[l].map;if(u-=s,0>u)s=Math.max(0,i[l].g-100),a=!1;else try{u3(c,o,"req"+u+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function Qk(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Mu||gk(),Lu||(Mu(),Lu=!0),Yv.add(e,t),t.A=0}}function o1(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Ec(rn(t.Ma,t),Xk(t,t.A)),t.A++,!0)}V.Ma=function(){if(this.u=null,Yk(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Ec(rn(this.jb,this),t)}};V.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,gn(10),gp(this),Yk(this))};function a1(t){t.B!=null&&(ae.clearTimeout(t.B),t.B=null)}function Yk(t){t.g=new Cc(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=gi(t.wa);qe(e,"RID","rpc"),qe(e,"SID",t.K),qe(e,"AID",t.V),qe(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&qe(e,"TO",t.qa),qe(e,"TYPE","xmlhttp"),xc(t,e),t.o&&t.s&&i1(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=fp(gi(e)),n.s=null,n.S=!0,kk(n,t)}V.ib=function(){this.v!=null&&(this.v=null,gp(this),o1(this),gn(19))};function zd(t){t.v!=null&&(ae.clearTimeout(t.v),t.v=null)}function Zk(t,e){var n=null;if(t.g==e){zd(t),a1(t),t.g=null;var r=2}else if(Vy(t.i,e))n=e.F,Uk(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;r=up(),Wt(r,new Sk(r,n)),yp(t)}else Qk(t);else if(i=e.o,i==3||i==0&&0<e.ca||!(r==1&&g3(t,e)||r==2&&o1(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Vs(t,5);break;case 4:Vs(t,10);break;case 3:Vs(t,6);break;default:Vs(t,2)}}}function Xk(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Vs(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=rn(t.pb,t);n||(n=new Hs("//www.google.com/images/cleardot.gif"),ae.location&&ae.location.protocol=="http"||Vd(n,"https"),fp(n)),c3(n.toString(),r)}else gn(2);t.H=0,t.h&&t.h.za(e),Jk(t),Kk(t)}V.pb=function(t){t?(this.l.info("Successfully pinged google.com"),gn(2)):(this.l.info("Failed to ping google.com"),gn(1))};function Jk(t){if(t.H=0,t.ma=[],t.h){const e=$k(t.i);(e.length!=0||t.j.length!=0)&&(CE(t.ma,e),CE(t.ma,t.j),t.i.i.length=0,zv(t.j),t.j.length=0),t.h.ya()}}function ex(t,e,n){var r=n instanceof Hs?gi(n):new Hs(n);if(r.g!="")e&&(r.g=e+"."+r.g),jd(r,r.m);else{var i=ae.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Hs(null);r&&Vd(s,r),e&&(s.g=e),i&&jd(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&qe(r,n,e),qe(r,"VER",t.ra),xc(t,r),r}function tx(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new ct(new Ic({ob:!0})):new ct(t.va),e.Oa(t.J),e}V.isActive=function(){return!!this.h&&this.h.isActive(this)};function nx(){}V=nx.prototype;V.Ba=function(){};V.Aa=function(){};V.za=function(){};V.ya=function(){};V.isActive=function(){return!0};V.Va=function(){};function Bd(){if(Ia&&!(10<=Number(RD)))throw Error("Environmental error: no available transport.")}Bd.prototype.g=function(t,e){return new $n(t,e)};function $n(t,e){Pt.call(this),this.g=new Hk(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Pu(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Pu(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Ya(this)}Dt($n,Pt);$n.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;gn(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=ex(t,null,t.Y),yp(t)};$n.prototype.close=function(){s1(this.g)};$n.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Qv(t),t=n);e.j.push(new s3(e.fb++,t)),e.H==3&&yp(e)};$n.prototype.N=function(){this.g.h=null,delete this.j,s1(this.g),delete this.g,$n.$.N.call(this)};function rx(t){e1.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Dt(rx,e1);function ix(){t1.call(this),this.status=1}Dt(ix,t1);function Ya(t){this.g=t}Dt(Ya,nx);Ya.prototype.Ba=function(){Wt(this.g,"a")};Ya.prototype.Aa=function(t){Wt(this.g,new rx(t))};Ya.prototype.za=function(t){Wt(this.g,new ix)};Ya.prototype.ya=function(){Wt(this.g,"b")};function y3(){this.blockSize=-1}function wr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Dt(wr,y3);wr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Ym(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}wr.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)Ym(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){Ym(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){Ym(this,r),i=0;break}}this.h=i,this.i+=e};wr.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Pe(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var v3={};function l1(t){return-128<=t&&128>t?kD(t,function(e){return new Pe([e|0],0>e?-1:0)}):new Pe([t|0],0>t?-1:0)}function Nr(t){if(isNaN(t)||!isFinite(t))return oa;if(0>t)return jt(Nr(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=jy;return new Pe(e,0)}function sx(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return jt(sx(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Nr(Math.pow(e,8)),r=oa,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Nr(Math.pow(e,s)),r=r.R(s).add(Nr(o))):(r=r.R(n),r=r.add(Nr(o)))}return r}var jy=4294967296,oa=l1(0),zy=l1(1),DE=l1(16777216);V=Pe.prototype;V.ea=function(){if(Hn(this))return-jt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:jy+r)*e,e*=jy}return t};V.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(ni(this))return"0";if(Hn(this))return"-"+jt(this).toString(t);for(var e=Nr(Math.pow(t,6)),n=this,r="";;){var i=qd(n,e).g;n=Wd(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,ni(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};V.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function ni(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Hn(t){return t.h==-1}V.X=function(t){return t=Wd(this,t),Hn(t)?-1:ni(t)?0:1};function jt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Pe(n,~t.h).add(zy)}V.abs=function(){return Hn(this)?jt(this):this};V.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Pe(n,n[n.length-1]&-2147483648?-1:0)};function Wd(t,e){return t.add(jt(e))}V.R=function(t){if(ni(this)||ni(t))return oa;if(Hn(this))return Hn(t)?jt(this).R(jt(t)):jt(jt(this).R(t));if(Hn(t))return jt(this.R(jt(t)));if(0>this.X(DE)&&0>t.X(DE))return Nr(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,l=t.D(i)&65535;n[2*r+2*i]+=o*l,Eh(n,2*r+2*i),n[2*r+2*i+1]+=s*l,Eh(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Eh(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Eh(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Pe(n,0)};function Eh(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Il(t,e){this.g=t,this.h=e}function qd(t,e){if(ni(e))throw Error("division by zero");if(ni(t))return new Il(oa,oa);if(Hn(t))return e=qd(jt(t),e),new Il(jt(e.g),jt(e.h));if(Hn(e))return e=qd(t,jt(e)),new Il(jt(e.g),e.h);if(30<t.g.length){if(Hn(t)||Hn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=zy,r=e;0>=r.X(t);)n=ME(n),r=ME(r);var i=Ao(n,1),s=Ao(r,1);for(r=Ao(r,2),n=Ao(n,2);!ni(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Ao(r,1),n=Ao(n,1)}return e=Wd(t,i.R(e)),new Il(i,e)}for(i=oa;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=Nr(n),o=s.R(e);Hn(o)||0<o.X(t);)n-=r,s=Nr(n),o=s.R(e);ni(s)&&(s=zy),i=i.add(s),t=Wd(t,o)}return new Il(i,t)}V.gb=function(t){return qd(this,t).h};V.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Pe(n,this.h&t.h)};V.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Pe(n,this.h|t.h)};V.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Pe(n,this.h^t.h)};function ME(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Pe(n,t.h)}function Ao(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Pe(i,t.h)}Bd.prototype.createWebChannel=Bd.prototype.g;$n.prototype.send=$n.prototype.u;$n.prototype.open=$n.prototype.m;$n.prototype.close=$n.prototype.close;cp.NO_ERROR=0;cp.TIMEOUT=8;cp.HTTP_ERROR=6;Ck.COMPLETE="complete";Tk.EventType=Sc;Sc.OPEN="a";Sc.CLOSE="b";Sc.ERROR="c";Sc.MESSAGE="d";Pt.prototype.listen=Pt.prototype.O;ct.prototype.listenOnce=ct.prototype.P;ct.prototype.getLastError=ct.prototype.Sa;ct.prototype.getLastErrorCode=ct.prototype.Ia;ct.prototype.getStatus=ct.prototype.da;ct.prototype.getResponseJson=ct.prototype.Wa;ct.prototype.getResponseText=ct.prototype.ja;ct.prototype.send=ct.prototype.ha;ct.prototype.setWithCredentials=ct.prototype.Oa;wr.prototype.digest=wr.prototype.l;wr.prototype.reset=wr.prototype.reset;wr.prototype.update=wr.prototype.j;Pe.prototype.add=Pe.prototype.add;Pe.prototype.multiply=Pe.prototype.R;Pe.prototype.modulo=Pe.prototype.gb;Pe.prototype.compare=Pe.prototype.X;Pe.prototype.toNumber=Pe.prototype.ea;Pe.prototype.toString=Pe.prototype.toString;Pe.prototype.getBits=Pe.prototype.D;Pe.fromNumber=Nr;Pe.fromString=sx;var _3=function(){return new Bd},w3=function(){return up()},Zm=cp,E3=Ck,S3=Eo,LE={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},C3=Ic,Sh=Tk,T3=ct,I3=wr,aa=Pe;const FE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yt.UNAUTHENTICATED=new Yt(null),Yt.GOOGLE_CREDENTIALS=new Yt("google-credentials-uid"),Yt.FIRST_PARTY=new Yt("first-party-uid"),Yt.MOCK_USER=new Yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Za="9.23.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io=new tp("@firebase/firestore");function UE(){return io.logLevel}function Z(t,...e){if(io.logLevel<=Te.DEBUG){const n=e.map(u1);io.debug(`Firestore (${Za}): ${t}`,...n)}}function yi(t,...e){if(io.logLevel<=Te.ERROR){const n=e.map(u1);io.error(`Firestore (${Za}): ${t}`,...n)}}function ka(t,...e){if(io.logLevel<=Te.WARN){const n=e.map(u1);io.warn(`Firestore (${Za}): ${t}`,...n)}}function u1(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(t="Unexpected state"){const e=`FIRESTORE (${Za}) INTERNAL ASSERTION FAILED: `+t;throw yi(e),new Error(e)}function Ke(t,e){t||oe()}function ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class F extends Wr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class k3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Yt.UNAUTHENTICATED))}shutdown(){}}class x3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}let b3=class{constructor(e){this.t=e,this.currentUser=Yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new ai;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ai,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ai)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ke(typeof r.accessToken=="string"),new ox(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string"),new Yt(e)}};class R3{constructor(e,n,r){this.h=e,this.l=n,this.m=r,this.type="FirstParty",this.user=Yt.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class N3{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new R3(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(Yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class A3{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class O3{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const r=s=>{s.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.T;return this.T=s.token,Z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?i(s):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ke(typeof n.token=="string"),this.T=n.token,new A3(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=P3(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function xe(t,e){return t<e?-1:t>e?1:0}function xa(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new F(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new F(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ze.fromMillis(Date.now())}static fromDate(e){return Ze.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ze(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.timestamp=e}static fromTimestamp(e){return new le(e)}static min(){return new le(new Ze(0,0))}static max(){return new le(new Ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,n,r){n===void 0?n=0:n>e.length&&oe(),r===void 0?r=e.length-n:r>e.length-n&&oe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ju.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ju?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ve extends ju{construct(e,n,r){return new Ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new F(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ve(n)}static emptyPath(){return new Ve([])}}const D3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends ju{construct(e,n,r){return new tn(e,n,r)}static isValidIdentifier(e){return D3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new tn(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new F(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new F(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new F(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new F(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tn(n)}static emptyPath(){return new tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.path=e}static fromPath(e){return new X(Ve.fromString(e))}static fromName(e){return new X(Ve.fromString(e).popFirst(5))}static empty(){return new X(Ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new X(new Ve(e.slice()))}}function M3(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=le.fromTimestamp(r===1e9?new Ze(n+1,0):new Ze(n,r));return new hs(i,X.empty(),e)}function L3(t){return new hs(t.readTime,t.key,-1)}class hs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new hs(le.min(),X.empty(),-1)}static max(){return new hs(le.max(),X.empty(),-1)}}function F3(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=X.comparator(t.documentKey,e.documentKey),n!==0?n:xe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bc(t){if(t.code!==R.FAILED_PRECONDITION||t.message!==U3)throw t;Z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new D((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof D?n:D.resolve(n)}catch(n){return D.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):D.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):D.reject(n)}static resolve(e){return new D((n,r)=>{n(e)})}static reject(e){return new D((n,r)=>{r(e)})}static waitFor(e){return new D((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=D.resolve(!1);for(const r of e)n=n.next(i=>i?D.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new D((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,n){return new D((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function Rc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ot(r),this.ut=r=>n.writeSequenceNumber(r))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}c1.ct=-1;function vp(t){return t==null}function Hd(t){return t===0&&1/t==-1/0}function V3(t){return typeof t=="number"&&Number.isInteger(t)&&!Hd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function So(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function lx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n){this.comparator=e,this.root=n||Vt.EMPTY}insert(e,n){return new ot(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Vt.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ch(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ch(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ch(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ch(this.root,e,this.comparator,!0)}}class Ch{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Vt.RED,this.left=i??Vt.EMPTY,this.right=s??Vt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Vt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Vt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Vt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw oe();const e=this.left.check();if(e!==this.right.check())throw oe();return e+(this.isRed()?0:1)}}Vt.EMPTY=null,Vt.RED=!0,Vt.BLACK=!1;Vt.EMPTY=new class{constructor(){this.size=0}get key(){throw oe()}get value(){throw oe()}get color(){throw oe()}get left(){throw oe()}get right(){throw oe()}copy(t,e,n,r,i){return this}insert(t,e,n){return new Vt(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new VE(this.data.getIterator())}getIteratorFrom(e){return new VE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof on)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new on(this.comparator);return n.data=e,n}}class VE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.fields=e,e.sort(tn.comparator)}static empty(){return new Pn([])}unionWith(e){let n=new on(tn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Pn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return xa(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new ux("Invalid base64 string: "+i):i}}(e);return new cn(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new cn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cn.EMPTY_BYTE_STRING=new cn("");const j3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ds(t){if(Ke(!!t),typeof t=="string"){let e=0;const n=j3.exec(t);if(Ke(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:vt(t.seconds),nanos:vt(t.nanos)}}function vt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function so(t){return typeof t=="string"?cn.fromBase64String(t):cn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function h1(t){const e=t.mapValue.fields.__previous_value__;return _p(e)?h1(e):e}function zu(t){const e=ds(t.mapValue.fields.__local_write_time__.timestampValue);return new Ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class Bu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Bu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Bu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function oo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_p(t)?4:B3(t)?9007199254740991:10:oe()}function jr(t,e){if(t===e)return!0;const n=oo(t);if(n!==oo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return zu(t).isEqual(zu(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=ds(r.timestampValue),o=ds(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return so(r.bytesValue).isEqual(so(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return vt(r.geoPointValue.latitude)===vt(i.geoPointValue.latitude)&&vt(r.geoPointValue.longitude)===vt(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return vt(r.integerValue)===vt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=vt(r.doubleValue),o=vt(i.doubleValue);return s===o?Hd(s)===Hd(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return xa(t.arrayValue.values||[],e.arrayValue.values||[],jr);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if($E(s)!==$E(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(o[a]===void 0||!jr(s[a],o[a])))return!1;return!0}(t,e);default:return oe()}}function Wu(t,e){return(t.values||[]).find(n=>jr(n,e))!==void 0}function ba(t,e){if(t===e)return 0;const n=oo(t),r=oo(e);if(n!==r)return xe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return xe(t.booleanValue,e.booleanValue);case 2:return function(i,s){const o=vt(i.integerValue||i.doubleValue),a=vt(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return jE(t.timestampValue,e.timestampValue);case 4:return jE(zu(t),zu(e));case 5:return xe(t.stringValue,e.stringValue);case 6:return function(i,s){const o=so(i),a=so(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let l=0;l<o.length&&l<a.length;l++){const u=xe(o[l],a[l]);if(u!==0)return u}return xe(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const o=xe(vt(i.latitude),vt(s.latitude));return o!==0?o:xe(vt(i.longitude),vt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let l=0;l<o.length&&l<a.length;++l){const u=ba(o[l],a[l]);if(u)return u}return xe(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Th.mapValue&&s===Th.mapValue)return 0;if(i===Th.mapValue)return 1;if(s===Th.mapValue)return-1;const o=i.fields||{},a=Object.keys(o),l=s.fields||{},u=Object.keys(l);a.sort(),u.sort();for(let c=0;c<a.length&&c<u.length;++c){const h=xe(a[c],u[c]);if(h!==0)return h;const d=ba(o[a[c]],l[u[c]]);if(d!==0)return d}return xe(a.length,u.length)}(t.mapValue,e.mapValue);default:throw oe()}}function jE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return xe(t,e);const n=ds(t),r=ds(e),i=xe(n.seconds,r.seconds);return i!==0?i:xe(n.nanos,r.nanos)}function Ra(t){return By(t)}function By(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=ds(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?so(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,X.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=By(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${By(r.fields[a])}`;return s+"}"}(t.mapValue):oe();var e,n}function Kd(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Wy(t){return!!t&&"integerValue"in t}function d1(t){return!!t&&"arrayValue"in t}function zE(t){return!!t&&"nullValue"in t}function BE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Qh(t){return!!t&&"mapValue"in t}function tu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return So(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=tu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=tu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function B3(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.value=e}static empty(){return new Cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Qh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=tu(n)}setAll(e){let n=tn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=tu(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Qh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return jr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Qh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){So(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Cn(tu(this.value))}}function cx(t){const e=[];return So(t.fields,(n,r)=>{const i=new tn([n]);if(Qh(r)){const s=cx(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Pn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Xt(e,0,le.min(),le.min(),le.min(),Cn.empty(),0)}static newFoundDocument(e,n,r,i){return new Xt(e,1,n,le.min(),r,i,0)}static newNoDocument(e,n){return new Xt(e,2,n,le.min(),le.min(),Cn.empty(),0)}static newUnknownDocument(e,n){return new Xt(e,3,n,le.min(),le.min(),Cn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,n){this.position=e,this.inclusive=n}}function WE(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=X.comparator(X.fromName(o.referenceValue),n.key):r=ba(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function qE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!jr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,n="asc"){this.field=e,this.dir=n}}function W3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{}class wt extends hx{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new H3(e,n,r):n==="array-contains"?new Q3(e,r):n==="in"?new Y3(e,r):n==="not-in"?new Z3(e,r):n==="array-contains-any"?new X3(e,r):new wt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new K3(e,r):new G3(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ba(n,this.value)):n!==null&&oo(this.value)===oo(n)&&this.matchesComparison(ba(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Er extends hx{constructor(e,n){super(),this.filters=e,this.op=n,this.lt=null}static create(e,n){return new Er(e,n)}matches(e){return dx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.lt!==null||(this.lt=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(n=>n.isInequality());return e!==null?e.field:null}ft(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function dx(t){return t.op==="and"}function fx(t){return q3(t)&&dx(t)}function q3(t){for(const e of t.filters)if(e instanceof Er)return!1;return!0}function qy(t){if(t instanceof wt)return t.field.canonicalString()+t.op.toString()+Ra(t.value);if(fx(t))return t.filters.map(e=>qy(e)).join(",");{const e=t.filters.map(n=>qy(n)).join(",");return`${t.op}(${e})`}}function px(t,e){return t instanceof wt?function(n,r){return r instanceof wt&&n.op===r.op&&n.field.isEqual(r.field)&&jr(n.value,r.value)}(t,e):t instanceof Er?function(n,r){return r instanceof Er&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((i,s,o)=>i&&px(s,r.filters[o]),!0):!1}(t,e):void oe()}function mx(t){return t instanceof wt?function(e){return`${e.field.canonicalString()} ${e.op} ${Ra(e.value)}`}(t):t instanceof Er?function(e){return e.op.toString()+" {"+e.getFilters().map(mx).join(" ,")+"}"}(t):"Filter"}class H3 extends wt{constructor(e,n,r){super(e,n,r),this.key=X.fromName(r.referenceValue)}matches(e){const n=X.comparator(e.key,this.key);return this.matchesComparison(n)}}class K3 extends wt{constructor(e,n){super(e,"in",n),this.keys=gx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class G3 extends wt{constructor(e,n){super(e,"not-in",n),this.keys=gx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function gx(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>X.fromName(r.referenceValue))}class Q3 extends wt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return d1(n)&&Wu(n.arrayValue,this.value)}}class Y3 extends wt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Wu(this.value.arrayValue,n)}}class Z3 extends wt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Wu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Wu(this.value.arrayValue,n)}}class X3 extends wt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!d1(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Wu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.dt=null}}function HE(t,e=null,n=[],r=[],i=null,s=null,o=null){return new J3(t,e,n,r,i,s,o)}function f1(t){const e=ce(t);if(e.dt===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>qy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),vp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ra(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ra(r)).join(",")),e.dt=n}return e.dt}function p1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!W3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!px(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!qE(t.startAt,e.startAt)&&qE(t.endAt,e.endAt)}function Hy(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.wt=null,this._t=null,this.startAt,this.endAt}}function eM(t,e,n,r,i,s,o,a){return new Co(t,e,n,r,i,s,o,a)}function wp(t){return new Co(t)}function KE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function m1(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Ep(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function g1(t){return t.collectionGroup!==null}function Ks(t){const e=ce(t);if(e.wt===null){e.wt=[];const n=Ep(e),r=m1(e);if(n!==null&&r===null)n.isKeyField()||e.wt.push(new la(n)),e.wt.push(new la(tn.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new la(tn.keyField(),s))}}}return e.wt}function vi(t){const e=ce(t);if(!e._t)if(e.limitType==="F")e._t=HE(e.path,e.collectionGroup,Ks(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of Ks(e)){const o=s.dir==="desc"?"asc":"desc";n.push(new la(s.field,o))}const r=e.endAt?new Na(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Na(e.startAt.position,e.startAt.inclusive):null;e._t=HE(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e._t}function Ky(t,e){e.getFirstInequalityField(),Ep(t);const n=t.filters.concat([e]);return new Co(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Gd(t,e,n){return new Co(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Sp(t,e){return p1(vi(t),vi(e))&&t.limitType===e.limitType}function yx(t){return`${f1(vi(t))}|lt:${t.limitType}`}function Gy(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>mx(r)).join(", ")}]`),vp(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ra(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ra(r)).join(",")),`Target(${n})`}(vi(t))}; limitType=${t.limitType})`}function Cp(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):X.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of Ks(n))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(i,s,o){const a=WE(i,s,o);return i.inclusive?a<=0:a<0}(n.startAt,Ks(n),r)||n.endAt&&!function(i,s,o){const a=WE(i,s,o);return i.inclusive?a>=0:a>0}(n.endAt,Ks(n),r))}(t,e)}function tM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function vx(t){return(e,n)=>{let r=!1;for(const i of Ks(t)){const s=nM(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function nM(t,e,n){const r=t.field.isKeyField()?X.comparator(e.key,n.key):function(i,s,o){const a=s.data.field(i),l=o.data.field(i);return a!==null&&l!==null?ba(a,l):oe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return oe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){So(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return lx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rM=new ot(X.comparator);function _i(){return rM}const _x=new ot(X.comparator);function jl(...t){let e=_x;for(const n of t)e=e.insert(n.key,n);return e}function wx(t){let e=_x;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function js(){return nu()}function Ex(){return nu()}function nu(){return new Xa(t=>t.toString(),(t,e)=>t.isEqual(e))}const iM=new ot(X.comparator),sM=new on(X.comparator);function ye(...t){let e=sM;for(const n of t)e=e.add(n);return e}const oM=new on(xe);function aM(){return oM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hd(e)?"-0":e}}function Cx(t){return{integerValue:""+t}}function Tx(t,e){return V3(e)?Cx(e):Sx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(){this._=void 0}}function lM(t,e,n){return t instanceof Qd?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&_p(i)&&(i=h1(i)),i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof Aa?kx(t,e):t instanceof qu?xx(t,e):function(r,i){const s=Ix(r,i),o=GE(s)+GE(r.gt);return Wy(s)&&Wy(r.gt)?Cx(o):Sx(r.serializer,o)}(t,e)}function uM(t,e,n){return t instanceof Aa?kx(t,e):t instanceof qu?xx(t,e):n}function Ix(t,e){return t instanceof Hu?Wy(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class Qd extends Tp{}class Aa extends Tp{constructor(e){super(),this.elements=e}}function kx(t,e){const n=bx(e);for(const r of t.elements)n.some(i=>jr(i,r))||n.push(r);return{arrayValue:{values:n}}}class qu extends Tp{constructor(e){super(),this.elements=e}}function xx(t,e){let n=bx(e);for(const r of t.elements)n=n.filter(i=>!jr(i,r));return{arrayValue:{values:n}}}class Hu extends Tp{constructor(e,n){super(),this.serializer=e,this.gt=n}}function GE(t){return vt(t.integerValue||t.doubleValue)}function bx(t){return d1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e,n){this.field=e,this.transform=n}}function cM(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof Aa&&r instanceof Aa||n instanceof qu&&r instanceof qu?xa(n.elements,r.elements,jr):n instanceof Hu&&r instanceof Hu?jr(n.gt,r.gt):n instanceof Qd&&r instanceof Qd}(t.transform,e.transform)}class hM{constructor(e,n){this.version=e,this.transformResults=n}}class Zn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Zn}static exists(e){return new Zn(void 0,e)}static updateTime(e){return new Zn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ip{}function Nx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new y1(t.key,Zn.none()):new Nc(t.key,t.data,Zn.none());{const n=t.data,r=Cn.empty();let i=new on(tn.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Is(t.key,r,new Pn(i.toArray()),Zn.none())}}function dM(t,e,n){t instanceof Nc?function(r,i,s){const o=r.value.clone(),a=YE(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Is?function(r,i,s){if(!Yh(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=YE(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(Ax(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):function(r,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function ru(t,e,n,r){return t instanceof Nc?function(i,s,o,a){if(!Yh(i.precondition,s))return o;const l=i.value.clone(),u=ZE(i.fieldTransforms,a,s);return l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Is?function(i,s,o,a){if(!Yh(i.precondition,s))return o;const l=ZE(i.fieldTransforms,a,s),u=s.data;return u.setAll(Ax(i)),u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(c=>c.field))}(t,e,n,r):function(i,s,o){return Yh(i.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(t,e,n)}function fM(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Ix(r.transform,i||null);s!=null&&(n===null&&(n=Cn.empty()),n.set(r.field,s))}return n||null}function QE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&xa(n,r,(i,s)=>cM(i,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}let Nc=class extends Ip{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}};class Is extends Ip{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Ax(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function YE(t,e,n){const r=new Map;Ke(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,uM(o,a,n[i]))}return r}function ZE(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,lM(s,o,e))}return r}class y1 extends Ip{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pM extends Ip{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&dM(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ru(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ru(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Ex();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=Nx(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ye())}isEqual(e){return this.batchId===e.batchId&&xa(this.mutations,e.mutations,(n,r)=>QE(n,r))&&xa(this.baseMutations,e.baseMutations,(n,r)=>QE(n,r))}}class v1{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ke(e.mutations.length===r.length);let i=iM;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new v1(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yt,we;function vM(t){switch(t){default:return oe();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function Ox(t){if(t===void 0)return yi("GRPC error has no .code"),R.UNKNOWN;switch(t){case yt.OK:return R.OK;case yt.CANCELLED:return R.CANCELLED;case yt.UNKNOWN:return R.UNKNOWN;case yt.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case yt.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case yt.INTERNAL:return R.INTERNAL;case yt.UNAVAILABLE:return R.UNAVAILABLE;case yt.UNAUTHENTICATED:return R.UNAUTHENTICATED;case yt.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case yt.NOT_FOUND:return R.NOT_FOUND;case yt.ALREADY_EXISTS:return R.ALREADY_EXISTS;case yt.PERMISSION_DENIED:return R.PERMISSION_DENIED;case yt.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case yt.ABORTED:return R.ABORTED;case yt.OUT_OF_RANGE:return R.OUT_OF_RANGE;case yt.UNIMPLEMENTED:return R.UNIMPLEMENTED;case yt.DATA_LOSS:return R.DATA_LOSS;default:return oe()}}(we=yt||(yt={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Ih}static getOrCreateInstance(){return Ih===null&&(Ih=new _1),Ih}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let Ih=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _M(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM=new aa([4294967295,4294967295],0);function XE(t){const e=_M().encode(t),n=new I3;return n.update(e),new Uint8Array(n.digest())}function JE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new aa([n,r],0),new aa([i,s],0)]}class w1{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new zl(`Invalid padding: ${n}`);if(r<0)throw new zl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new zl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new zl(`Invalid padding when bitmap length is 0: ${n}`);this.It=8*e.length-n,this.Tt=aa.fromNumber(this.It)}Et(e,n,r){let i=e.add(n.multiply(aa.fromNumber(r)));return i.compare(wM)===1&&(i=new aa([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}vt(e){if(this.It===0)return!1;const n=XE(e),[r,i]=JE(n);for(let s=0;s<this.hashCount;s++){const o=this.Et(r,i,s);if(!this.At(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new w1(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.It===0)return;const n=XE(e),[r,i]=JE(n);for(let s=0;s<this.hashCount;s++){const o=this.Et(r,i,s);this.Rt(o)}}Rt(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class zl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ac.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new kp(le.min(),i,new ot(xe),_i(),ye())}}class Ac{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ac(r,n,ye(),ye(),ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,n,r,i){this.Pt=e,this.removedTargetIds=n,this.key=r,this.bt=i}}class Px{constructor(e,n){this.targetId=e,this.Vt=n}}class Dx{constructor(e,n,r=cn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class e2{constructor(){this.St=0,this.Dt=n2(),this.Ct=cn.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return this.St!==0}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=ye(),n=ye(),r=ye();return this.Dt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:oe()}}),new Ac(this.Ct,this.xt,e,n,r)}Ft(){this.Nt=!1,this.Dt=n2()}Bt(e,n){this.Nt=!0,this.Dt=this.Dt.insert(e,n)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class EM{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=_i(),this.zt=t2(),this.Wt=new ot(xe)}Ht(e){for(const n of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(n,e.bt):this.Yt(n,e.key,e.bt);for(const n of e.removedTargetIds)this.Yt(n,e.key,e.bt)}Xt(e){this.forEachTarget(e,n=>{const r=this.Zt(n);switch(e.state){case 0:this.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(n);break;case 3:this.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(n)&&(this.ee(n),r.$t(e.resumeToken));break;default:oe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Qt.forEach((r,i)=>{this.te(i)&&n(i)})}ne(e){var n;const r=e.targetId,i=e.Vt.count,s=this.se(r);if(s){const o=s.target;if(Hy(o))if(i===0){const a=new X(o.path);this.Yt(r,a,Xt.newNoDocument(a,le.min()))}else Ke(i===1);else{const a=this.ie(r);if(a!==i){const l=this.re(e,a);if(l!==0){this.ee(r);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(r,u)}(n=_1.instance)===null||n===void 0||n.notifyOnExistenceFilterMismatch(function(u,c,h){var d,p,g,_,w,y;const f={localCacheCount:c,existenceFilterCount:h.count},m=h.unchangedNames;return m&&(f.bloomFilter={applied:u===0,hashCount:(d=m==null?void 0:m.hashCount)!==null&&d!==void 0?d:0,bitmapLength:(_=(g=(p=m==null?void 0:m.bits)===null||p===void 0?void 0:p.bitmap)===null||g===void 0?void 0:g.length)!==null&&_!==void 0?_:0,padding:(y=(w=m==null?void 0:m.bits)===null||w===void 0?void 0:w.padding)!==null&&y!==void 0?y:0}),f}(l,a,e.Vt))}}}}re(e,n){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:s="",padding:o=0},hashCount:a=0}=r;let l,u;try{l=so(s).toUint8Array()}catch(c){if(c instanceof ux)return ka("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw c}try{u=new w1(l,o,a)}catch(c){return ka(c instanceof zl?"BloomFilter error: ":"Applying bloom filter failed: ",c),1}return u.It===0?1:i!==n-this.oe(e.targetId,u)?2:0}oe(e,n){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{const o=this.Gt.ue(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;n.vt(a)||(this.Yt(e,s,null),i++)}),i}ce(e){const n=new Map;this.Qt.forEach((s,o)=>{const a=this.se(o);if(a){if(s.current&&Hy(a.target)){const l=new X(a.target.path);this.jt.get(l)!==null||this.ae(o,l)||this.Yt(o,l,Xt.newNoDocument(l,e))}s.Mt&&(n.set(o,s.Ot()),s.Ft())}});let r=ye();this.zt.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.se(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.jt.forEach((s,o)=>o.setReadTime(e));const i=new kp(e,n,this.Wt,this.jt,r);return this.jt=_i(),this.zt=t2(),this.Wt=new ot(xe),i}Jt(e,n){if(!this.te(e))return;const r=this.ae(e,n.key)?2:0;this.Zt(e).Bt(n.key,r),this.jt=this.jt.insert(n.key,n),this.zt=this.zt.insert(n.key,this.he(n.key).add(e))}Yt(e,n,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,n)?i.Bt(n,1):i.Lt(n),this.zt=this.zt.insert(n,this.he(n).delete(e)),r&&(this.jt=this.jt.insert(n,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const n=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let n=this.Qt.get(e);return n||(n=new e2,this.Qt.set(e,n)),n}he(e){let n=this.zt.get(e);return n||(n=new on(xe),this.zt=this.zt.insert(e,n)),n}te(e){const n=this.se(e)!==null;return n||Z("WatchChangeAggregator","Detected inactive target",e),n}se(e){const n=this.Qt.get(e);return n&&n.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new e2),this.Gt.getRemoteKeysForTarget(e).forEach(n=>{this.Yt(e,n,null)})}ae(e,n){return this.Gt.getRemoteKeysForTarget(e).has(n)}}function t2(){return new ot(X.comparator)}function n2(){return new ot(X.comparator)}const SM=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),CM=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),TM=(()=>({and:"AND",or:"OR"}))();class IM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Qy(t,e){return t.useProto3Json||vp(e)?e:{value:e}}function Yd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Mx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function kM(t,e){return Yd(t,e.toTimestamp())}function Ur(t){return Ke(!!t),le.fromTimestamp(function(e){const n=ds(e);return new Ze(n.seconds,n.nanos)}(t))}function E1(t,e){return function(n){return new Ve(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function Lx(t){const e=Ve.fromString(t);return Ke(Vx(e)),e}function Yy(t,e){return E1(t.databaseId,e.path)}function Xm(t,e){const n=Lx(e);if(n.get(1)!==t.databaseId.projectId)throw new F(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new F(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new X(Fx(n))}function Zy(t,e){return E1(t.databaseId,e)}function xM(t){const e=Lx(t);return e.length===4?Ve.emptyPath():Fx(e)}function Xy(t){return new Ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Fx(t){return Ke(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function r2(t,e,n){return{name:Yy(t,e),fields:n.value.mapValue.fields}}function bM(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,u){return l.useProto3Json?(Ke(u===void 0||typeof u=="string"),cn.fromBase64String(u||"")):(Ke(u===void 0||u instanceof Uint8Array),cn.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const u=l.code===void 0?R.UNKNOWN:Ox(l.code);return new F(u,l.message||"")}(o);n=new Dx(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Xm(t,r.document.name),s=Ur(r.document.updateTime),o=r.document.createTime?Ur(r.document.createTime):le.min(),a=new Cn({mapValue:{fields:r.document.fields}}),l=Xt.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new Zh(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Xm(t,r.document),s=r.readTime?Ur(r.readTime):le.min(),o=Xt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Zh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Xm(t,r.document),s=r.removedTargetIds||[];n=new Zh([],s,i,null)}else{if(!("filter"in e))return oe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new yM(i,s),a=r.targetId;n=new Px(a,o)}}return n}function RM(t,e){let n;if(e instanceof Nc)n={update:r2(t,e.key,e.value)};else if(e instanceof y1)n={delete:Yy(t,e.key)};else if(e instanceof Is)n={update:r2(t,e.key,e.data),updateMask:UM(e.fieldMask)};else{if(!(e instanceof pM))return oe();n={verify:Yy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof Qd)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Aa)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof qu)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Hu)return{fieldPath:s.field.canonicalString(),increment:o.gt};throw oe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:kM(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:oe()}(t,e.precondition)),n}function NM(t,e){return t&&t.length>0?(Ke(e!==void 0),t.map(n=>function(r,i){let s=r.updateTime?Ur(r.updateTime):Ur(i);return s.isEqual(le.min())&&(s=Ur(i)),new hM(s,r.transformResults||[])}(n,e))):[]}function AM(t,e){return{documents:[Zy(t,e.path)]}}function OM(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=Zy(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Zy(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(l){if(l.length!==0)return $x(Er.create(l,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(l){if(l.length!==0)return l.map(u=>function(c){return{field:Do(c.field),direction:MM(c.dir)}}(u))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=Qy(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function PM(t){let e=xM(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ke(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=function(c){const h=Ux(c);return h instanceof Er&&fx(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(c=>function(h){return new la(Mo(h.field),function(d){switch(d){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(c)));let a=null;n.limit&&(a=function(c){let h;return h=typeof c=="object"?c.value:c,vp(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(c){const h=!!c.before,d=c.values||[];return new Na(d,h)}(n.startAt));let u=null;return n.endAt&&(u=function(c){const h=!c.before,d=c.values||[];return new Na(d,h)}(n.endAt)),eM(e,i,o,s,a,"F",l,u)}function DM(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Ux(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Mo(e.unaryFilter.field);return wt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Mo(e.unaryFilter.field);return wt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Mo(e.unaryFilter.field);return wt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Mo(e.unaryFilter.field);return wt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return oe()}}(t):t.fieldFilter!==void 0?function(e){return wt.create(Mo(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oe()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return Er.create(e.compositeFilter.filters.map(n=>Ux(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return oe()}}(e.compositeFilter.op))}(t):oe()}function MM(t){return SM[t]}function LM(t){return CM[t]}function FM(t){return TM[t]}function Do(t){return{fieldPath:t.canonicalString()}}function Mo(t){return tn.fromServerFormat(t.fieldPath)}function $x(t){return t instanceof wt?function(e){if(e.op==="=="){if(BE(e.value))return{unaryFilter:{field:Do(e.field),op:"IS_NAN"}};if(zE(e.value))return{unaryFilter:{field:Do(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(BE(e.value))return{unaryFilter:{field:Do(e.field),op:"IS_NOT_NAN"}};if(zE(e.value))return{unaryFilter:{field:Do(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Do(e.field),op:LM(e.op),value:e.value}}}(t):t instanceof Er?function(e){const n=e.getFilters().map(r=>$x(r));return n.length===1?n[0]:{compositeFilter:{op:FM(e.op),filters:n}}}(t):oe()}function UM(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Vx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,n,r,i,s=le.min(),o=le.min(),a=cn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new qi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new qi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e){this.fe=e}}function VM(t){const e=PM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Gd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(){this.rn=new zM}addToCollectionParentIndex(e,n){return this.rn.add(n),D.resolve()}getCollectionParents(e,n){return D.resolve(this.rn.getEntries(n))}addFieldIndex(e,n){return D.resolve()}deleteFieldIndex(e,n){return D.resolve()}getDocumentsMatchingTarget(e,n){return D.resolve(null)}getIndexType(e,n){return D.resolve(0)}getFieldIndexes(e,n){return D.resolve([])}getNextCollectionGroupToUpdate(e){return D.resolve(null)}getMinOffset(e,n){return D.resolve(hs.min())}getMinOffsetFromCollectionGroup(e,n){return D.resolve(hs.min())}updateCollectionGroup(e,n,r){return D.resolve()}updateIndexEntries(e,n){return D.resolve()}}class zM{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new on(Ve.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new on(Ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Oa(0)}static Mn(){return new Oa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(){this.changes=new Xa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Xt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?D.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ru(r.mutation,i,Pn.empty(),Ze.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ye()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ye()){const i=js();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=jl();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=js();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ye()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=_i();const o=nu(),a=nu();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof Is)?s=s.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),ru(c.mutation,u,c.mutation.getFieldMask(),Ze.now())):o.set(u.key,Pn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var h;return a.set(u,new WM(c,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=nu();let i=new ot((o,a)=>o-a),s=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||Pn.empty();c=a.applyToLocalView(u,c),r.set(l,c);const h=(i.get(a.batchId)||ye()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,h=Ex();c.forEach(d=>{if(!s.has(d)){const p=Nx(n.get(d),r.get(d));p!==null&&h.set(d,p),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return D.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return X.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):g1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):D.resolve(js());let a=-1,l=s;return o.next(u=>D.forEach(u,(c,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(c)?D.resolve():this.remoteDocumentCache.getEntry(e,c).next(d=>{l=l.insert(c,d)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,ye())).next(c=>({batchId:a,changes:wx(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new X(n)).next(r=>{let i=jl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=jl();return this.indexManager.getCollectionParents(e,i).next(o=>D.forEach(o,a=>{const l=function(u,c){return new Co(c,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(u=>{u.forEach((c,h)=>{s=s.insert(c,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((a,l)=>{const u=l.getKey();s.get(u)===null&&(s=s.insert(u,Xt.newInvalidDocument(u)))});let o=jl();return s.forEach((a,l)=>{const u=i.get(a);u!==void 0&&ru(u.mutation,l,Pn.empty(),Ze.now()),Cp(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,n){return D.resolve(this.cs.get(n))}saveBundleMetadata(e,n){var r;return this.cs.set(n.id,{id:(r=n).id,version:r.version,createTime:Ur(r.createTime)}),D.resolve()}getNamedQuery(e,n){return D.resolve(this.hs.get(n))}saveNamedQuery(e,n){return this.hs.set(n.name,function(r){return{name:r.name,query:VM(r.bundledQuery),readTime:Ur(r.readTime)}}(n)),D.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(){this.overlays=new ot(X.comparator),this.ls=new Map}getOverlay(e,n){return D.resolve(this.overlays.get(n))}getOverlays(e,n){const r=js();return D.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.we(e,n,s)}),D.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.ls.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(r)),D.resolve()}getOverlaysForCollection(e,n,r){const i=js(),s=n.length+1,o=new X(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return D.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new ot((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=js(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=js(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return D.resolve(a)}we(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new gM(n,r));let s=this.ls.get(n);s===void 0&&(s=ye(),this.ls.set(n,s)),this.ls.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(){this.fs=new on(xt.ds),this.ws=new on(xt._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,n){const r=new xt(e,n);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.ys(new xt(e,n))}ps(e,n){e.forEach(r=>this.removeReference(r,n))}Is(e){const n=new X(new Ve([])),r=new xt(n,e),i=new xt(n,e+1),s=[];return this.ws.forEachInRange([r,i],o=>{this.ys(o),s.push(o.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const n=new X(new Ve([])),r=new xt(n,e),i=new xt(n,e+1);let s=ye();return this.ws.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new xt(e,0),r=this.fs.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class xt{constructor(e,n){this.key=e,this.As=n}static ds(e,n){return X.comparator(e.key,n.key)||xe(e.As,n.As)}static _s(e,n){return xe(e.As,n.As)||X.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new on(xt.ds)}checkEmpty(e){return D.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new mM(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Rs=this.Rs.add(new xt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return D.resolve(o)}lookupMutationBatch(e,n){return D.resolve(this.Ps(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.bs(r),s=i<0?0:i;return D.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return D.resolve(this.mutationQueue.length===0?-1:this.vs-1)}getAllMutationBatches(e){return D.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new xt(n,0),i=new xt(n,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([r,i],o=>{const a=this.Ps(o.As);s.push(a)}),D.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new on(xe);return n.forEach(i=>{const s=new xt(i,0),o=new xt(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,o],a=>{r=r.add(a.As)})}),D.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;X.isDocumentKey(s)||(s=s.child(""));const o=new xt(new X(s),0);let a=new on(xe);return this.Rs.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.As)),!0)},o),D.resolve(this.Vs(a))}Vs(e){const n=[];return e.forEach(r=>{const i=this.Ps(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ke(this.Ss(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Rs;return D.forEach(n.mutations,i=>{const s=new xt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,n){const r=new xt(n,0),i=this.Rs.firstAfterOrEqual(r);return D.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,D.resolve()}Ss(e,n){return this.bs(e)}bs(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Ps(e){const n=this.bs(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e){this.Ds=e,this.docs=new ot(X.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Ds(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return D.resolve(r?r.document.mutableCopy():Xt.newInvalidDocument(n))}getEntries(e,n){let r=_i();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Xt.newInvalidDocument(i))}),D.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=_i();const o=n.path,a=new X(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||F3(L3(c),r)<=0||(i.has(c.key)||Cp(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return D.resolve(s)}getAllFromCollectionGroup(e,n,r,i){oe()}Cs(e,n){return D.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new YM(this)}getSize(e){return D.resolve(this.size)}}class YM extends BM{constructor(e){super(),this.os=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),D.waitFor(n)}getFromCache(e,n){return this.os.getEntry(e,n)}getAllFromCache(e,n){return this.os.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e){this.persistence=e,this.xs=new Xa(n=>f1(n),p1),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.Ns=0,this.ks=new S1,this.targetCount=0,this.Ms=Oa.kn()}forEachTarget(e,n){return this.xs.forEach((r,i)=>n(i)),D.resolve()}getLastRemoteSnapshotVersion(e){return D.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return D.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),D.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Ns&&(this.Ns=n),D.resolve()}Fn(e){this.xs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ms=new Oa(n),this.highestTargetId=n),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,n){return this.Fn(n),this.targetCount+=1,D.resolve()}updateTargetData(e,n){return this.Fn(n),D.resolve()}removeTargetData(e,n){return this.xs.delete(n.target),this.ks.Is(n.targetId),this.targetCount-=1,D.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.xs.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.xs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),D.waitFor(s).next(()=>i)}getTargetCount(e){return D.resolve(this.targetCount)}getTargetData(e,n){const r=this.xs.get(n)||null;return D.resolve(r)}addMatchingKeys(e,n,r){return this.ks.gs(n,r),D.resolve()}removeMatchingKeys(e,n,r){this.ks.ps(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),D.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.ks.Is(n),D.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ks.Es(n);return D.resolve(r)}containsKey(e,n){return D.resolve(this.ks.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e,n){this.$s={},this.overlays={},this.Os=new c1(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new ZM(this),this.indexManager=new jM,this.remoteDocumentCache=function(r){return new QM(r)}(r=>this.referenceDelegate.Ls(r)),this.serializer=new $M(n),this.qs=new HM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new KM,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.$s[e.toKey()];return r||(r=new GM(n,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,n,r){Z("MemoryPersistence","Starting transaction:",e);const i=new JM(this.Os.next());return this.referenceDelegate.Us(),r(i).next(s=>this.referenceDelegate.Ks(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gs(e,n){return D.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,n)))}}class JM extends $3{constructor(e){super(),this.currentSequenceNumber=e}}class C1{constructor(e){this.persistence=e,this.Qs=new S1,this.js=null}static zs(e){return new C1(e)}get Ws(){if(this.js)return this.js;throw oe()}addReference(e,n,r){return this.Qs.addReference(r,n),this.Ws.delete(r.toString()),D.resolve()}removeReference(e,n,r){return this.Qs.removeReference(r,n),this.Ws.add(r.toString()),D.resolve()}markPotentiallyOrphaned(e,n){return this.Ws.add(n.toString()),D.resolve()}removeTarget(e,n){this.Qs.Is(n.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Ws.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Us(){this.js=new Set}Ks(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return D.forEach(this.Ws,r=>{const i=X.fromPath(r);return this.Hs(e,i).next(s=>{s||n.removeEntry(i,le.min())})}).next(()=>(this.js=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hs(e,n).next(r=>{r?this.Ws.delete(n.toString()):this.Ws.add(n.toString())})}Ls(e){return 0}Hs(e,n){return D.or([()=>D.resolve(this.Qs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gs(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Fi=r,this.Bi=i}static Li(e,n){let r=ye(),i=ye();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new T1(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(){this.qi=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.qi=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Ki(e,n).next(s=>s||this.Gi(e,n,i,r)).next(s=>s||this.Qi(e,n))}Ki(e,n){if(KE(n))return D.resolve(null);let r=vi(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Gd(n,null,"F"),r=vi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ye(...s);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ji(n,a);return this.zi(n,u,o,l.readTime)?this.Ki(e,Gd(n,null,"F")):this.Wi(e,u,n,l)}))})))}Gi(e,n,r,i){return KE(n)||i.isEqual(le.min())?this.Qi(e,n):this.Ui.getDocuments(e,r).next(s=>{const o=this.ji(n,s);return this.zi(n,o,r,i)?this.Qi(e,n):(UE()<=Te.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Gy(n)),this.Wi(e,o,n,M3(i,-1)))})}ji(e,n){let r=new on(vx(e));return n.forEach((i,s)=>{Cp(e,s)&&(r=r.add(s))}),r}zi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Qi(e,n){return UE()<=Te.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",Gy(n)),this.Ui.getDocumentsMatchingQuery(e,n,hs.min())}Wi(e,n,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e,n,r,i){this.persistence=e,this.Hi=n,this.serializer=i,this.Ji=new ot(xe),this.Yi=new Xa(s=>f1(s),p1),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qM(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function n6(t,e,n,r){return new t6(t,e,n,r)}async function jx(t,e){const n=ce(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.tr(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=ye();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({er:u,removedBatchIds:o,addedBatchIds:a}))})})}function r6(t,e){const n=ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Zi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,u){const c=l.batch,h=c.keys();let d=D.resolve();return h.forEach(p=>{d=d.next(()=>u.getEntry(a,p)).next(g=>{const _=l.docVersions.get(p);Ke(_!==null),g.version.compareTo(_)<0&&(c.applyToRemoteDocument(g,l),g.isValidDocument()&&(g.setReadTime(l.commitVersion),u.addEntry(g)))})}),d.next(()=>o.mutationQueue.removeMutationBatch(a,c))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=ye();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function zx(t){const e=ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Bs.getLastRemoteSnapshotVersion(n))}function i6(t,e){const n=ce(t),r=e.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const a=[];e.targetChanges.forEach((c,h)=>{const d=i.get(h);if(!d)return;a.push(n.Bs.removeMatchingKeys(s,c.removedDocuments,h).next(()=>n.Bs.addMatchingKeys(s,c.addedDocuments,h)));let p=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(cn.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):c.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(c.resumeToken,r)),i=i.insert(h,p),function(g,_,w){return g.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(d,p,c)&&a.push(n.Bs.updateTargetData(s,p))});let l=_i(),u=ye();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(s6(s,o,e.documentUpdates).next(c=>{l=c.nr,u=c.sr})),!r.isEqual(le.min())){const c=n.Bs.getLastRemoteSnapshotVersion(s).next(h=>n.Bs.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return D.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.Ji=i,s))}function s6(t,e,n){let r=ye(),i=ye();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=_i();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(le.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Z("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{nr:o,sr:i}})}function o6(t,e){const n=ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function a6(t,e){const n=ce(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Bs.getTargetData(r,e).next(s=>s?(i=s,D.resolve(i)):n.Bs.allocateTargetId(r).next(o=>(i=new qi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ji.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(r.targetId,r),n.Yi.set(e,r.targetId)),r})}async function Jy(t,e,n){const r=ce(t),i=r.Ji.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Rc(o))throw o;Z("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}function i2(t,e,n){const r=ce(t);let i=le.min(),s=ye();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,l,u){const c=ce(a),h=c.Yi.get(u);return h!==void 0?D.resolve(c.Ji.get(h)):c.Bs.getTargetData(l,u)}(r,o,vi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Hi.getDocumentsMatchingQuery(o,e,n?i:le.min(),n?s:ye())).next(a=>(l6(r,tM(e),a),{documents:a,ir:s})))}function l6(t,e,n){let r=t.Xi.get(e)||le.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Xi.set(e,r)}class s2{constructor(){this.activeTargetIds=aM()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class u6{constructor(){this.Hr=new s2,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,n,r){this.Jr[e]=n}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new s2,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{Yr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kh=null;function Jm(){return kh===null?kh=268435456+Math.round(2147483648*Math.random()):kh++,"0x"+kh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gt="WebChannelConnection";class f6 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.mo=n+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,n,r,i,s){const o=Jm(),a=this.To(e,n);Z("RestConnection",`Sending RPC '${e}' ${o}:`,a,r);const l={};return this.Eo(l,i,s),this.Ao(e,a,l,r).then(u=>(Z("RestConnection",`Received RPC '${e}' ${o}: `,u),u),u=>{throw ka("RestConnection",`RPC '${e}' ${o} failed with error: `,u,"url: ",a,"request:",r),u})}vo(e,n,r,i,s,o){return this.Io(e,n,r,i,s)}Eo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Za,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}To(e,n){const r=h6[e];return`${this.mo}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,n,r,i){const s=Jm();return new Promise((o,a)=>{const l=new T3;l.setWithCredentials(!0),l.listenOnce(E3.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Zm.NO_ERROR:const c=l.getResponseJson();Z(Gt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(c)),o(c);break;case Zm.TIMEOUT:Z(Gt,`RPC '${e}' ${s} timed out`),a(new F(R.DEADLINE_EXCEEDED,"Request time out"));break;case Zm.HTTP_ERROR:const h=l.getStatus();if(Z(Gt,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const p=d==null?void 0:d.error;if(p&&p.status&&p.message){const g=function(_){const w=_.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(w)>=0?w:R.UNKNOWN}(p.status);a(new F(g,p.message))}else a(new F(R.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new F(R.UNAVAILABLE,"Connection failed."));break;default:oe()}}finally{Z(Gt,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);Z(Gt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Ro(e,n,r){const i=Jm(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=_3(),a=w3(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.xmlHttpFactory=new C3({})),this.Eo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=s.join("");Z(Gt,`Creating RPC '${e}' stream ${i}: ${c}`,l);const h=o.createWebChannel(c,l);let d=!1,p=!1;const g=new d6({ro:w=>{p?Z(Gt,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(d||(Z(Gt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),d=!0),Z(Gt,`RPC '${e}' stream ${i} sending:`,w),h.send(w))},oo:()=>h.close()}),_=(w,y,f)=>{w.listen(y,m=>{try{f(m)}catch(E){setTimeout(()=>{throw E},0)}})};return _(h,Sh.EventType.OPEN,()=>{p||Z(Gt,`RPC '${e}' stream ${i} transport opened.`)}),_(h,Sh.EventType.CLOSE,()=>{p||(p=!0,Z(Gt,`RPC '${e}' stream ${i} transport closed`),g.wo())}),_(h,Sh.EventType.ERROR,w=>{p||(p=!0,ka(Gt,`RPC '${e}' stream ${i} transport errored:`,w),g.wo(new F(R.UNAVAILABLE,"The operation could not be completed")))}),_(h,Sh.EventType.MESSAGE,w=>{var y;if(!p){const f=w.data[0];Ke(!!f);const m=f,E=m.error||((y=m[0])===null||y===void 0?void 0:y.error);if(E){Z(Gt,`RPC '${e}' stream ${i} received error:`,E);const C=E.status;let T=function(k){const H=yt[k];if(H!==void 0)return Ox(H)}(C),b=E.message;T===void 0&&(T=R.INTERNAL,b="Unknown error status: "+C+" with message "+E.message),p=!0,g.wo(new F(T,b)),h.close()}else Z(Gt,`RPC '${e}' stream ${i} received:`,f),g._o(f)}}),_(a,S3.STAT_EVENT,w=>{w.stat===LE.PROXY?Z(Gt,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===LE.NOPROXY&&Z(Gt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.fo()},0),g}}function eg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xp(t){return new IM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ii=e,this.timerId=n,this.Po=r,this.bo=i,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&Z("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){this.Do!==null&&(this.Do.skipDelay(),this.Do=null)}cancel(){this.Do!==null&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e,n,r,i,s,o,a,l){this.ii=e,this.$o=r,this.Oo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Bx(e,n)}Uo(){return this.state===1||this.state===5||this.Ko()}Ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&this.Bo===null&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,n){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,e!==4?this.qo.reset():n&&n.code===R.RESOURCE_EXHAUSTED?(yi(n.toString()),yi("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(n)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===n&&this.Zo(r,i)},r=>{e(()=>{const i=new F(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,n){const r=this.Xo(this.Fo);this.stream=this.eu(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return Z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget(()=>this.Fo===e?n():(Z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class p6 extends Wx{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}eu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.qo.reset();const n=bM(this.serializer,e),r=function(i){if(!("targetChange"in i))return le.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?le.min():s.readTime?Ur(s.readTime):le.min()}(e);return this.listener.nu(n,r)}su(e){const n={};n.database=Xy(this.serializer),n.addTarget=function(i,s){let o;const a=s.target;if(o=Hy(a)?{documents:AM(i,a)}:{query:OM(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=Mx(i,s.resumeToken);const l=Qy(i,s.expectedCount);l!==null&&(o.expectedCount=l)}else if(s.snapshotVersion.compareTo(le.min())>0){o.readTime=Yd(i,s.snapshotVersion.toTimestamp());const l=Qy(i,s.expectedCount);l!==null&&(o.expectedCount=l)}return o}(this.serializer,e);const r=DM(this.serializer,e);r&&(n.labels=r),this.Wo(n)}iu(e){const n={};n.database=Xy(this.serializer),n.removeTarget=e,this.Wo(n)}}class m6 extends Wx{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(Ke(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const n=NM(e.writeResults,e.commitTime),r=Ur(e.commitTime);return this.listener.cu(r,n)}return Ke(!e.writeResults||e.writeResults.length===0),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Xy(this.serializer),this.Wo(e)}uu(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>RM(this.serializer,r))};this.Wo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new F(R.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Io(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new F(R.UNKNOWN,i.toString())})}vo(e,n,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.vo(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(R.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class y6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){this.wu===0&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){this.state==="Online"?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,e==="Online"&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(yi(n),this.mu=!1):Z("OnlineStateTracker",n)}Tu(){this._u!==null&&(this._u.cancel(),this._u=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(o=>{r.enqueueAndForget(async()=>{To(this)&&(Z("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=ce(a);l.vu.add(4),await Oc(l),l.bu.set("Unknown"),l.vu.delete(4),await bp(l)}(this))})}),this.bu=new y6(r,i)}}async function bp(t){if(To(t))for(const e of t.Ru)await e(!0)}async function Oc(t){for(const e of t.Ru)await e(!1)}function qx(t,e){const n=ce(t);n.Au.has(e.targetId)||(n.Au.set(e.targetId,e),x1(n)?k1(n):Ja(n).Ko()&&I1(n,e))}function Hx(t,e){const n=ce(t),r=Ja(n);n.Au.delete(e),r.Ko()&&Kx(n,e),n.Au.size===0&&(r.Ko()?r.jo():To(n)&&n.bu.set("Unknown"))}function I1(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ja(t).su(e)}function Kx(t,e){t.Vu.qt(e),Ja(t).iu(e)}function k1(t){t.Vu=new EM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),Ja(t).start(),t.bu.gu()}function x1(t){return To(t)&&!Ja(t).Uo()&&t.Au.size>0}function To(t){return ce(t).vu.size===0}function Gx(t){t.Vu=void 0}async function _6(t){t.Au.forEach((e,n)=>{I1(t,e)})}async function w6(t,e){Gx(t),x1(t)?(t.bu.Iu(e),k1(t)):t.bu.set("Unknown")}async function E6(t,e,n){if(t.bu.set("Online"),e instanceof Dx&&e.state===2&&e.cause)try{await async function(r,i){const s=i.cause;for(const o of i.targetIds)r.Au.has(o)&&(await r.remoteSyncer.rejectListen(o,s),r.Au.delete(o),r.Vu.removeTarget(o))}(t,e)}catch(r){Z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Zd(t,r)}else if(e instanceof Zh?t.Vu.Ht(e):e instanceof Px?t.Vu.ne(e):t.Vu.Xt(e),!n.isEqual(le.min()))try{const r=await zx(t.localStore);n.compareTo(r)>=0&&await function(i,s){const o=i.Vu.ce(s);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const u=i.Au.get(l);u&&i.Au.set(l,u.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach((a,l)=>{const u=i.Au.get(a);if(!u)return;i.Au.set(a,u.withResumeToken(cn.EMPTY_BYTE_STRING,u.snapshotVersion)),Kx(i,a);const c=new qi(u.target,a,l,u.sequenceNumber);I1(i,c)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){Z("RemoteStore","Failed to raise snapshot:",r),await Zd(t,r)}}async function Zd(t,e,n){if(!Rc(e))throw e;t.vu.add(1),await Oc(t),t.bu.set("Offline"),n||(n=()=>zx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Z("RemoteStore","Retrying IndexedDB access"),await n(),t.vu.delete(1),await bp(t)})}function Qx(t,e){return e().catch(n=>Zd(t,n,e))}async function Rp(t){const e=ce(t),n=fs(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;S6(e);)try{const i=await o6(e.localStore,r);if(i===null){e.Eu.length===0&&n.jo();break}r=i.batchId,C6(e,i)}catch(i){await Zd(e,i)}Yx(e)&&Zx(e)}function S6(t){return To(t)&&t.Eu.length<10}function C6(t,e){t.Eu.push(e);const n=fs(t);n.Ko()&&n.ou&&n.uu(e.mutations)}function Yx(t){return To(t)&&!fs(t).Uo()&&t.Eu.length>0}function Zx(t){fs(t).start()}async function T6(t){fs(t).hu()}async function I6(t){const e=fs(t);for(const n of t.Eu)e.uu(n.mutations)}async function k6(t,e,n){const r=t.Eu.shift(),i=v1.from(r,e,n);await Qx(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Rp(t)}async function x6(t,e){e&&fs(t).ou&&await async function(n,r){if(i=r.code,vM(i)&&i!==R.ABORTED){const s=n.Eu.shift();fs(n).Qo(),await Qx(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Rp(n)}var i}(t,e),Yx(t)&&Zx(t)}async function a2(t,e){const n=ce(t);n.asyncQueue.verifyOperationInProgress(),Z("RemoteStore","RemoteStore received new credentials");const r=To(n);n.vu.add(3),await Oc(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.vu.delete(3),await bp(n)}async function b6(t,e){const n=ce(t);e?(n.vu.delete(2),await bp(n)):e||(n.vu.add(2),await Oc(n),n.bu.set("Unknown"))}function Ja(t){return t.Su||(t.Su=function(e,n,r){const i=ce(e);return i.fu(),new p6(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{uo:_6.bind(null,t),ao:w6.bind(null,t),nu:E6.bind(null,t)}),t.Ru.push(async e=>{e?(t.Su.Qo(),x1(t)?k1(t):t.bu.set("Unknown")):(await t.Su.stop(),Gx(t))})),t.Su}function fs(t){return t.Du||(t.Du=function(e,n,r){const i=ce(e);return i.fu(),new m6(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{uo:T6.bind(null,t),ao:x6.bind(null,t),au:I6.bind(null,t),cu:k6.bind(null,t)}),t.Ru.push(async e=>{e?(t.Du.Qo(),await Rp(t)):(await t.Du.stop(),t.Eu.length>0&&(Z("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))})),t.Du}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ai,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new b1(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function R1(t,e){if(yi("AsyncQueue",`${e}: ${t}`),Rc(t))return new F(R.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e){this.comparator=e?(n,r)=>e(n,r)||X.comparator(n.key,r.key):(n,r)=>X.comparator(n.key,r.key),this.keyedMap=jl(),this.sortedSet=new ot(this.comparator)}static emptySet(e){return new ua(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ua)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ua;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(){this.Cu=new ot(X.comparator)}track(e){const n=e.doc.key,r=this.Cu.get(n);r?e.type!==0&&r.type===3?this.Cu=this.Cu.insert(n,e):e.type===3&&r.type!==1?this.Cu=this.Cu.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Cu=this.Cu.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Cu=this.Cu.remove(n):e.type===1&&r.type===2?this.Cu=this.Cu.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):oe():this.Cu=this.Cu.insert(n,e)}xu(){const e=[];return this.Cu.inorderTraversal((n,r)=>{e.push(r)}),e}}class Pa{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Pa(e,n,ua.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(){this.Nu=void 0,this.listeners=[]}}class N6{constructor(){this.queries=new Xa(e=>yx(e),Sp),this.onlineState="Unknown",this.ku=new Set}}async function N1(t,e){const n=ce(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new R6),i)try{s.Nu=await n.onListen(r)}catch(o){const a=R1(o,`Initialization of query '${Gy(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Mu(n.onlineState),s.Nu&&e.$u(s.Nu)&&O1(n)}async function A1(t,e){const n=ce(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function A6(t,e){const n=ce(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.$u(i)&&(r=!0);o.Nu=i}}r&&O1(n)}function O6(t,e,n){const r=ce(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function O1(t){t.ku.forEach(e=>{e.next()})}class P1{constructor(e,n,r){this.query=e,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Pa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),n=!0):this.qu(e,this.onlineState)&&(this.Uu(e),n=!0),this.Bu=e,n}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let n=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),n=!0),n}qu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Ku||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Lu(e){if(e.docChanges.length>0)return!0;const n=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Uu(e){e=Pa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e){this.key=e}}class Jx{constructor(e){this.key=e}}class P6{constructor(e,n){this.query=e,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=ye(),this.mutatedKeys=ye(),this.tc=vx(e),this.ec=new ua(this.tc)}get nc(){return this.Yu}sc(e,n){const r=n?n.ic:new l2,i=n?n.ec:this.ec;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,h)=>{const d=i.get(c),p=Cp(this.query,h)?h:null,g=!!d&&this.mutatedKeys.has(d.key),_=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let w=!1;d&&p?d.data.isEqual(p.data)?g!==_&&(r.track({type:3,doc:p}),w=!0):this.rc(d,p)||(r.track({type:2,doc:p}),w=!0,(l&&this.tc(p,l)>0||u&&this.tc(p,u)<0)&&(a=!0)):!d&&p?(r.track({type:0,doc:p}),w=!0):d&&!p&&(r.track({type:1,doc:d}),w=!0,(l||u)&&(a=!0)),w&&(p?(o=o.add(p),s=_?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{ec:o,ic:r,zi:a,mutatedKeys:s}}rc(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((u,c)=>function(h,d){const p=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe()}};return p(h)-p(d)}(u.type,c.type)||this.tc(u.doc,c.doc)),this.oc(r);const o=n?this.uc():[],a=this.Zu.size===0&&this.current?1:0,l=a!==this.Xu;return this.Xu=a,s.length!==0||l?{snapshot:new Pa(this.query,e.ec,i,s,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ec:this.ec,ic:new l2,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(n=>this.Yu=this.Yu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Yu=this.Yu.delete(n)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=ye(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const n=[];return e.forEach(r=>{this.Zu.has(r)||n.push(new Jx(r))}),this.Zu.forEach(r=>{e.has(r)||n.push(new Xx(r))}),n}hc(e){this.Yu=e.ir,this.Zu=ye();const n=this.sc(e.documents);return this.applyChanges(n,!0)}lc(){return Pa.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,this.Xu===0,this.hasCachedResults)}}class D6{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class M6{constructor(e){this.key=e,this.fc=!1}}class L6{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new Xa(a=>yx(a),Sp),this._c=new Map,this.mc=new Set,this.gc=new ot(X.comparator),this.yc=new Map,this.Ic=new S1,this.Tc={},this.Ec=new Map,this.Ac=Oa.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return this.vc===!0}}async function F6(t,e){const n=K6(t);let r,i;const s=n.wc.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const o=await a6(n.localStore,vi(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await U6(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&qx(n.remoteStore,o)}return i}async function U6(t,e,n,r,i){t.Rc=(h,d,p)=>async function(g,_,w,y){let f=_.view.sc(w);f.zi&&(f=await i2(g.localStore,_.query,!1).then(({documents:C})=>_.view.sc(C,f)));const m=y&&y.targetChanges.get(_.targetId),E=_.view.applyChanges(f,g.isPrimaryClient,m);return c2(g,_.targetId,E.cc),E.snapshot}(t,h,d,p);const s=await i2(t.localStore,e,!0),o=new P6(e,s.ir),a=o.sc(s.documents),l=Ac.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);c2(t,n,u.cc);const c=new D6(e,n,o);return t.wc.set(e,c),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),u.snapshot}async function $6(t,e){const n=ce(t),r=n.wc.get(e),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter(s=>!Sp(s,e))),void n.wc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Jy(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Hx(n.remoteStore,r.targetId),e0(n,r.targetId)}).catch(bc)):(e0(n,r.targetId),await Jy(n.localStore,r.targetId,!0))}async function V6(t,e,n){const r=G6(t);try{const i=await function(s,o){const a=ce(s),l=Ze.now(),u=o.reduce((d,p)=>d.add(p.key),ye());let c,h;return a.persistence.runTransaction("Locally write mutations","readwrite",d=>{let p=_i(),g=ye();return a.Zi.getEntries(d,u).next(_=>{p=_,p.forEach((w,y)=>{y.isValidDocument()||(g=g.add(w))})}).next(()=>a.localDocuments.getOverlayedDocuments(d,p)).next(_=>{c=_;const w=[];for(const y of o){const f=fM(y,c.get(y.key).overlayedDocument);f!=null&&w.push(new Is(y.key,f,cx(f.value.mapValue),Zn.exists(!0)))}return a.mutationQueue.addMutationBatch(d,l,w,o)}).next(_=>{h=_;const w=_.applyToLocalDocumentSet(c,g);return a.documentOverlayCache.saveOverlays(d,_.batchId,w)})}).then(()=>({batchId:h.batchId,changes:wx(c)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let l=s.Tc[s.currentUser.toKey()];l||(l=new ot(xe)),l=l.insert(o,a),s.Tc[s.currentUser.toKey()]=l}(r,i.batchId,n),await Pc(r,i.changes),await Rp(r.remoteStore)}catch(i){const s=R1(i,"Failed to persist write");n.reject(s)}}async function eb(t,e){const n=ce(t);try{const r=await i6(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.yc.get(s);o&&(Ke(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.fc=!0:i.modifiedDocuments.size>0?Ke(o.fc):i.removedDocuments.size>0&&(Ke(o.fc),o.fc=!1))}),await Pc(n,r,e)}catch(r){await bc(r)}}function u2(t,e,n){const r=ce(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.wc.forEach((s,o)=>{const a=o.view.Mu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=ce(s);a.onlineState=o;let l=!1;a.queries.forEach((u,c)=>{for(const h of c.listeners)h.Mu(o)&&(l=!0)}),l&&O1(a)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function j6(t,e,n){const r=ce(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.yc.get(e),s=i&&i.key;if(s){let o=new ot(X.comparator);o=o.insert(s,Xt.newNoDocument(s,le.min()));const a=ye().add(s),l=new kp(le.min(),new Map,new ot(xe),o,a);await eb(r,l),r.gc=r.gc.remove(s),r.yc.delete(e),D1(r)}else await Jy(r.localStore,e,!1).then(()=>e0(r,e,n)).catch(bc)}async function z6(t,e){const n=ce(t),r=e.batch.batchId;try{const i=await r6(n.localStore,e);nb(n,r,null),tb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Pc(n,i)}catch(i){await bc(i)}}async function B6(t,e,n){const r=ce(t);try{const i=await function(s,o){const a=ce(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return a.mutationQueue.lookupMutationBatch(l,o).next(c=>(Ke(c!==null),u=c.keys(),a.mutationQueue.removeMutationBatch(l,c))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>a.localDocuments.getDocuments(l,u))})}(r.localStore,e);nb(r,e,n),tb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Pc(r,i)}catch(i){await bc(i)}}function tb(t,e){(t.Ec.get(e)||[]).forEach(n=>{n.resolve()}),t.Ec.delete(e)}function nb(t,e,n){const r=ce(t);let i=r.Tc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function e0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t._c.get(e))t.wc.delete(r),n&&t.dc.Pc(r,n);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach(r=>{t.Ic.containsKey(r)||rb(t,r)})}function rb(t,e){t.mc.delete(e.path.canonicalString());const n=t.gc.get(e);n!==null&&(Hx(t.remoteStore,n),t.gc=t.gc.remove(e),t.yc.delete(n),D1(t))}function c2(t,e,n){for(const r of n)r instanceof Xx?(t.Ic.addReference(r.key,e),W6(t,r)):r instanceof Jx?(Z("SyncEngine","Document no longer in limbo: "+r.key),t.Ic.removeReference(r.key,e),t.Ic.containsKey(r.key)||rb(t,r.key)):oe()}function W6(t,e){const n=e.key,r=n.path.canonicalString();t.gc.get(n)||t.mc.has(r)||(Z("SyncEngine","New document in limbo: "+n),t.mc.add(r),D1(t))}function D1(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const n=new X(Ve.fromString(e)),r=t.Ac.next();t.yc.set(r,new M6(n)),t.gc=t.gc.insert(n,r),qx(t.remoteStore,new qi(vi(wp(n.path)),r,"TargetPurposeLimboResolution",c1.ct))}}async function Pc(t,e,n){const r=ce(t),i=[],s=[],o=[];r.wc.isEmpty()||(r.wc.forEach((a,l)=>{o.push(r.Rc(l,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u!=null&&u.fromCache?"not-current":"current"),u){i.push(u);const c=T1.Li(l.targetId,u);s.push(c)}}))}),await Promise.all(o),r.dc.nu(i),await async function(a,l){const u=ce(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",c=>D.forEach(l,h=>D.forEach(h.Fi,d=>u.persistence.referenceDelegate.addReference(c,h.targetId,d)).next(()=>D.forEach(h.Bi,d=>u.persistence.referenceDelegate.removeReference(c,h.targetId,d)))))}catch(c){if(!Rc(c))throw c;Z("LocalStore","Failed to update sequence numbers: "+c)}for(const c of l){const h=c.targetId;if(!c.fromCache){const d=u.Ji.get(h),p=d.snapshotVersion,g=d.withLastLimboFreeSnapshotVersion(p);u.Ji=u.Ji.insert(h,g)}}}(r.localStore,s))}async function q6(t,e){const n=ce(t);if(!n.currentUser.isEqual(e)){Z("SyncEngine","User change. New user:",e.toKey());const r=await jx(n.localStore,e);n.currentUser=e,function(i,s){i.Ec.forEach(o=>{o.forEach(a=>{a.reject(new F(R.CANCELLED,s))})}),i.Ec.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Pc(n,r.er)}}function H6(t,e){const n=ce(t),r=n.yc.get(e);if(r&&r.fc)return ye().add(r.key);{let i=ye();const s=n._c.get(e);if(!s)return i;for(const o of s){const a=n.wc.get(o);i=i.unionWith(a.view.nc)}return i}}function K6(t){const e=ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=eb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=H6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=j6.bind(null,e),e.dc.nu=A6.bind(null,e.eventManager),e.dc.Pc=O6.bind(null,e.eventManager),e}function G6(t){const e=ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=z6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=B6.bind(null,e),e}class h2{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=xp(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return n6(this.persistence,new e6,e.initialUser,this.serializer)}createPersistence(e){return new XM(C1.zs,this.serializer)}createSharedClientState(e){return new u6}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Q6{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>u2(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=q6.bind(null,this.syncEngine),await b6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new N6}createDatastore(e){const n=xp(e.databaseInfo.databaseId),r=(i=e.databaseInfo,new f6(i));var i;return function(s,o,a,l){return new g6(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>u2(this.syncEngine,a,0),o=o2.D()?new o2:new c6,new v6(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,l,u){const c=new L6(r,i,s,o,a,l);return u&&(c.vc=!0),c}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=ce(e);Z("RemoteStore","RemoteStore shutting down."),n.vu.add(5),await Oc(n),n.Pu.shutdown(),n.bu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):yi("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Yt.UNAUTHENTICATED,this.clientId=ax.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{Z("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Z("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new F(R.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ai;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=R1(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function tg(t,e){t.asyncQueue.verifyOperationInProgress(),Z("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await jx(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function d2(t,e){t.asyncQueue.verifyOperationInProgress();const n=await X6(t);Z("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>a2(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>a2(e.remoteStore,s)),t._onlineComponents=e}function Z6(t){return t.name==="FirebaseError"?t.code===R.FAILED_PRECONDITION||t.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function X6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Z("FirestoreClient","Using user provided OfflineComponentProvider");try{await tg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!Z6(n))throw n;ka("Error using user provided cache. Falling back to memory cache: "+n),await tg(t,new h2)}}else Z("FirestoreClient","Using default OfflineComponentProvider"),await tg(t,new h2);return t._offlineComponents}async function ib(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Z("FirestoreClient","Using user provided OnlineComponentProvider"),await d2(t,t._uninitializedComponentsProvider._online)):(Z("FirestoreClient","Using default OnlineComponentProvider"),await d2(t,new Q6))),t._onlineComponents}function J6(t){return ib(t).then(e=>e.syncEngine)}async function Xd(t){const e=await ib(t),n=e.eventManager;return n.onListen=F6.bind(null,e.syncEngine),n.onUnlisten=$6.bind(null,e.syncEngine),n}function e8(t,e,n={}){const r=new ai;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,l){const u=new M1({next:h=>{s.enqueueAndForget(()=>A1(i,c));const d=h.docs.has(o);!d&&h.fromCache?l.reject(new F(R.UNAVAILABLE,"Failed to get document because the client is offline.")):d&&h.fromCache&&a&&a.source==="server"?l.reject(new F(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),c=new P1(wp(o.path),u,{includeMetadataChanges:!0,Ku:!0});return N1(i,c)}(await Xd(t),t.asyncQueue,e,n,r)),r.promise}function t8(t,e,n={}){const r=new ai;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,l){const u=new M1({next:h=>{s.enqueueAndForget(()=>A1(i,c)),h.fromCache&&a.source==="server"?l.reject(new F(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),c=new P1(o,u,{includeMetadataChanges:!0,Ku:!0});return N1(i,c)}(await Xd(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(t,e,n){if(!n)throw new F(R.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function n8(t,e,n,r){if(e===!0&&r===!0)throw new F(R.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function p2(t){if(!X.isDocumentKey(t))throw new F(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function m2(t){if(X.isDocumentKey(t))throw new F(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Np(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe()}function Rn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new F(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Np(t);throw new F(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function r8(t,e){if(e<=0)throw new F(R.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new F(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new F(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}n8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sb((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new F(R.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new F(R.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new F(R.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(n=this.experimentalLongPollingOptions,r=e.experimentalLongPollingOptions,n.timeoutSeconds===r.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var n,r}}class Ap{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new g2({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new F(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new F(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new g2(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new k3;switch(n.type){case"firstParty":return new N3(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new F(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=f2.get(e);n&&(Z("ComponentProvider","Removing Datastore"),f2.delete(e),n.terminate())}(this),Promise.resolve()}}function i8(t,e,n,r={}){var i;const s=(t=Rn(t,Ap))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ka("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Yt.MOCK_USER;else{a=QI(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new F(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Yt(u)}t._authCredentials=new x3(new ox(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ss(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new an(this.firestore,e,this._key)}}class qr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new qr(this.firestore,e,this._query)}}class ss extends qr{constructor(e,n,r){super(e,n,wp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new an(this.firestore,null,new X(e))}withConverter(e){return new ss(this.firestore,e,this._path)}}function el(t,e,...n){if(t=Xe(t),ob("collection","path",e),t instanceof Ap){const r=Ve.fromString(e,...n);return m2(r),new ss(t,null,r)}{if(!(t instanceof an||t instanceof ss))throw new F(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ve.fromString(e,...n));return m2(r),new ss(t.firestore,null,r)}}function it(t,e,...n){if(t=Xe(t),arguments.length===1&&(e=ax.A()),ob("doc","path",e),t instanceof Ap){const r=Ve.fromString(e,...n);return p2(r),new an(t,null,new X(r))}{if(!(t instanceof an||t instanceof ss))throw new F(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ve.fromString(e,...n));return p2(r),new an(t.firestore,t instanceof ss?t.converter:null,new X(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Bx(this,"async_queue_retry"),this.Xc=()=>{const n=eg();n&&Z("AsyncQueue","Visibility state changed to "+n.visibilityState),this.qo.Mo()};const e=eg();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const n=eg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const n=new ai;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(this.Qc.length!==0){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!Rc(e))throw e;Z("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const n=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{this.Wc=r,this.Hc=!1;const i=function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),o}(r);throw yi("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Hc=!1,r))));return this.Gc=n,n}enqueueAfterDelay(e,n,r){this.Zc(),this.Yc.indexOf(e)>-1&&(n=0);const i=b1.createAndSchedule(this,e,n,r,s=>this.na(s));return this.zc.push(i),i}Zc(){this.Wc&&oe()}verifyOperationInProgress(){}async sa(){let e;do e=this.Gc,await e;while(e!==this.Gc)}ia(e){for(const n of this.zc)if(n.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.zc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const n=this.zc.indexOf(e);this.zc.splice(n,1)}}function y2(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const i of n)if(i in r&&typeof r[i]=="function")return!0;return!1}(t,["next","error","complete"])}class wi extends Ap{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new s8,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||ab(this),this._firestoreClient.terminate()}}function o8(t,e){const n=typeof t=="object"?t:Vv(),r=typeof t=="string"?t:e||"(default)",i=np(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=HI("firestore");s&&i8(i,...s)}return i}function Op(t){return t._firestoreClient||ab(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function ab(t){var e,n,r;const i=t._freezeSettings(),s=function(o,a,l,u){return new z3(o,a,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,sb(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Y6(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.cache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.cache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Da(cn.fromBase64String(e))}catch(n){throw new F(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Da(cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new F(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new F(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new F(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a8=/^__.*__$/;class l8{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Is(e,this.data,this.fieldMask,n,this.fieldTransforms):new Nc(e,this.data,n,this.fieldTransforms)}}class lb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Is(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function ub(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe()}}class Dp{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Dp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Jd(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(e.length===0)throw this._a("Document fields must not be empty");if(ub(this.ca)&&a8.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class u8{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||xp(e)}ya(e,n,r,i=!1){return new Dp({ca:e,methodName:n,ga:r,path:tn.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mc(t){const e=t._freezeSettings(),n=xp(t._databaseId);return new u8(t._databaseId,!!e.ignoreUndefinedProperties,n)}function cb(t,e,n,r,i,s={}){const o=t.ya(s.merge||s.mergeFields?2:0,e,n,i);F1("Data must be an object, but it was:",o,r);const a=db(r,o);let l,u;if(s.merge)l=new Pn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const h of s.mergeFields){const d=t0(e,h,n);if(!o.contains(d))throw new F(R.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);pb(c,d)||c.push(d)}l=new Pn(c),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new l8(new Cn(a),l,u)}class Mp extends Dc{_toFieldTransform(e){if(e.ca!==2)throw e.ca===1?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Mp}}function c8(t,e,n){return new Dp({ca:3,ga:e.settings.ga,methodName:t._methodName,la:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class h8 extends Dc{constructor(e,n){super(e),this.pa=n}_toFieldTransform(e){const n=c8(this,e,!0),r=this.pa.map(s=>tl(s,n)),i=new Aa(r);return new Rx(e.path,i)}isEqual(e){return this===e}}class d8 extends Dc{constructor(e,n){super(e),this.Ia=n}_toFieldTransform(e){const n=new Hu(e.serializer,Tx(e.serializer,this.Ia));return new Rx(e.path,n)}isEqual(e){return this===e}}function f8(t,e,n,r){const i=t.ya(1,e,n);F1("Data must be an object, but it was:",i,r);const s=[],o=Cn.empty();So(r,(l,u)=>{const c=U1(e,l,n);u=Xe(u);const h=i.da(c);if(u instanceof Mp)s.push(c);else{const d=tl(u,h);d!=null&&(s.push(c),o.set(c,d))}});const a=new Pn(s);return new lb(o,a,i.fieldTransforms)}function p8(t,e,n,r,i,s){const o=t.ya(1,e,n),a=[t0(e,r,n)],l=[i];if(s.length%2!=0)throw new F(R.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(t0(e,s[d])),l.push(s[d+1]);const u=[],c=Cn.empty();for(let d=a.length-1;d>=0;--d)if(!pb(u,a[d])){const p=a[d];let g=l[d];g=Xe(g);const _=o.da(p);if(g instanceof Mp)u.push(p);else{const w=tl(g,_);w!=null&&(u.push(p),c.set(p,w))}}const h=new Pn(u);return new lb(c,h,o.fieldTransforms)}function hb(t,e,n,r=!1){return tl(n,t.ya(r?4:3,e))}function tl(t,e){if(fb(t=Xe(t)))return F1("Unsupported field value:",e,t),db(t,e);if(t instanceof Dc)return function(n,r){if(!ub(r.ca))throw r._a(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&e.ca!==4)throw e._a("Nested arrays are not supported");return function(n,r){const i=[];let s=0;for(const o of n){let a=tl(o,r.wa(s));a==null&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if((n=Xe(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Tx(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Ze.fromDate(n);return{timestampValue:Yd(r.serializer,i)}}if(n instanceof Ze){const i=new Ze(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Yd(r.serializer,i)}}if(n instanceof L1)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Da)return{bytesValue:Mx(r.serializer,n._byteString)};if(n instanceof an){const i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:E1(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r._a(`Unsupported field value: ${Np(n)}`)}(t,e)}function db(t,e){const n={};return lx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):So(t,(r,i)=>{const s=tl(i,e.ha(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function fb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ze||t instanceof L1||t instanceof Da||t instanceof an||t instanceof Dc)}function F1(t,e,n){if(!fb(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=Np(n);throw r==="an object"?e._a(t+" a custom object"):e._a(t+" "+r)}}function t0(t,e,n){if((e=Xe(e))instanceof Pp)return e._internalPath;if(typeof e=="string")return U1(t,e);throw Jd("Field path arguments must be of type string or ",t,!1,void 0,n)}const m8=new RegExp("[~\\*/\\[\\]]");function U1(t,e,n){if(e.search(m8)>=0)throw Jd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Pp(...e.split("."))._internalPath}catch{throw Jd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Jd(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new F(R.INVALID_ARGUMENT,a+t+l)}function pb(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new an(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new g8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Lp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class g8 extends $1{data(){return super.data()}}function Lp(t,e){return typeof e=="string"?U1(t,e):e instanceof Pp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mb(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new F(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class V1{}class Fp extends V1{}function Ma(t,e,...n){let r=[];e instanceof V1&&r.push(e),r=r.concat(n),function(i){const s=i.filter(a=>a instanceof j1).length,o=i.filter(a=>a instanceof Up).length;if(s>1||s>0&&o>0)throw new F(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Up extends Fp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Up(e,n,r)}_apply(e){const n=this._parse(e);return yb(e._query,n),new qr(e.firestore,e.converter,Ky(e._query,n))}_parse(e){const n=Mc(e.firestore);return function(i,s,o,a,l,u,c){let h;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new F(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){w2(c,u);const d=[];for(const p of c)d.push(_2(a,i,p));h={arrayValue:{values:d}}}else h=_2(a,i,c)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||w2(c,u),h=hb(o,s,c,u==="in"||u==="not-in");return wt.create(l,u,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function gb(t,e,n){const r=e,i=Lp("where",t);return Up._create(i,r,n)}class j1 extends V1{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new j1(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Er.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let s=r;const o=i.getFlattenedFilters();for(const a of o)yb(s,a),s=Ky(s,a)}(e._query,n),new qr(e.firestore,e.converter,Ky(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class z1 extends Fp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new z1(e,n)}_apply(e){const n=function(r,i,s){if(r.startAt!==null)throw new F(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new F(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new la(i,s);return function(a,l){if(m1(a)===null){const u=Ep(a);u!==null&&vb(a,u,l.field)}}(r,o),o}(e._query,this._field,this._direction);return new qr(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new Co(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function ef(t,e="asc"){const n=e,r=Lp("orderBy",t);return z1._create(r,n)}class B1 extends Fp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new B1(e,n,r)}_apply(e){return new qr(e.firestore,e.converter,Gd(e._query,this._limit,this._limitType))}}function v2(t){return r8("limit",t),B1._create("limit",t,"F")}class W1 extends Fp{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new W1(e,n,r)}_apply(e){const n=v8(e,this.type,this._docOrFields,this._inclusive);return new qr(e.firestore,e.converter,function(r,i){return new Co(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)}(e._query,n))}}function y8(...t){return W1._create("startAfter",t,!1)}function v8(t,e,n,r){if(n[0]=Xe(n[0]),n[0]instanceof $1)return function(i,s,o,a,l){if(!a)throw new F(R.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const u=[];for(const c of Ks(i))if(c.field.isKeyField())u.push(Kd(s,a.key));else{const h=a.data.field(c.field);if(_p(h))throw new F(R.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+c.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const d=c.field.canonicalString();throw new F(R.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${d}' (used as the orderBy) does not exist.`)}u.push(h)}return new Na(u,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Mc(t.firestore);return function(s,o,a,l,u,c){const h=s.explicitOrderBy;if(u.length>h.length)throw new F(R.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const d=[];for(let p=0;p<u.length;p++){const g=u[p];if(h[p].field.isKeyField()){if(typeof g!="string")throw new F(R.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof g}`);if(!g1(s)&&g.indexOf("/")!==-1)throw new F(R.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${g}' contains a slash.`);const _=s.path.child(Ve.fromString(g));if(!X.isDocumentKey(_))throw new F(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${_}' is not because it contains an odd number of segments.`);const w=new X(_);d.push(Kd(o,w))}else{const _=hb(a,l,g);d.push(_)}}return new Na(d,c)}(t._query,t.firestore._databaseId,i,e,n,r)}}function _2(t,e,n){if(typeof(n=Xe(n))=="string"){if(n==="")throw new F(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!g1(e)&&n.indexOf("/")!==-1)throw new F(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ve.fromString(n));if(!X.isDocumentKey(r))throw new F(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Kd(t,new X(r))}if(n instanceof an)return Kd(t,n._key);throw new F(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Np(n)}.`)}function w2(t,e){if(!Array.isArray(t)||t.length===0)throw new F(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yb(t,e){if(e.isInequality()){const r=Ep(t),i=e.field;if(r!==null&&!r.isEqual(i))throw new F(R.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=m1(t);s!==null&&vb(t,i,s)}const n=function(r,i){for(const s of r)for(const o of s.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new F(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new F(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function vb(t,e,n){if(!n.isEqual(e))throw new F(R.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class _8{convertValue(e,n="none"){switch(oo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(so(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw oe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return So(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new L1(vt(e.latitude),vt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=h1(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(zu(e));default:return null}}convertTimestamp(e){const n=ds(e);return new Ze(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ve.fromString(e);Ke(Vx(r));const i=new Bu(r.get(1),r.get(3)),s=new X(r.popFirst(5));return i.isEqual(n)||yi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wb extends $1{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Xh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Lp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Xh extends wb{data(e={}){return super.data(e)}}class Eb{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Bl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Xh(this._firestore,this._userDataWriter,r.key,r,new Bl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>{const a=new Xh(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Bl(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const a=new Xh(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Bl(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let l=-1,u=-1;return o.type!==0&&(l=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),u=s.indexOf(o.doc.key)),{type:w8(o.type),doc:a,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function w8(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(t){t=Rn(t,an);const e=Rn(t.firestore,wi);return e8(Op(e),t._key).then(n=>Sb(e,t,n))}class q1 extends _8{constructor(e){super(),this.firestore=e}convertBytes(e){return new Da(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new an(this.firestore,null,n)}}function $p(t){t=Rn(t,qr);const e=Rn(t.firestore,wi),n=Op(e),r=new q1(e);return mb(t._query),t8(n,t._query).then(i=>new Eb(e,r,t,i))}function E8(t,e,n){t=Rn(t,an);const r=Rn(t.firestore,wi),i=_b(t.converter,e,n);return jp(r,[cb(Mc(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Zn.none())])}function os(t,e,n,...r){t=Rn(t,an);const i=Rn(t.firestore,wi),s=Mc(i);let o;return o=typeof(e=Xe(e))=="string"||e instanceof Pp?p8(s,"updateDoc",t._key,e,n,r):f8(s,"updateDoc",t._key,e),jp(i,[o.toMutation(t._key,Zn.exists(!0))])}function S8(t){return jp(Rn(t.firestore,wi),[new y1(t._key,Zn.none())])}function Vp(t,e){const n=Rn(t.firestore,wi),r=it(t),i=_b(t.converter,e);return jp(n,[cb(Mc(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Zn.exists(!1))]).then(()=>r)}function C8(t,...e){var n,r,i;t=Xe(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||y2(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(y2(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let l,u,c;if(t instanceof an)u=Rn(t.firestore,wi),c=wp(t._key.path),l={next:h=>{e[o]&&e[o](Sb(u,t,h))},error:e[o+1],complete:e[o+2]};else{const h=Rn(t,qr);u=Rn(h.firestore,wi),c=h._query;const d=new q1(u);l={next:p=>{e[o]&&e[o](new Eb(u,d,h,p))},error:e[o+1],complete:e[o+2]},mb(t._query)}return function(h,d,p,g){const _=new M1(g),w=new P1(d,_,p);return h.asyncQueue.enqueueAndForget(async()=>N1(await Xd(h),w)),()=>{_.Dc(),h.asyncQueue.enqueueAndForget(async()=>A1(await Xd(h),w))}}(Op(u),c,a,l)}function jp(t,e){return function(n,r){const i=new ai;return n.asyncQueue.enqueueAndForget(async()=>V6(await J6(n),r,i)),i.promise}(Op(t),e)}function Sb(t,e,n){const r=n.docs.get(e._key),i=new q1(t);return new wb(t,i,e._key,r,new Bl(n.hasPendingWrites,n.fromCache),e.converter)}function zp(...t){return new h8("arrayUnion",t)}function ng(t){return new d8("increment",t)}(function(t,e=!0){(function(n){Za=n})(Ss),cs(new mi("firestore",(n,{instanceIdentifier:r,options:i})=>{const s=n.getProvider("app").getImmediate(),o=new wi(new b3(n.getProvider("auth-internal")),new O3(n.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new F(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bu(a.options.projectId,l)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Yn(FE,"3.13.0",t),Yn(FE,"3.13.0","esm2017")})();var T8="firebase",I8="9.23.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yn(T8,I8,"app");const k8={apiKey:"AIzaSyDgVcY5k8S0SYON7J_4TTB6hmE1iDVv_so",authDomain:"book-community-8cbb7.firebaseapp.com",projectId:"book-community-8cbb7",storageBucket:"book-community-8cbb7.appspot.com",messagingSenderId:"432592952832",appId:"1:432592952832:web:06069995b8179cf80a02e5"},H1=tk(k8);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb="firebasestorage.googleapis.com",Tb="storageBucket",x8=2*60*1e3,b8=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt extends Wr{constructor(e,n,r=0){super(rg(e),`Firebase Storage: ${n} (${rg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,dt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return rg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ht;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ht||(ht={}));function rg(t){return"storage/"+t}function K1(){const t="An unknown error occurred, please check the error payload for server response.";return new dt(ht.UNKNOWN,t)}function R8(t){return new dt(ht.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function N8(t){return new dt(ht.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function A8(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new dt(ht.UNAUTHENTICATED,t)}function O8(){return new dt(ht.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function P8(t){return new dt(ht.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function D8(){return new dt(ht.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function M8(){return new dt(ht.CANCELED,"User canceled the upload/download.")}function L8(t){return new dt(ht.INVALID_URL,"Invalid URL '"+t+"'.")}function F8(t){return new dt(ht.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function U8(){return new dt(ht.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Tb+"' property when initializing the app?")}function $8(){return new dt(ht.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function V8(){return new dt(ht.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function j8(t){return new dt(ht.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function n0(t){return new dt(ht.INVALID_ARGUMENT,t)}function Ib(){return new dt(ht.APP_DELETED,"The Firebase app was deleted.")}function z8(t){return new dt(ht.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function iu(t,e){return new dt(ht.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function kl(t){throw new dt(ht.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Dn.makeFromUrl(e,n)}catch{return new Dn(e,"")}if(r.path==="")return r;throw F8(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(E){E.path_=decodeURIComponent(E.path)}const c="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",p=new RegExp(`^https?://${h}/${c}/b/${i}/o${d}`,"i"),g={bucket:1,path:3},_=n===Cb?"(?:storage.googleapis.com|storage.cloud.google.com)":n,w="([^?#]*)",y=new RegExp(`^https?://${_}/${i}/${w}`,"i"),m=[{regex:a,indices:l,postModify:s},{regex:p,indices:g,postModify:u},{regex:y,indices:{bucket:1,path:2},postModify:u}];for(let E=0;E<m.length;E++){const C=m[E],T=C.regex.exec(e);if(T){const b=T[C.indices.bucket];let k=T[C.indices.path];k||(k=""),r=new Dn(b,k),C.postModify(r);break}}if(r==null)throw L8(e);return r}}class B8{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W8(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function c(...w){u||(u=!0,e.apply(null,w))}function h(w){i=setTimeout(()=>{i=null,t(p,l())},w)}function d(){s&&clearTimeout(s)}function p(w,...y){if(u){d();return}if(w){d(),c.call(null,w,...y);return}if(l()||o){d(),c.call(null,w,...y);return}r<64&&(r*=2);let m;a===1?(a=2,m=0):m=(r+Math.random())*1e3,h(m)}let g=!1;function _(w){g||(g=!0,d(),!u&&(i!==null?(w||(a=2),clearTimeout(i),h(0)):w||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,_(!0)},n),_}function q8(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H8(t){return t!==void 0}function K8(t){return typeof t=="object"&&!Array.isArray(t)}function G1(t){return typeof t=="string"||t instanceof String}function E2(t){return Q1()&&t instanceof Blob}function Q1(){return typeof Blob<"u"&&!X5()}function S2(t,e,n,r){if(r<e)throw n0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw n0(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function kb(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gs;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Gs||(Gs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G8(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q8{constructor(e,n,r,i,s,o,a,l,u,c,h,d=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=h,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,g)=>{this.resolve_=p,this.reject_=g,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new xh(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Gs.NO_ERROR,l=s.getStatus();if(!a||G8(l,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===Gs.ABORT;r(!1,new xh(!1,null,c));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new xh(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());H8(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=K1();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?Ib():M8();o(l)}else{const l=D8();o(l)}};this.canceled_?n(!1,new xh(!1,null,!0)):this.backoffId_=W8(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&q8(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class xh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Y8(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Z8(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function X8(t,e){e&&(t["X-Firebase-GMPID"]=e)}function J8(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function eL(t,e,n,r,i,s,o=!0){const a=kb(t.urlParams),l=t.url+a,u=Object.assign({},t.headers);return X8(u,e),Y8(u,n),Z8(u,s),J8(u,r),new Q8(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tL(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function nL(...t){const e=tL();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Q1())return new Blob(t);throw new dt(ht.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function rL(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iL(t){if(typeof atob>"u")throw j8("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ig{constructor(e,n){this.data=e,this.contentType=n||null}}function sL(t,e){switch(t){case Ar.RAW:return new ig(xb(e));case Ar.BASE64:case Ar.BASE64URL:return new ig(bb(t,e));case Ar.DATA_URL:return new ig(aL(e),lL(e))}throw K1()}function xb(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function oL(t){let e;try{e=decodeURIComponent(t)}catch{throw iu(Ar.DATA_URL,"Malformed data URL.")}return xb(e)}function bb(t,e){switch(t){case Ar.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw iu(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ar.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw iu(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=iL(e)}catch(i){throw i.message.includes("polyfill")?i:iu(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class Rb{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw iu(Ar.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=uL(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function aL(t){const e=new Rb(t);return e.base64?bb(Ar.BASE64,e.rest):oL(e.rest)}function lL(t){return new Rb(t).contentType}function uL(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e,n){let r=0,i="";E2(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(E2(this.data_)){const r=this.data_,i=rL(r,e,n);return i===null?null:new Li(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Li(r,!0)}}static getBlob(...e){if(Q1()){const n=e.map(r=>r instanceof Li?r.data_:r);return new Li(nL.apply(null,n))}else{const n=e.map(o=>G1(o)?sL(Ar.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Li(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nb(t){let e;try{e=JSON.parse(t)}catch{return null}return K8(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cL(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function hL(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function Ab(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dL(t,e){return e}class dn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||dL}}let bh=null;function fL(t){return!G1(t)||t.length<2?t:Ab(t)}function Ob(){if(bh)return bh;const t=[];t.push(new dn("bucket")),t.push(new dn("generation")),t.push(new dn("metageneration")),t.push(new dn("name","fullPath",!0));function e(s,o){return fL(o)}const n=new dn("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new dn("size");return i.xform=r,t.push(i),t.push(new dn("timeCreated")),t.push(new dn("updated")),t.push(new dn("md5Hash",null,!0)),t.push(new dn("cacheControl",null,!0)),t.push(new dn("contentDisposition",null,!0)),t.push(new dn("contentEncoding",null,!0)),t.push(new dn("contentLanguage",null,!0)),t.push(new dn("contentType",null,!0)),t.push(new dn("metadata","customMetadata",!0)),bh=t,bh}function pL(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Dn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function mL(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return pL(r,t),r}function Pb(t,e,n){const r=Nb(e);return r===null?null:mL(t,r,n)}function gL(t,e,n,r){const i=Nb(e);if(i===null||!G1(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const c=t.bucket,h=t.fullPath,d="/b/"+o(c)+"/o/"+o(h),p=Y1(d,n,r),g=kb({alt:"media",token:u});return p+g})[0]}function yL(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class Db{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(t){if(!t)throw K1()}function vL(t,e){function n(r,i){const s=Pb(t,i,e);return Mb(s!==null),s}return n}function _L(t,e){function n(r,i){const s=Pb(t,i,e);return Mb(s!==null),gL(s,i,t.host,t._protocol)}return n}function Lb(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=O8():i=A8():n.getStatus()===402?i=N8(t.bucket):n.getStatus()===403?i=P8(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function wL(t){const e=Lb(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=R8(t.path)),s.serverResponse=i.serverResponse,s}return n}function EL(t,e,n){const r=e.fullServerUrl(),i=Y1(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new Db(i,s,_L(t,n),o);return a.errorHandler=wL(e),a}function SL(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function CL(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=SL(null,e)),r}function TL(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let m="";for(let E=0;E<2;E++)m=m+Math.random().toString().slice(2);return m}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=CL(e,r,i),c=yL(u,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,d=`\r
--`+l+"--",p=Li.getBlob(h,r,d);if(p===null)throw $8();const g={name:u.fullPath},_=Y1(s,t.host,t._protocol),w="POST",y=t.maxUploadRetryTime,f=new Db(_,w,vL(t,n),y);return f.urlParams=g,f.headers=o,f.body=p.uploadData(),f.errorHandler=Lb(e),f}class IL{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Gs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Gs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Gs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw kl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw kl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw kl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw kl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw kl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class kL extends IL{initXhr(){this.xhr_.responseType="text"}}function Fb(){return new kL}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,n){this._service=e,n instanceof Dn?this._location=n:this._location=Dn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ao(e,n)}get root(){const e=new Dn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Ab(this._location.path)}get storage(){return this._service}get parent(){const e=cL(this._location.path);if(e===null)return null;const n=new Dn(this._location.bucket,e);return new ao(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw z8(e)}}function xL(t,e,n){t._throwIfRoot("uploadBytes");const r=TL(t.storage,t._location,Ob(),new Li(e,!0),n);return t.storage.makeRequestWithTokens(r,Fb).then(i=>({metadata:i,ref:t}))}function bL(t){t._throwIfRoot("getDownloadURL");const e=EL(t.storage,t._location,Ob());return t.storage.makeRequestWithTokens(e,Fb).then(n=>{if(n===null)throw V8();return n})}function RL(t,e){const n=hL(t._location.path,e),r=new Dn(t._location.bucket,n);return new ao(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NL(t){return/^[A-Za-z]+:\/\//.test(t)}function AL(t,e){return new ao(t,e)}function Ub(t,e){if(t instanceof Z1){const n=t;if(n._bucket==null)throw U8();const r=new ao(n,n._bucket);return e!=null?Ub(r,e):r}else return e!==void 0?RL(t,e):t}function OL(t,e){if(e&&NL(e)){if(t instanceof Z1)return AL(t,e);throw n0("To use ref(service, url), the first argument must be a Storage instance.")}else return Ub(t,e)}function C2(t,e){const n=e==null?void 0:e[Tb];return n==null?null:Dn.makeFromBucketSpec(n,t)}function PL(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:QI(i,t.app.options.projectId))}class Z1{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Cb,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=x8,this._maxUploadRetryTime=b8,this._requests=new Set,i!=null?this._bucket=Dn.makeFromBucketSpec(i,this._host):this._bucket=C2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Dn.makeFromBucketSpec(this._url,e):this._bucket=C2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){S2("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){S2("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ao(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new B8(Ib());{const o=eL(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const T2="@firebase/storage",I2="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b="storage";function Vb(t,e,n){return t=Xe(t),xL(t,e,n)}function jb(t){return t=Xe(t),bL(t)}function zb(t,e){return t=Xe(t),OL(t,e)}function DL(t=Vv(),e){t=Xe(t);const r=np(t,$b).getImmediate({identifier:e}),i=HI("storage");return i&&ML(r,...i),r}function ML(t,e,n,r={}){PL(t,e,n,r)}function LL(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Z1(n,r,i,e,Ss)}function FL(){cs(new mi($b,LL,"PUBLIC").setMultipleInstances(!0)),Yn(T2,I2,""),Yn(T2,I2,"esm2017")}FL();const Me=o8(H1),Bb=DL(H1);function X1(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function nl(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})}function rl(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(n=0)),n;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){n.label=u[1];break}if(u[0]===6&&n.label<s[1]){n.label=s[1],s=u;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(u);break}s[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(c){u=[6,c],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function k2(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function x2(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function Wb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const UL=Wb,qb=new vc("auth","Firebase",Wb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf=new tp("@firebase/auth");function $L(t,...e){tf.logLevel<=Te.WARN&&tf.warn(`Auth (${Ss}): ${t}`,...e)}function Jh(t,...e){tf.logLevel<=Te.ERROR&&tf.error(`Auth (${Ss}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(t,...e){throw J1(t,...e)}function $r(t,...e){return J1(t,...e)}function VL(t,e,n){const r=Object.assign(Object.assign({},UL()),{[e]:n});return new vc("auth","Firebase",r).create(e,{appName:t.name})}function J1(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return qb.create(t,...e)}function se(t,e,...n){if(!t)throw J1(e,...n)}function ri(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Jh(e),new Error(e)}function Ei(t,e){t||ri(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function jL(){return b2()==="http:"||b2()==="https:"}function b2(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jL()||J5()||"connection"in navigator)?navigator.onLine:!0}function BL(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ei(n>e,"Short delay should be less than long delay!"),this.isMobile=Uv()||YI()}get(){return zL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e_(t,e){Ei(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;ri("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;ri("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;ri("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL=new Lc(3e4,6e4);function il(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function sl(t,e,n,r,i={}){return Kb(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Ga(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),Hb.fetch()(Gb(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function Kb(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},WL),e);try{const i=new HL(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Rh(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rh(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Rh(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Rh(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw VL(t,c,u);Sr(t,c)}}catch(i){if(i instanceof Wr)throw i;Sr(t,"network-request-failed",{message:String(i)})}}async function Fc(t,e,n,r,i={}){const s=await sl(t,e,n,r,i);return"mfaPendingCredential"in s&&Sr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function Gb(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?e_(t.config,i):`${t.config.apiScheme}://${i}`}class HL{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r($r(this.auth,"network-request-failed")),qL.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=$r(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KL(t,e){return sl(t,"POST","/v1/accounts:delete",e)}async function GL(t,e){return sl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function QL(t,e=!1){const n=Xe(t),r=await n.getIdToken(e),i=t_(r);se(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:su(sg(i.auth_time)),issuedAtTime:su(sg(i.iat)),expirationTime:su(sg(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function sg(t){return Number(t)*1e3}function t_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Jh("JWT malformed, contained fewer than 3 sections"),null;try{const i=Md(n);return i?JSON.parse(i):(Jh("Failed to decode base64 JWT payload"),null)}catch(i){return Jh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function YL(t){const e=t_(t);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ku(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Wr&&ZL(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function ZL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=su(this.lastLoginAt),this.creationTime=su(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nf(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Ku(t,GL(n,{idToken:r}));se(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?t7(s.providerUserInfo):[],a=e7(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Qb(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function JL(t){const e=Xe(t);await nf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function e7(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function t7(t){return t.map(e=>{var{providerId:n}=e,r=X1(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n7(t,e){const n=await Kb(t,{},async()=>{const r=Ga({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=Gb(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Hb.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):YL(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return se(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await n7(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Gu;return r&&(se(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(se(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(se(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Gu,this.toJSON())}_performRefresh(){return ri("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(t,e){se(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Qs{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=X1(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new XL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Qb(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ku(this,this.stsTokenManager.getToken(this.auth,e));return se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return QL(this,e)}reload(){return JL(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Qs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await nf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Ku(this,KL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,c;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,p=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(a=n.tenantId)!==null&&a!==void 0?a:void 0,w=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,y=(u=n.createdAt)!==null&&u!==void 0?u:void 0,f=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:m,emailVerified:E,isAnonymous:C,providerData:T,stsTokenManager:b}=n;se(m&&b,e,"internal-error");const k=Gu.fromJSON(this.name,b);se(typeof m=="string",e,"internal-error"),bi(h,e.name),bi(d,e.name),se(typeof E=="boolean",e,"internal-error"),se(typeof C=="boolean",e,"internal-error"),bi(p,e.name),bi(g,e.name),bi(_,e.name),bi(w,e.name),bi(y,e.name),bi(f,e.name);const H=new Qs({uid:m,auth:e,email:d,emailVerified:E,displayName:h,isAnonymous:C,photoURL:g,phoneNumber:p,tenantId:_,stsTokenManager:k,createdAt:y,lastLoginAt:f});return T&&Array.isArray(T)&&(H.providerData=T.map(Y=>Object.assign({},Y))),w&&(H._redirectEventId=w),H}static async _fromIdTokenResponse(e,n,r=!1){const i=new Gu;i.updateFromServerResponse(n);const s=new Qs({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await nf(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2=new Map;function ii(t){Ei(t instanceof Function,"Expected a class definition");let e=R2.get(t);return e?(Ei(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,R2.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Yb.type="NONE";const N2=Yb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(t,e,n){return`firebase:${t}:${e}:${n}`}class ca{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=ed(this.userKey,i.apiKey,s),this.fullPersistenceKey=ed("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Qs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ca(ii(N2),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||ii(N2);const o=ed(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){const h=Qs._fromJSON(e,c);u!==s&&(a=h),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new ca(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new ca(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A2(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Jb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Zb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tR(e))return"Blackberry";if(nR(e))return"Webos";if(n_(e))return"Safari";if((e.includes("chrome/")||Xb(e))&&!e.includes("edge/"))return"Chrome";if(eR(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Zb(t=un()){return/firefox\//i.test(t)}function n_(t=un()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Xb(t=un()){return/crios\//i.test(t)}function Jb(t=un()){return/iemobile/i.test(t)}function eR(t=un()){return/android/i.test(t)}function tR(t=un()){return/blackberry/i.test(t)}function nR(t=un()){return/webos/i.test(t)}function Bp(t=un()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function r7(t=un()){var e;return Bp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function i7(){return eP()&&document.documentMode===10}function rR(t=un()){return Bp(t)||eR(t)||nR(t)||tR(t)||/windows phone/i.test(t)||Jb(t)}function s7(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(t,e=[]){let n;switch(t){case"Browser":n=A2(un());break;case"Worker":n=`${A2(un())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ss}/${r}`}async function sR(t,e){return sl(t,"GET","/v2/recaptchaConfig",il(t,e))}function O2(t){return t!==void 0&&t.enterprise!==void 0}class oR{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o7(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function aR(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=$r("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",o7().appendChild(r)})}function a7(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const l7="https://www.google.com/recaptcha/enterprise.js?render=",u7="recaptcha-enterprise",c7="NO_RECAPTCHA";class lR{constructor(e){this.type=u7,this.auth=ol(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{sR(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new oR(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;O2(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(c7)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&O2(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}aR(l7+a).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})}}async function rf(t,e,n,r=!1){const i=new lR(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h7{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d7{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new P2(this),this.idTokenSubscription=new P2(this),this.beforeStateQueue=new h7(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ii(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await ca.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await nf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=BL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Xe(e):null;return n&&se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(ii(e))})}async initializeRecaptchaConfig(){const e=await sR(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new oR(e);this.tenantId==null?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new lR(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new vc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ii(e)||this._popupRedirectResolver;se(n,this,"argument-error"),this.redirectPersistenceManager=await ca.create(this,[ii(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return se(o,this,"internal-error"),o.then(()=>s(this.currentUser)),typeof n=="function"?e.addObserver(n,r,i):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=iR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&$L(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ol(t){return Xe(t)}class P2{constructor(e){this.auth=e,this.observer=null,this.addObserver=uP(n=>this.observer=n)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f7(t,e){const n=np(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Fd(s,e??{}))return i;Sr(i,"already-initialized")}return n.initialize({options:e})}function p7(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ii);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function m7(t,e,n){const r=ol(t);se(r._canInitEmulator,r,"emulator-config-failed"),se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=uR(e),{host:o,port:a}=g7(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||y7()}function uR(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function g7(t){const e=uR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:D2(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:D2(o)}}}function D2(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function y7(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ri("not implemented")}_getIdTokenResponse(e){return ri("not implemented")}_linkToIdToken(e,n){return ri("not implemented")}_getReauthenticationResolver(e){return ri("not implemented")}}async function v7(t,e){return sl(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function og(t,e){return Fc(t,"POST","/v1/accounts:signInWithPassword",il(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _7(t,e){return Fc(t,"POST","/v1/accounts:signInWithEmailLink",il(t,e))}async function w7(t,e){return Fc(t,"POST","/v1/accounts:signInWithEmailLink",il(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu extends r_{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Qu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Qu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){var n;switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((n=e._getRecaptchaConfig())===null||n===void 0)&&n.emailPasswordEnabled){const i=await rf(e,r,"signInWithPassword");return og(e,i)}else return og(e,r).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const s=await rf(e,r,"signInWithPassword");return og(e,s)}else return Promise.reject(i)});case"emailLink":return _7(e,{email:this._email,oobCode:this._password});default:Sr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return v7(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return w7(e,{idToken:n,email:this._email,oobCode:this._password});default:Sr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ha(t,e){return Fc(t,"POST","/v1/accounts:signInWithIdp",il(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E7="http://localhost";class lo extends r_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new lo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Sr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=X1(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new lo(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ha(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ha(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ha(e,n)}buildRequest(){const e={requestUri:E7,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ga(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S7(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function C7(t){const e=Fl(Ul(t)).link,n=e?Fl(Ul(e)).deep_link_id:null,r=Fl(Ul(t)).deep_link_id;return(r?Fl(Ul(r)).link:null)||r||n||e||t}class i_{constructor(e){var n,r,i,s,o,a;const l=Fl(Ul(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,c=(r=l.oobCode)!==null&&r!==void 0?r:null,h=S7((i=l.mode)!==null&&i!==void 0?i:null);se(u&&c&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=c,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=C7(e);try{return new i_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(){this.providerId=al.PROVIDER_ID}static credential(e,n){return Qu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=i_.parseLink(n);return se(r,"argument-error"),Qu._fromEmailAndCode(e,r.code,r.tenantId)}}al.PROVIDER_ID="password";al.EMAIL_PASSWORD_SIGN_IN_METHOD="password";al.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc extends cR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi extends Uc{constructor(){super("facebook.com")}static credential(e){return lo._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fi.credentialFromTaggedObject(e)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fi.credential(e.oauthAccessToken)}catch{return null}}}Fi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Fi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui extends Uc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return lo._fromParams({providerId:Ui.PROVIDER_ID,signInMethod:Ui.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ui.credentialFromTaggedObject(e)}static credentialFromError(e){return Ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ui.credential(n,r)}catch{return null}}}Ui.GOOGLE_SIGN_IN_METHOD="google.com";Ui.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i extends Uc{constructor(){super("github.com")}static credential(e){return lo._fromParams({providerId:$i.PROVIDER_ID,signInMethod:$i.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $i.credentialFromTaggedObject(e)}static credentialFromError(e){return $i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $i.credential(e.oauthAccessToken)}catch{return null}}}$i.GITHUB_SIGN_IN_METHOD="github.com";$i.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends Uc{constructor(){super("twitter.com")}static credential(e,n){return lo._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Vi.credentialFromTaggedObject(e)}static credentialFromError(e){return Vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Vi.credential(n,r)}catch{return null}}}Vi.TWITTER_SIGN_IN_METHOD="twitter.com";Vi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ag(t,e){return Fc(t,"POST","/v1/accounts:signUp",il(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Qs._fromIdTokenResponse(e,r,i),o=M2(r);return new uo({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=M2(r);return new uo({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function M2(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf extends Wr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,sf.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new sf(e,n,r,i)}}function hR(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?sf._fromErrorAndOperation(t,s,e,r):s})}async function T7(t,e,n=!1){const r=await Ku(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return uo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I7(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await Ku(t,hR(r,i,e,t),n);se(s.idToken,r,"internal-error");const o=t_(s.idToken);se(o,r,"internal-error");const{sub:a}=o;return se(t.uid===a,r,"user-mismatch"),uo._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Sr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dR(t,e,n=!1){const r="signIn",i=await hR(t,r,e),s=await uo._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function k7(t,e){return dR(ol(t),e)}async function x7(t,e,n){var r;const i=ol(t),s={returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(!((r=i._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const u=await rf(i,s,"signUpPassword");o=ag(i,u)}else o=ag(i,s).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const c=await rf(i,s,"signUpPassword");return ag(i,c)}else return Promise.reject(u)});const a=await o.catch(u=>Promise.reject(u)),l=await uo._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(l.user),l}function b7(t,e,n){return k7(Xe(t),al.credential(e,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L2(t,e){return Xe(t).setPersistence(e)}function R7(t,e,n,r){return Xe(t).onIdTokenChanged(e,n,r)}function N7(t,e,n){return Xe(t).beforeAuthStateChanged(e,n)}const of="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(of,"1"),this.storage.removeItem(of),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A7(){const t=un();return n_(t)||Bp(t)}const O7=1e3,P7=10;class pR extends fR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=A7()&&s7(),this.fallbackToPolling=rR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);i7()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,P7):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},O7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}pR.type="LOCAL";const mR=pR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR extends fR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}gR.type="SESSION";const s_=gR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D7(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Wp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await D7(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M7{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=o_("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const d=h;if(d.data.eventId===u)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(){return window}function L7(t){Vr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(){return typeof Vr().WorkerGlobalScope<"u"&&typeof Vr().importScripts=="function"}async function F7(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function U7(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function $7(){return yR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR="firebaseLocalStorageDb",V7=1,af="firebaseLocalStorage",_R="fbase_key";class $c{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function qp(t,e){return t.transaction([af],e?"readwrite":"readonly").objectStore(af)}function j7(){const t=indexedDB.deleteDatabase(vR);return new $c(t).toPromise()}function i0(){const t=indexedDB.open(vR,V7);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(af,{keyPath:_R})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(af)?e(r):(r.close(),await j7(),e(await i0()))})})}async function F2(t,e,n){const r=qp(t,!0).put({[_R]:e,value:n});return new $c(r).toPromise()}async function z7(t,e){const n=qp(t,!1).get(e),r=await new $c(n).toPromise();return r===void 0?null:r.value}function U2(t,e){const n=qp(t,!0).delete(e);return new $c(n).toPromise()}const B7=800,W7=3;class wR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await i0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>W7)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wp._getInstance($7()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await F7(),!this.activeServiceWorker)return;this.sender=new M7(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||U7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await i0();return await F2(e,of,"1"),await U2(e,of),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>F2(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>z7(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>U2(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=qp(i,!1).getAll();return new $c(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),B7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}wR.type="LOCAL";const q7=wR;new Lc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H7(t,e){return e?ii(e):(se(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_ extends r_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ha(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ha(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ha(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function K7(t){return dR(t.auth,new a_(t),t.bypassAuthState)}function G7(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),I7(n,new a_(t),t.bypassAuthState)}async function Q7(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),T7(n,new a_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return K7;case"linkViaPopup":case"linkViaRedirect":return Q7;case"reauthViaPopup":case"reauthViaRedirect":return G7;default:Sr(this.auth,"internal-error")}}resolve(e){Ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y7=new Lc(2e3,1e4);class Yo extends ER{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Yo.currentPopupAction&&Yo.currentPopupAction.cancel(),Yo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return se(e,this.auth,"internal-error"),e}async onExecution(){Ei(this.filter.length===1,"Popup operations only handle one event");const e=o_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject($r(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject($r(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Yo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($r(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Y7.get())};e()}}Yo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z7="pendingRedirect",td=new Map;class X7 extends ER{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=td.get(this.auth._key());if(!e){try{const r=await J7(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}td.set(this.auth._key(),e)}return this.bypassAuthState||td.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function J7(t,e){const n=nF(e),r=tF(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function eF(t,e){td.set(t._key(),e)}function tF(t){return ii(t._redirectPersistence)}function nF(t){return ed(Z7,t.config.apiKey,t.name)}async function rF(t,e,n=!1){const r=ol(t),i=H7(r,e),o=await new X7(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iF=10*60*1e3;class sF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!oF(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!SR(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError($r(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=iF&&this.cachedEventUids.clear(),this.cachedEventUids.has($2(e))}saveEventToCache(e){this.cachedEventUids.add($2(e)),this.lastProcessedEventTime=Date.now()}}function $2(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function SR({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function oF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return SR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aF(t,e={}){return sl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uF=/^https?/;async function cF(t){if(t.config.emulator)return;const{authorizedDomains:e}=await aF(t);for(const n of e)try{if(hF(n))return}catch{}Sr(t,"unauthorized-domain")}function hF(t){const e=r0(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!uF.test(n))return!1;if(lF.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dF=new Lc(3e4,6e4);function V2(){const t=Vr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function fF(t){return new Promise((e,n)=>{var r,i,s;function o(){V2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{V2(),n($r(t,"network-request-failed"))},timeout:dF.get()})}if(!((i=(r=Vr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Vr().gapi)===null||s===void 0)&&s.load)o();else{const a=a7("iframefcb");return Vr()[a]=()=>{gapi.load?o():n($r(t,"network-request-failed"))},aR(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw nd=null,e})}let nd=null;function pF(t){return nd=nd||fF(t),nd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mF=new Lc(5e3,15e3),gF="__/auth/iframe",yF="emulator/auth/iframe",vF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_F=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wF(t){const e=t.config;se(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?e_(e,yF):`https://${t.config.authDomain}/${gF}`,r={apiKey:e.apiKey,appName:t.name,v:Ss},i=_F.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ga(r).slice(1)}`}async function EF(t){const e=await pF(t),n=Vr().gapi;return se(n,t,"internal-error"),e.open({where:document.body,url:wF(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vF,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=$r(t,"network-request-failed"),a=Vr().setTimeout(()=>{s(o)},mF.get());function l(){Vr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},CF=500,TF=600,IF="_blank",kF="http://localhost";class j2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function xF(t,e,n,r=CF,i=TF){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},SF),{width:r.toString(),height:i.toString(),top:s,left:o}),u=un().toLowerCase();n&&(a=Xb(u)?IF:n),Zb(u)&&(e=e||kF,l.scrollbars="yes");const c=Object.entries(l).reduce((d,[p,g])=>`${d}${p}=${g},`,"");if(r7(u)&&a!=="_self")return bF(e||"",a),new j2(null);const h=window.open(e||"",a,c);se(h,t,"popup-blocked");try{h.focus()}catch{}return new j2(h)}function bF(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RF="__/auth/handler",NF="emulator/auth/handler",AF=encodeURIComponent("fac");async function z2(t,e,n,r,i,s){se(t.config.authDomain,t,"auth-domain-config-required"),se(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ss,eventId:i};if(e instanceof cR){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Iy(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,h]of Object.entries(s||{}))o[c]=h}if(e instanceof Uc){const c=e.getScopes().filter(h=>h!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await t._getAppCheckToken(),u=l?`#${AF}=${encodeURIComponent(l)}`:"";return`${OF(t)}?${Ga(a).slice(1)}${u}`}function OF({config:t}){return t.emulator?e_(t,NF):`https://${t.authDomain}/${RF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg="webStorageSupport";class PF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=s_,this._completeRedirectFn=rF,this._overrideRedirectResult=eF}async _openPopup(e,n,r,i){var s;Ei((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await z2(e,n,r,r0(),i);return xF(e,o,o_())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await z2(e,n,r,r0(),i);return L7(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ei(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await EF(e),r=new sF(e);return n.register("authEvent",i=>(se(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(lg,{type:lg},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[lg];o!==void 0&&n(!!o),Sr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=cF(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return rR()||n_()||Bp()}}const DF=PF;var B2="@firebase/auth",W2="0.23.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function FF(t){cs(new mi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;se(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:iR(t)},u=new d7(r,i,s,l);return p7(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),cs(new mi("auth-internal",e=>{const n=ol(e.getProvider("auth").getImmediate());return(r=>new MF(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yn(B2,W2,LF(t)),Yn(B2,W2,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UF=5*60,$F=GI("authIdTokenMaxAge")||UF;let q2=null;const VF=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>$F)return;const i=n==null?void 0:n.token;q2!==i&&(q2=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function jF(t=Vv()){const e=np(t,"auth");if(e.isInitialized())return e.getImmediate();const n=f7(t,{popupRedirectResolver:DF,persistence:[q7,mR,s_]}),r=GI("authTokenSyncURL");if(r){const s=VF(r);N7(n,s,()=>s(n.currentUser)),R7(n,o=>s(o))}const i=qI("auth");return i&&m7(n,`http://${i}`),n}FF("Browser");const H2="@firebase/database",K2="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let CR="";function zF(t){CR=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),zt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Au(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WF{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Ii(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new BF(e)}}catch{}return new WF},zs=TR("localStorage"),s0=TR("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=new tp("@firebase/database"),qF=function(){let t=1;return function(){return t++}}(),IR=function(t){const e=fP(t),n=new lP;n.update(e);const r=n.digest();return Lv.encodeByteArray(r)},Vc=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Vc.apply(null,r):typeof r=="object"?e+=zt(r):e+=r,e+=" "}return e};let Ys=null,G2=!0;const HF=function(t,e){$(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(da.logLevel=Te.VERBOSE,Ys=da.log.bind(da),e&&s0.set("logging_enabled",!0)):typeof t=="function"?Ys=t:(Ys=null,s0.remove("logging_enabled"))},Jt=function(...t){if(G2===!0&&(G2=!1,Ys===null&&s0.get("logging_enabled")===!0&&HF(!0)),Ys){const e=Vc.apply(null,t);Ys(e)}},jc=function(t){return function(...e){Jt(t,...e)}},o0=function(...t){const e="FIREBASE INTERNAL ERROR: "+Vc(...t);da.error(e)},co=function(...t){const e=`FIREBASE FATAL ERROR: ${Vc(...t)}`;throw da.error(e),new Error(e)},Ln=function(...t){const e="FIREBASE WARNING: "+Vc(...t);da.warn(e)},KF=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ln("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},kR=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},GF=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},La="[MIN_NAME]",ho="[MAX_NAME]",ll=function(t,e){if(t===e)return 0;if(t===La||e===ho)return-1;if(e===La||t===ho)return 1;{const n=Q2(t),r=Q2(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},QF=function(t,e){return t===e?0:t<e?-1:1},xl=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+zt(e))},l_=function(t){if(typeof t!="object"||t===null)return zt(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=zt(e[r]),n+=":",n+=l_(t[e[r]]);return n+="}",n},xR=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function er(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const bR=function(t){$(!kR(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(l=n;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const c=u.join("");let h="";for(l=0;l<64;l+=8){let d=parseInt(c.substr(l,8),2).toString(16);d.length===1&&(d="0"+d),h=h+d}return h.toLowerCase()},YF=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},ZF=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},XF=new RegExp("^-?(0*)\\d{1,10}$"),JF=-2147483648,eU=2147483647,Q2=function(t){if(XF.test(t)){const e=Number(t);if(e>=JF&&e<=eU)return e}return null},zc=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Ln("Exception was thrown by user callback.",n),e},Math.floor(0))}},tU=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ou=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ln(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Jt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ln(e)}}class a0{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}a0.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_="5",RR="v",NR="s",AR="r",OR="f",PR=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,DR="ls",MR="p",l0="ac",LR="websocket",FR="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iU{constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=zs.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&zs.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function sU(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function UR(t,e,n){$(typeof e=="string","typeof type must == string"),$(typeof n=="object","typeof params must == object");let r;if(e===LR)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===FR)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);sU(t)&&(n.ns=t.namespace);const i=[];return er(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(){this.counters_={}}incrementCounter(e,n=1){Ii(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return H5(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug={},cg={};function c_(t){const e=t.toString();return ug[e]||(ug[e]=new oU),ug[e]}function aU(t,e){const n=t.toString();return cg[n]||(cg[n]=e()),cg[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&zc(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2="start",uU="close",cU="pLPCommand",hU="pRTLPCB",$R="id",VR="pw",jR="ser",dU="cb",fU="seg",pU="ts",mU="d",gU="dframe",zR=1870,BR=30,yU=zR-BR,vU=25e3,_U=3e4;class Zo{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=jc(e),this.stats_=c_(n),this.urlFn=l=>(this.appCheckToken&&(l[l0]=this.appCheckToken),UR(n,FR,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new lU(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(_U)),GF(()=>{if(this.isClosed_)return;this.scriptTagHolder=new h_((...s)=>{const[o,a,l,u,c]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Y2)this.id=a,this.password=l;else if(o===uU)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[Y2]="t",r[jR]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[dU]=this.scriptTagHolder.uniqueCallbackIdentifier),r[RR]=u_,this.transportSessionId&&(r[NR]=this.transportSessionId),this.lastSessionId&&(r[DR]=this.lastSessionId),this.applicationId&&(r[MR]=this.applicationId),this.appCheckToken&&(r[l0]=this.appCheckToken),typeof location<"u"&&location.hostname&&PR.test(location.hostname)&&(r[AR]=OR);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Zo.forceAllow_=!0}static forceDisallow(){Zo.forceDisallow_=!0}static isAvailable(){return Zo.forceAllow_?!0:!Zo.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!YF()&&!ZF()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=zt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=BI(n),i=xR(r,yU);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[gU]="t",r[$R]=e,r[VR]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=zt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class h_{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=qF(),window[cU+this.uniqueCallbackIdentifier]=e,window[hU+this.uniqueCallbackIdentifier]=n,this.myIFrame=h_.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Jt("frame writing exception"),a.stack&&Jt(a.stack),Jt(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Jt("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[$R]=this.myID,e[VR]=this.myPW,e[jR]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+BR+r.length<=zR;){const o=this.pendingSegs.shift();r=r+"&"+fU+i+"="+o.seg+"&"+pU+i+"="+o.ts+"&"+mU+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(vU)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Jt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wU=16384,EU=45e3;let lf=null;typeof MozWebSocket<"u"?lf=MozWebSocket:typeof WebSocket<"u"&&(lf=WebSocket);class ur{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=jc(this.connId),this.stats_=c_(n),this.connURL=ur.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[RR]=u_,typeof location<"u"&&location.hostname&&PR.test(location.hostname)&&(o[AR]=OR),n&&(o[NR]=n),r&&(o[DR]=r),i&&(o[l0]=i),s&&(o[MR]=s),UR(e,LR,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,zs.set("previous_websocket_failure",!0);try{let r;ZI(),this.mySock=new lf(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){ur.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&lf!==null&&!ur.forceDisallow_}static previouslyFailed(){return zs.isInMemoryStorage||zs.get("previous_websocket_failure")===!0}markConnectionHealthy(){zs.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Au(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if($(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=zt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=xR(n,wU);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(EU))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ur.responsesRequiredToBeHealthy=2;ur.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Zo,ur]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=ur&&ur.isAvailable();let r=n&&!ur.previouslyFailed();if(e.webSocketOnly&&(n||Ln("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ur];else{const i=this.transports_=[];for(const s of Yu.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Yu.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Yu.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SU=6e4,CU=5e3,TU=10*1024,IU=100*1024,hg="t",Z2="d",kU="s",X2="r",xU="e",J2="o",eS="a",tS="n",nS="p",bU="h";class RU{constructor(e,n,r,i,s,o,a,l,u,c){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=jc("c:"+this.id+":"),this.transportManager_=new Yu(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ou(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>IU?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>TU?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(hg in e){const n=e[hg];n===eS?this.upgradeIfSecondaryHealthy_():n===X2?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===J2&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=xl("t",e),r=xl("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:nS,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:eS,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:tS,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=xl("t",e),r=xl("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=xl(hg,e);if(Z2 in e){const r=e[Z2];if(n===bU){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===tS){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===kU?this.onConnectionShutdown_(r):n===X2?this.onReset_(r):n===xU?o0("Server Error: "+r):n===J2?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):o0("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),u_!==r&&Ln("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ou(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(SU))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ou(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(CU))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:nS,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(zs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e){this.allowedEvents_=e,this.listeners_={},$(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){$(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf extends qR{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Uv()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new uf}getInitialEvent(e){return $(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS=32,iS=768;class Ge{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function De(){return new Ge("")}function Se(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ps(t){return t.pieces_.length-t.pieceNum_}function We(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ge(t.pieces_,e)}function HR(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function NU(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function KR(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function GR(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ge(e,0)}function At(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Ge)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Ge(n,0)}function _e(t){return t.pieceNum_>=t.pieces_.length}function Gn(t,e){const n=Se(t),r=Se(e);if(n===null)return e;if(n===r)return Gn(We(t),We(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function QR(t,e){if(ps(t)!==ps(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function hr(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(ps(t)>ps(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class AU{constructor(e,n){this.errorPrefix_=n,this.parts_=KR(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=ep(this.parts_[r]);YR(this)}}function OU(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=ep(e),YR(t)}function PU(t){const e=t.parts_.pop();t.byteLength_-=ep(e),t.parts_.length>0&&(t.byteLength_-=1)}function YR(t){if(t.byteLength_>iS)throw new Error(t.errorPrefix_+"has a key path longer than "+iS+" bytes ("+t.byteLength_+").");if(t.parts_.length>rS)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+rS+") or object contains a cycle "+Os(t))}function Os(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_ extends qR{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new d_}getInitialEvent(e){return $(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bl=1e3,DU=60*5*1e3,sS=30*1e3,MU=1.3,LU=3e4,FU="server_kill",oS=3;class li extends WR{constructor(e,n,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=li.nextPersistentConnectionId_++,this.log_=jc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=bl,this.maxReconnectDelay_=DU,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!ZI())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");d_.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&uf.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(zt(s)),$(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new Fv,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),$(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),$(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,u=a.s;li.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(u,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Ii(e,"w")){const r=Ta(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();Ln(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||aP(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=sS)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=oP(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),$(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+zt(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):o0("Unrecognized action received from server: "+zt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){$(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=bl,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=bl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>LU&&(this.reconnectDelay_=bl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*MU)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+li.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},u=function(h){$(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:l,sendRequest:u};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,d]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);o?Jt("getToken() completed but was canceled"):(Jt("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=d&&d.token,a=new RU(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,p=>{Ln(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(FU)},s))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&Ln(h),l())}}}interrupt(e){Jt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Jt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Iy(this.interruptReasons_)&&(this.reconnectDelay_=bl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>l_(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new Ge(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){Jt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=oS&&(this.reconnectDelay_=sS,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Jt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=oS&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+CR.replace(/\./g,"-")]=1,Uv()?e["framework.cordova"]=1:YI()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=uf.getInstance().currentlyOnline();return Iy(this.interruptReasons_)&&e}}li.nextPersistentConnectionId_=0;li.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Ce(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Ce(La,e),i=new Ce(La,n);return this.compare(r,i)!==0}minPost(){return Ce.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nh;class ZR extends Hp{static get __EMPTY_NODE(){return Nh}static set __EMPTY_NODE(e){Nh=e}compare(e,n){return ll(e.name,n.name)}isDefinedOn(e){throw Ka("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ce.MIN}maxPost(){return new Ce(ho,Nh)}makePost(e,n){return $(typeof e=="string","KeyIndex indexValue must always be a string."),new Ce(e,Nh)}toString(){return".key"}}const fa=new ZR;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Rt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Rt.RED,this.left=i??In.EMPTY_NODE,this.right=s??In.EMPTY_NODE}copy(e,n,r,i,s){return new Rt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return In.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return In.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Rt.RED=!0;Rt.BLACK=!1;class UU{copy(e,n,r,i,s){return this}insert(e,n,r){return new Rt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class In{constructor(e,n=In.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new In(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Rt.BLACK,null,null))}remove(e){return new In(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Rt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ah(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Ah(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Ah(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Ah(this.root_,null,this.comparator_,!0,e)}}In.EMPTY_NODE=new UU;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $U(t,e){return ll(t.name,e.name)}function f_(t,e){return ll(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let u0;function VU(t){u0=t}const XR=function(t){return typeof t=="number"?"number:"+bR(t):"string:"+t},JR=function(t){if(t.isLeafNode()){const e=t.val();$(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Ii(e,".sv"),"Priority must be a string or number.")}else $(t===u0||t.isEmpty(),"priority of unexpected type.");$(t===u0||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aS;class kt{constructor(e,n=kt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,$(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),JR(this.priorityNode_)}static set __childrenNodeConstructor(e){aS=e}static get __childrenNodeConstructor(){return aS}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new kt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:kt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return _e(e)?this:Se(e)===".priority"?this.priorityNode_:kt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:kt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Se(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:($(r!==".priority"||ps(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,kt.__childrenNodeConstructor.EMPTY_NODE.updateChild(We(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+XR(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=bR(this.value_):e+=this.value_,this.lazyHash_=IR(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===kt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof kt.__childrenNodeConstructor?-1:($(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=kt.VALUE_TYPE_ORDER.indexOf(n),s=kt.VALUE_TYPE_ORDER.indexOf(r);return $(i>=0,"Unknown leaf type: "+n),$(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}kt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eN,tN;function jU(t){eN=t}function zU(t){tN=t}class BU extends Hp{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?ll(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ce.MIN}maxPost(){return new Ce(ho,new kt("[PRIORITY-POST]",tN))}makePost(e,n){const r=eN(e);return new Ce(n,new kt("[PRIORITY-POST]",r))}toString(){return".priority"}}const nn=new BU;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WU=Math.log(2);class qU{constructor(e){const n=s=>parseInt(Math.log(s)/WU,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const cf=function(t,e,n,r){t.sort(e);const i=function(l,u){const c=u-l;let h,d;if(c===0)return null;if(c===1)return h=t[l],d=n?n(h):h,new Rt(d,h.node,Rt.BLACK,null,null);{const p=parseInt(c/2,10)+l,g=i(l,p),_=i(p+1,u);return h=t[p],d=n?n(h):h,new Rt(d,h.node,Rt.BLACK,g,_)}},s=function(l){let u=null,c=null,h=t.length;const d=function(g,_){const w=h-g,y=h;h-=g;const f=i(w+1,y),m=t[w],E=n?n(m):m;p(new Rt(E,m.node,_,null,f))},p=function(g){u?(u.left=g,u=g):(c=g,u=g)};for(let g=0;g<l.count;++g){const _=l.nextBitIsOne(),w=Math.pow(2,l.count-(g+1));_?d(w,Rt.BLACK):(d(w,Rt.BLACK),d(w,Rt.RED))}return c},o=new qU(t.length),a=s(o);return new In(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dg;const Oo={};class si{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return $(Oo&&nn,"ChildrenNode.ts has not been loaded"),dg=dg||new si({".priority":Oo},{".priority":nn}),dg}get(e){const n=Ta(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof In?n:null}hasIndex(e){return Ii(this.indexSet_,e.toString())}addIndex(e,n){$(e!==fa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(Ce.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=cf(r,e.getCompare()):a=Oo;const l=e.toString(),u=Object.assign({},this.indexSet_);u[l]=e;const c=Object.assign({},this.indexes_);return c[l]=a,new si(c,u)}addToIndexes(e,n){const r=Ld(this.indexes_,(i,s)=>{const o=Ta(this.indexSet_,s);if($(o,"Missing index implementation for "+s),i===Oo)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(Ce.Wrap);let u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),cf(a,o.getCompare())}else return Oo;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new Ce(e.name,a))),l.insert(e,e.node)}});return new si(r,this.indexSet_)}removeFromIndexes(e,n){const r=Ld(this.indexes_,i=>{if(i===Oo)return i;{const s=n.get(e.name);return s?i.remove(new Ce(e.name,s)):i}});return new si(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rl;class Re{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&JR(this.priorityNode_),this.children_.isEmpty()&&$(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Rl||(Rl=new Re(new In(f_),null,si.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Rl}updatePriority(e){return this.children_.isEmpty()?this:new Re(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Rl:n}}getChild(e){const n=Se(e);return n===null?this:this.getImmediateChild(n).getChild(We(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if($(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Ce(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?Rl:this.priorityNode_;return new Re(i,o,s)}}updateChild(e,n){const r=Se(e);if(r===null)return n;{$(Se(e)!==".priority"||ps(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(We(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(nn,(o,a)=>{n[o]=a.val(e),r++,s&&Re.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+XR(this.getPriority().val())+":"),this.forEachChild(nn,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":IR(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new Ce(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Ce(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Ce(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,Ce.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,Ce.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Bc?-1:0}withIndex(e){if(e===fa||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Re(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===fa||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(nn),i=n.getIterator(nn);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===fa?null:this.indexMap_.get(e.toString())}}Re.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class HU extends Re{constructor(){super(new In(f_),Re.EMPTY_NODE,si.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Re.EMPTY_NODE}isEmpty(){return!1}}const Bc=new HU;Object.defineProperties(Ce,{MIN:{value:new Ce(La,Re.EMPTY_NODE)},MAX:{value:new Ce(ho,Bc)}});ZR.__EMPTY_NODE=Re.EMPTY_NODE;kt.__childrenNodeConstructor=Re;VU(Bc);zU(Bc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KU=!0;function en(t,e=null){if(t===null)return Re.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),$(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new kt(n,en(e))}if(!(t instanceof Array)&&KU){const n=[];let r=!1;if(er(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=en(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new Ce(o,l)))}}),n.length===0)return Re.EMPTY_NODE;const s=cf(n,$U,o=>o.name,f_);if(r){const o=cf(n,nn.getCompare());return new Re(s,en(e),new si({".priority":o},{".priority":nn}))}else return new Re(s,en(e),si.Default)}else{let n=Re.EMPTY_NODE;return er(t,(r,i)=>{if(Ii(t,r)&&r.substring(0,1)!=="."){const s=en(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(en(e))}}jU(en);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU extends Hp{constructor(e){super(),this.indexPath_=e,$(!_e(e)&&Se(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?ll(e.name,n.name):s}makePost(e,n){const r=en(e),i=Re.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ce(n,i)}maxPost(){const e=Re.EMPTY_NODE.updateChild(this.indexPath_,Bc);return new Ce(ho,e)}toString(){return KR(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QU extends Hp{compare(e,n){const r=e.node.compareTo(n.node);return r===0?ll(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ce.MIN}maxPost(){return Ce.MAX}makePost(e,n){const r=en(e);return new Ce(n,r)}toString(){return".value"}}const YU=new QU;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZU(t){return{type:"value",snapshotNode:t}}function XU(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function JU(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function lS(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function e$(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=nn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return $(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return $(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:La}hasEnd(){return this.endSet_}getIndexEndValue(){return $(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return $(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ho}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return $(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===nn}copy(){const e=new p_;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function uS(t){const e={};if(t.isDefault())return e;let n;if(t.index_===nn?n="$priority":t.index_===YU?n="$value":t.index_===fa?n="$key":($(t.index_ instanceof GU,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=zt(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=zt(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+zt(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=zt(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+zt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function cS(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==nn&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf extends WR{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=jc("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:($(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=hf.getListenId_(e,r),a={};this.listens_[o]=a;const l=uS(e._queryParams);this.restRequest_(s+".json",l,(u,c)=>{let h=c;if(u===404&&(h=null,u=null),u===null&&this.onDataUpdate_(s,h,!1,r),Ta(this.listens_,o)===a){let d;u?u===401?d="permission_denied":d="rest_error:"+u:d="ok",i(d,null)}})}unlisten(e,n){const r=hf.getListenId_(e,n);delete this.listens_[r]}get(e){const n=uS(e._queryParams),r=e._path.toString(),i=new Fv;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ga(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Au(a.responseText)}catch{Ln("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&Ln("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t${constructor(){this.rootNode_=Re.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(){return{value:null,children:new Map}}function nN(t,e,n){if(_e(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Se(e);t.children.has(r)||t.children.set(r,df());const i=t.children.get(r);e=We(e),nN(i,e,n)}}function c0(t,e,n){t.value!==null?n(e,t.value):n$(t,(r,i)=>{const s=new Ge(e.toString()+"/"+r);c0(i,s,n)})}function n$(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r${constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&er(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS=10*1e3,i$=30*1e3,s$=5*60*1e3;class o${constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new r$(e);const r=hS+(i$-hS)*Math.random();ou(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;er(e,(i,s)=>{s>0&&Ii(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),ou(this.reportStats_.bind(this),Math.floor(Math.random()*2*s$))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Or;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Or||(Or={}));function rN(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function iN(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function sN(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Or.ACK_USER_WRITE,this.source=rN()}operationForChild(e){if(_e(this.path)){if(this.affectedTree.value!=null)return $(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Ge(e));return new ff(De(),n,this.revert)}}else return $(Se(this.path)===e,"operationForChild called for unrelated child."),new ff(We(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Or.OVERWRITE}operationForChild(e){return _e(this.path)?new fo(this.source,De(),this.snap.getImmediateChild(e)):new fo(this.source,We(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Or.MERGE}operationForChild(e){if(_e(this.path)){const n=this.children.subtree(new Ge(e));return n.isEmpty()?null:n.value?new fo(this.source,De(),n.value):new Zu(this.source,De(),n)}else return $(Se(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Zu(this.source,We(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(_e(e))return this.isFullyInitialized()&&!this.filtered_;const n=Se(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function a$(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(e$(o.childName,o.snapshotNode))}),Nl(t,i,"child_removed",e,r,n),Nl(t,i,"child_added",e,r,n),Nl(t,i,"child_moved",s,r,n),Nl(t,i,"child_changed",e,r,n),Nl(t,i,"value",e,r,n),i}function Nl(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>u$(t,a,l)),o.forEach(a=>{const l=l$(t,a,s);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,t.query_))})})}function l$(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function u$(t,e,n){if(e.childName==null||n.childName==null)throw Ka("Should only compare child_ events.");const r=new Ce(e.childName,e.snapshotNode),i=new Ce(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(t,e){return{eventCache:t,serverCache:e}}function au(t,e,n,r){return oN(new m_(e,n,r),t.serverCache)}function aN(t,e,n,r){return oN(t.eventCache,new m_(e,n,r))}function h0(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function po(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fg;const c$=()=>(fg||(fg=new In(QF)),fg);class Be{constructor(e,n=c$()){this.value=e,this.children=n}static fromObject(e){let n=new Be(null);return er(e,(r,i)=>{n=n.set(new Ge(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:De(),value:this.value};if(_e(e))return null;{const r=Se(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(We(e),n);return s!=null?{path:At(new Ge(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(_e(e))return this;{const n=Se(e),r=this.children.get(n);return r!==null?r.subtree(We(e)):new Be(null)}}set(e,n){if(_e(e))return new Be(n,this.children);{const r=Se(e),s=(this.children.get(r)||new Be(null)).set(We(e),n),o=this.children.insert(r,s);return new Be(this.value,o)}}remove(e){if(_e(e))return this.children.isEmpty()?new Be(null):new Be(null,this.children);{const n=Se(e),r=this.children.get(n);if(r){const i=r.remove(We(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new Be(null):new Be(this.value,s)}else return this}}get(e){if(_e(e))return this.value;{const n=Se(e),r=this.children.get(n);return r?r.get(We(e)):null}}setTree(e,n){if(_e(e))return n;{const r=Se(e),s=(this.children.get(r)||new Be(null)).setTree(We(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new Be(this.value,o)}}fold(e){return this.fold_(De(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(At(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,De(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(_e(e))return null;{const s=Se(e),o=this.children.get(s);return o?o.findOnPath_(We(e),At(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,De(),n)}foreachOnPath_(e,n,r){if(_e(e))return this;{this.value&&r(n,this.value);const i=Se(e),s=this.children.get(i);return s?s.foreachOnPath_(We(e),At(n,i),r):new Be(null)}}foreach(e){this.foreach_(De(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(At(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this.writeTree_=e}static empty(){return new mr(new Be(null))}}function lu(t,e,n){if(_e(e))return new mr(new Be(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Gn(i,e);return s=s.updateChild(o,n),new mr(t.writeTree_.set(i,s))}else{const i=new Be(n),s=t.writeTree_.setTree(e,i);return new mr(s)}}}function dS(t,e,n){let r=t;return er(n,(i,s)=>{r=lu(r,At(e,i),s)}),r}function fS(t,e){if(_e(e))return mr.empty();{const n=t.writeTree_.setTree(e,new Be(null));return new mr(n)}}function d0(t,e){return Io(t,e)!=null}function Io(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Gn(n.path,e)):null}function pS(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(nn,(r,i)=>{e.push(new Ce(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Ce(r,i.value))}),e}function as(t,e){if(_e(e))return t;{const n=Io(t,e);return n!=null?new mr(new Be(n)):new mr(t.writeTree_.subtree(e))}}function f0(t){return t.writeTree_.isEmpty()}function Fa(t,e){return lN(De(),t.writeTree_,e)}function lN(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?($(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=lN(At(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(At(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uN(t,e){return pN(e,t)}function h$(t,e,n,r,i){$(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=lu(t.visibleWrites,e,n)),t.lastWriteId=r}function d$(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function f$(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);$(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&p$(a,r.path)?i=!1:hr(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return m$(t),!0;if(r.snap)t.visibleWrites=fS(t.visibleWrites,r.path);else{const a=r.children;er(a,l=>{t.visibleWrites=fS(t.visibleWrites,At(r.path,l))})}return!0}else return!1}function p$(t,e){if(t.snap)return hr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&hr(At(t.path,n),e))return!0;return!1}function m$(t){t.visibleWrites=cN(t.allWrites,g$,De()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function g$(t){return t.visible}function cN(t,e,n){let r=mr.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)hr(n,o)?(a=Gn(n,o),r=lu(r,a,s.snap)):hr(o,n)&&(a=Gn(o,n),r=lu(r,De(),s.snap.getChild(a)));else if(s.children){if(hr(n,o))a=Gn(n,o),r=dS(r,a,s.children);else if(hr(o,n))if(a=Gn(o,n),_e(a))r=dS(r,De(),s.children);else{const l=Ta(s.children,Se(a));if(l){const u=l.getChild(We(a));r=lu(r,De(),u)}}}else throw Ka("WriteRecord should have .snap or .children")}}return r}function hN(t,e,n,r,i){if(!r&&!i){const s=Io(t.visibleWrites,e);if(s!=null)return s;{const o=as(t.visibleWrites,e);if(f0(o))return n;if(n==null&&!d0(o,De()))return null;{const a=n||Re.EMPTY_NODE;return Fa(o,a)}}}else{const s=as(t.visibleWrites,e);if(!i&&f0(s))return n;if(!i&&n==null&&!d0(s,De()))return null;{const o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(hr(u.path,e)||hr(e,u.path))},a=cN(t.allWrites,o,e),l=n||Re.EMPTY_NODE;return Fa(a,l)}}}function y$(t,e,n){let r=Re.EMPTY_NODE;const i=Io(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(nn,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=as(t.visibleWrites,e);return n.forEachChild(nn,(o,a)=>{const l=Fa(as(s,new Ge(o)),a);r=r.updateImmediateChild(o,l)}),pS(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=as(t.visibleWrites,e);return pS(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function v$(t,e,n,r,i){$(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=At(e,n);if(d0(t.visibleWrites,s))return null;{const o=as(t.visibleWrites,s);return f0(o)?i.getChild(n):Fa(o,i.getChild(n))}}function _$(t,e,n,r){const i=At(e,n),s=Io(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=as(t.visibleWrites,i);return Fa(o,r.getNode().getImmediateChild(n))}else return null}function w$(t,e){return Io(t.visibleWrites,e)}function E$(t,e,n,r,i,s,o){let a;const l=as(t.visibleWrites,e),u=Io(l,De());if(u!=null)a=u;else if(n!=null)a=Fa(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const c=[],h=o.getCompare(),d=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let p=d.getNext();for(;p&&c.length<i;)h(p,r)!==0&&c.push(p),p=d.getNext();return c}else return[]}function S$(){return{visibleWrites:mr.empty(),allWrites:[],lastWriteId:-1}}function p0(t,e,n,r){return hN(t.writeTree,t.treePath,e,n,r)}function dN(t,e){return y$(t.writeTree,t.treePath,e)}function mS(t,e,n,r){return v$(t.writeTree,t.treePath,e,n,r)}function pf(t,e){return w$(t.writeTree,At(t.treePath,e))}function C$(t,e,n,r,i,s){return E$(t.writeTree,t.treePath,e,n,r,i,s)}function g_(t,e,n){return _$(t.writeTree,t.treePath,e,n)}function fN(t,e){return pN(At(t.treePath,e),t.writeTree)}function pN(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T${constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;$(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),$(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,lS(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,JU(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,XU(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,lS(r,e.snapshotNode,i.oldSnap));else throw Ka("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I${getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const mN=new I$;class y_{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new m_(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return g_(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:po(this.viewCache_),s=C$(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}function k$(t,e){$(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),$(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function x$(t,e,n,r,i){const s=new T$;let o,a;if(n.type===Or.OVERWRITE){const u=n;u.source.fromUser?o=m0(t,e,u.path,u.snap,r,i,s):($(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!_e(u.path),o=mf(t,e,u.path,u.snap,r,i,a,s))}else if(n.type===Or.MERGE){const u=n;u.source.fromUser?o=R$(t,e,u.path,u.children,r,i,s):($(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=g0(t,e,u.path,u.children,r,i,a,s))}else if(n.type===Or.ACK_USER_WRITE){const u=n;u.revert?o=O$(t,e,u.path,r,i,s):o=N$(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===Or.LISTEN_COMPLETE)o=A$(t,e,n.path,r,s);else throw Ka("Unknown operation type: "+n.type);const l=s.getChanges();return b$(e,o,l),{viewCache:o,changes:l}}function b$(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=h0(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(ZU(h0(e)))}}function gN(t,e,n,r,i,s){const o=e.eventCache;if(pf(r,n)!=null)return e;{let a,l;if(_e(n))if($(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=po(e),c=u instanceof Re?u:Re.EMPTY_NODE,h=dN(r,c);a=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{const u=p0(r,po(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=Se(n);if(u===".priority"){$(ps(n)===1,"Can't have a priority with additional path components");const c=o.getNode();l=e.serverCache.getNode();const h=mS(r,n,c,l);h!=null?a=t.filter.updatePriority(c,h):a=o.getNode()}else{const c=We(n);let h;if(o.isCompleteForChild(u)){l=e.serverCache.getNode();const d=mS(r,n,o.getNode(),l);d!=null?h=o.getNode().getImmediateChild(u).updateChild(c,d):h=o.getNode().getImmediateChild(u)}else h=g_(r,u,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),u,h,c,i,s):a=o.getNode()}}return au(e,a,o.isFullyInitialized()||_e(n),t.filter.filtersNodes())}}function mf(t,e,n,r,i,s,o,a){const l=e.serverCache;let u;const c=o?t.filter:t.filter.getIndexedFilter();if(_e(n))u=c.updateFullNode(l.getNode(),r,null);else if(c.filtersNodes()&&!l.isFiltered()){const p=l.getNode().updateChild(n,r);u=c.updateFullNode(l.getNode(),p,null)}else{const p=Se(n);if(!l.isCompleteForPath(n)&&ps(n)>1)return e;const g=We(n),w=l.getNode().getImmediateChild(p).updateChild(g,r);p===".priority"?u=c.updatePriority(l.getNode(),w):u=c.updateChild(l.getNode(),p,w,g,mN,null)}const h=aN(e,u,l.isFullyInitialized()||_e(n),c.filtersNodes()),d=new y_(i,h,s);return gN(t,h,n,i,d,a)}function m0(t,e,n,r,i,s,o){const a=e.eventCache;let l,u;const c=new y_(i,e,s);if(_e(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=au(e,u,!0,t.filter.filtersNodes());else{const h=Se(n);if(h===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),l=au(e,u,a.isFullyInitialized(),a.isFiltered());else{const d=We(n),p=a.getNode().getImmediateChild(h);let g;if(_e(d))g=r;else{const _=c.getCompleteChild(h);_!=null?HR(d)===".priority"&&_.getChild(GR(d)).isEmpty()?g=_:g=_.updateChild(d,r):g=Re.EMPTY_NODE}if(p.equals(g))l=e;else{const _=t.filter.updateChild(a.getNode(),h,g,d,c,o);l=au(e,_,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function gS(t,e){return t.eventCache.isCompleteForChild(e)}function R$(t,e,n,r,i,s,o){let a=e;return r.foreach((l,u)=>{const c=At(n,l);gS(e,Se(c))&&(a=m0(t,a,c,u,i,s,o))}),r.foreach((l,u)=>{const c=At(n,l);gS(e,Se(c))||(a=m0(t,a,c,u,i,s,o))}),a}function yS(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function g0(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,u;_e(n)?u=r:u=new Be(null).setTree(n,r);const c=e.serverCache.getNode();return u.children.inorderTraversal((h,d)=>{if(c.hasChild(h)){const p=e.serverCache.getNode().getImmediateChild(h),g=yS(t,p,d);l=mf(t,l,new Ge(h),g,i,s,o,a)}}),u.children.inorderTraversal((h,d)=>{const p=!e.serverCache.isCompleteForChild(h)&&d.value===null;if(!c.hasChild(h)&&!p){const g=e.serverCache.getNode().getImmediateChild(h),_=yS(t,g,d);l=mf(t,l,new Ge(h),_,i,s,o,a)}}),l}function N$(t,e,n,r,i,s,o){if(pf(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(_e(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return mf(t,e,n,l.getNode().getChild(n),i,s,a,o);if(_e(n)){let u=new Be(null);return l.getNode().forEachChild(fa,(c,h)=>{u=u.set(new Ge(c),h)}),g0(t,e,n,u,i,s,a,o)}else return e}else{let u=new Be(null);return r.foreach((c,h)=>{const d=At(n,c);l.isCompleteForPath(d)&&(u=u.set(c,l.getNode().getChild(d)))}),g0(t,e,n,u,i,s,a,o)}}function A$(t,e,n,r,i){const s=e.serverCache,o=aN(e,s.getNode(),s.isFullyInitialized()||_e(n),s.isFiltered());return gN(t,o,n,r,mN,i)}function O$(t,e,n,r,i,s){let o;if(pf(r,n)!=null)return e;{const a=new y_(r,e,i),l=e.eventCache.getNode();let u;if(_e(n)||Se(n)===".priority"){let c;if(e.serverCache.isFullyInitialized())c=p0(r,po(e));else{const h=e.serverCache.getNode();$(h instanceof Re,"serverChildren would be complete if leaf node"),c=dN(r,h)}c=c,u=t.filter.updateFullNode(l,c,s)}else{const c=Se(n);let h=g_(r,c,e.serverCache);h==null&&e.serverCache.isCompleteForChild(c)&&(h=l.getImmediateChild(c)),h!=null?u=t.filter.updateChild(l,c,h,We(n),a,s):e.eventCache.getNode().hasChild(c)?u=t.filter.updateChild(l,c,Re.EMPTY_NODE,We(n),a,s):u=l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=p0(r,po(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||pf(r,De())!=null,au(e,u,o,t.filter.filtersNodes())}}function P$(t,e){const n=po(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!_e(e)&&!n.getImmediateChild(Se(e)).isEmpty())?n.getChild(e):null}function vS(t,e,n,r){e.type===Or.MERGE&&e.source.queryId!==null&&($(po(t.viewCache_),"We should always have a full cache before handling merges"),$(h0(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=x$(t.processor_,i,e,n,r);return k$(t.processor_,s.viewCache),$(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,D$(t,s.changes,s.viewCache.eventCache.getNode(),null)}function D$(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return a$(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _S;function M$(t){$(!_S,"__referenceConstructor has already been defined"),_S=t}function v_(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return $(s!=null,"SyncTree gave us an op for an invalid query."),vS(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(vS(o,e,n,r));return s}}function __(t,e){let n=null;for(const r of t.views.values())n=n||P$(r,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wS;function L$(t){$(!wS,"__referenceConstructor has already been defined"),wS=t}class ES{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Be(null),this.pendingWriteTree_=S$(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function F$(t,e,n,r,i){return h$(t.pendingWriteTree_,e,n,r,i),i?Gp(t,new fo(rN(),e,n)):[]}function Xo(t,e,n=!1){const r=d$(t.pendingWriteTree_,e);if(f$(t.pendingWriteTree_,e)){let s=new Be(null);return r.snap!=null?s=s.set(De(),!0):er(r.children,o=>{s=s.set(new Ge(o),!0)}),Gp(t,new ff(r.path,s,n))}else return[]}function Kp(t,e,n){return Gp(t,new fo(iN(),e,n))}function U$(t,e,n){const r=Be.fromObject(n);return Gp(t,new Zu(iN(),e,r))}function $$(t,e,n,r){const i=wN(t,r);if(i!=null){const s=EN(i),o=s.path,a=s.queryId,l=Gn(o,e),u=new fo(sN(a),l,n);return SN(t,o,u)}else return[]}function V$(t,e,n,r){const i=wN(t,r);if(i){const s=EN(i),o=s.path,a=s.queryId,l=Gn(o,e),u=Be.fromObject(n),c=new Zu(sN(a),l,u);return SN(t,o,c)}else return[]}function yN(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=Gn(o,e),u=__(a,l);if(u)return u});return hN(i,e,s,n,!0)}function Gp(t,e){return vN(e,t.syncPointTree_,null,uN(t.pendingWriteTree_,De()))}function vN(t,e,n,r){if(_e(t.path))return _N(t,e,n,r);{const i=e.get(De());n==null&&i!=null&&(n=__(i,De()));let s=[];const o=Se(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const u=n?n.getImmediateChild(o):null,c=fN(r,o);s=s.concat(vN(a,l,u,c))}return i&&(s=s.concat(v_(i,t,r,n))),s}}function _N(t,e,n,r){const i=e.get(De());n==null&&i!=null&&(n=__(i,De()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,u=fN(r,o),c=t.operationForChild(o);c&&(s=s.concat(_N(c,a,l,u)))}),i&&(s=s.concat(v_(i,t,r,n))),s}function wN(t,e){return t.tagToQueryMap.get(e)}function EN(t){const e=t.indexOf("$");return $(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ge(t.substr(0,e))}}function SN(t,e,n){const r=t.syncPointTree_.get(e);$(r,"Missing sync point for query tag that we're tracking");const i=uN(t.pendingWriteTree_,e);return v_(r,n,i,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new w_(n)}node(){return this.node_}}class E_{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=At(this.path_,e);return new E_(this.syncTree_,n)}node(){return yN(this.syncTree_,this.path_)}}const j$=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},SS=function(t,e,n){if(!t||typeof t!="object")return t;if($(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return z$(t[".sv"],e,n);if(typeof t[".sv"]=="object")return B$(t[".sv"],e);$(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},z$=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:$(!1,"Unexpected server value: "+t)}},B$=function(t,e,n){t.hasOwnProperty("increment")||$(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&$(!1,"Unexpected increment value: "+r);const i=e.node();if($(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},W$=function(t,e,n,r){return S_(e,new E_(n,t),r)},q$=function(t,e,n){return S_(t,new w_(e),n)};function S_(t,e,n){const r=t.getPriority().val(),i=SS(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=SS(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new kt(a,en(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new kt(i))),o.forEachChild(nn,(a,l)=>{const u=S_(l,e.getImmediateChild(a),n);u!==l&&(s=s.updateImmediateChild(a,u))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function T_(t,e){let n=e instanceof Ge?e:new Ge(e),r=t,i=Se(n);for(;i!==null;){const s=Ta(r.node.children,i)||{children:{},childCount:0};r=new C_(i,r,s),n=We(n),i=Se(n)}return r}function ul(t){return t.node.value}function CN(t,e){t.node.value=e,y0(t)}function TN(t){return t.node.childCount>0}function H$(t){return ul(t)===void 0&&!TN(t)}function Qp(t,e){er(t.node.children,(n,r)=>{e(new C_(n,t,r))})}function IN(t,e,n,r){n&&!r&&e(t),Qp(t,i=>{IN(i,e,!0,r)}),n&&r&&e(t)}function K$(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Wc(t){return new Ge(t.parent===null?t.name:Wc(t.parent)+"/"+t.name)}function y0(t){t.parent!==null&&G$(t.parent,t.name,t)}function G$(t,e,n){const r=H$(n),i=Ii(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,y0(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,y0(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q$=/[\[\].#$\/\u0000-\u001F\u007F]/,Y$=/[\[\].#$\u0000-\u001F\u007F]/,pg=10*1024*1024,kN=function(t){return typeof t=="string"&&t.length!==0&&!Q$.test(t)},Z$=function(t){return typeof t=="string"&&t.length!==0&&!Y$.test(t)},X$=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Z$(t)},xN=function(t,e,n){const r=n instanceof Ge?new AU(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Os(r));if(typeof e=="function")throw new Error(t+"contains a function "+Os(r)+" with contents = "+e.toString());if(kR(e))throw new Error(t+"contains "+e.toString()+" "+Os(r));if(typeof e=="string"&&e.length>pg/3&&ep(e)>pg)throw new Error(t+"contains a string greater than "+pg+" utf8 bytes "+Os(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(er(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!kN(o)))throw new Error(t+" contains an invalid key ("+o+") "+Os(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);OU(r,o),xN(t,a,r),PU(r)}),i&&s)throw new Error(t+' contains ".value" child '+Os(r)+" in addition to actual children.")}},J$=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!kN(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!X$(n))throw new Error(dP(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function tV(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!QR(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function ko(t,e,n){tV(t,n),nV(t,r=>hr(r,e)||hr(e,r))}function nV(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(rV(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function rV(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Ys&&Jt("event: "+n.toString()),zc(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV="repo_interrupt",sV=25;class oV{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new eV,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=df(),this.transactionQueueTree_=new C_,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function aV(t,e,n){if(t.stats_=c_(t.repoInfo_),t.forceRestClient_||tU())t.server_=new hf(t.repoInfo_,(r,i,s,o)=>{CS(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>TS(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{zt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new li(t.repoInfo_,e,(r,i,s,o)=>{CS(t,r,i,s,o)},r=>{TS(t,r)},r=>{uV(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=aU(t.repoInfo_,()=>new o$(t.stats_,t.server_)),t.infoData_=new t$,t.infoSyncTree_=new ES({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=Kp(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),I_(t,"connected",!1),t.serverSyncTree_=new ES({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const u=o(a,l);ko(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function lV(t){const n=t.infoData_.getNode(new Ge(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function bN(t){return j$({timestamp:lV(t)})}function CS(t,e,n,r,i){t.dataUpdateCount++;const s=new Ge(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=Ld(n,u=>en(u));o=V$(t.serverSyncTree_,s,l,i)}else{const l=en(n);o=$$(t.serverSyncTree_,s,l,i)}else if(r){const l=Ld(n,u=>en(u));o=U$(t.serverSyncTree_,s,l)}else{const l=en(n);o=Kp(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=x_(t,s)),ko(t.eventQueue_,a,o)}function TS(t,e){I_(t,"connected",e),e===!1&&hV(t)}function uV(t,e){er(e,(n,r)=>{I_(t,n,r)})}function I_(t,e,n){const r=new Ge("/.info/"+e),i=en(n);t.infoData_.updateSnapshot(r,i);const s=Kp(t.infoSyncTree_,r,i);ko(t.eventQueue_,r,s)}function cV(t){return t.nextWriteId_++}function hV(t){RN(t,"onDisconnectEvents");const e=bN(t),n=df();c0(t.onDisconnect_,De(),(i,s)=>{const o=W$(i,s,t.serverSyncTree_,e);nN(n,i,o)});let r=[];c0(n,De(),(i,s)=>{r=r.concat(Kp(t.serverSyncTree_,i,s));const o=mV(t,i);x_(t,o)}),t.onDisconnect_=df(),ko(t.eventQueue_,De(),r)}function dV(t){t.persistentConnection_&&t.persistentConnection_.interrupt(iV)}function RN(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Jt(n,...e)}function NN(t,e,n){return yN(t.serverSyncTree_,e,n)||Re.EMPTY_NODE}function k_(t,e=t.transactionQueueTree_){if(e||Yp(t,e),ul(e)){const n=ON(t,e);$(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&fV(t,Wc(e),n)}else TN(e)&&Qp(e,n=>{k_(t,n)})}function fV(t,e,n){const r=n.map(u=>u.currentWriteId),i=NN(t,e,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const c=n[u];$(c.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;const h=Gn(e,c.path);s=s.updateChild(h,c.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,u=>{RN(t,"transaction put response",{path:l.toString(),status:u});let c=[];if(u==="ok"){const h=[];for(let d=0;d<n.length;d++)n[d].status=2,c=c.concat(Xo(t.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&h.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();Yp(t,T_(t.transactionQueueTree_,e)),k_(t,t.transactionQueueTree_),ko(t.eventQueue_,e,c);for(let d=0;d<h.length;d++)zc(h[d])}else{if(u==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{Ln("transaction at "+l.toString()+" failed: "+u);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=u}x_(t,e)}},o)}function x_(t,e){const n=AN(t,e),r=Wc(n),i=ON(t,n);return pV(t,i,r),r}function pV(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],u=Gn(n,l.path);let c=!1,h;if($(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)c=!0,h=l.abortReason,i=i.concat(Xo(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=sV)c=!0,h="maxretry",i=i.concat(Xo(t.serverSyncTree_,l.currentWriteId,!0));else{const d=NN(t,l.path,o);l.currentInputSnapshot=d;const p=e[a].update(d.val());if(p!==void 0){xN("transaction failed: Data returned ",p,l.path);let g=en(p);typeof p=="object"&&p!=null&&Ii(p,".priority")||(g=g.updatePriority(d.getPriority()));const w=l.currentWriteId,y=bN(t),f=q$(g,d,y);l.currentOutputSnapshotRaw=g,l.currentOutputSnapshotResolved=f,l.currentWriteId=cV(t),o.splice(o.indexOf(w),1),i=i.concat(F$(t.serverSyncTree_,l.path,f,l.currentWriteId,l.applyLocally)),i=i.concat(Xo(t.serverSyncTree_,w,!0))}else c=!0,h="nodata",i=i.concat(Xo(t.serverSyncTree_,l.currentWriteId,!0))}ko(t.eventQueue_,n,i),i=[],c&&(e[a].status=2,function(d){setTimeout(d,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(h),!1,null))))}Yp(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)zc(r[a]);k_(t,t.transactionQueueTree_)}function AN(t,e){let n,r=t.transactionQueueTree_;for(n=Se(e);n!==null&&ul(r)===void 0;)r=T_(r,n),e=We(e),n=Se(e);return r}function ON(t,e){const n=[];return PN(t,e,n),n.sort((r,i)=>r.order-i.order),n}function PN(t,e,n){const r=ul(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Qp(e,i=>{PN(t,i,n)})}function Yp(t,e){const n=ul(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,CN(e,n.length>0?n:void 0)}Qp(e,r=>{Yp(t,r)})}function mV(t,e){const n=Wc(AN(t,e)),r=T_(t.transactionQueueTree_,e);return K$(r,i=>{mg(t,i)}),mg(t,r),IN(r,i=>{mg(t,i)}),n}function mg(t,e){const n=ul(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?($(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):($(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Xo(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?CN(e,void 0):n.length=s+1,ko(t.eventQueue_,Wc(e),i);for(let o=0;o<r.length;o++)zc(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gV(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function yV(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ln(`Invalid query segment '${n}' in query '${t}'`)}return e}const IS=function(t,e){const n=vV(t),r=n.namespace;n.domain==="firebase.com"&&co(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&co("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||KF();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new iU(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Ge(n.pathString)}},vV=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let c=t.indexOf("/");c===-1&&(c=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(c,h)),c<h&&(i=gV(t.substring(c,h)));const d=yV(t.substring(Math.min(t.length,h)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(u+1),10)):u=e.length;const p=e.slice(0,u);if(p.toLowerCase()==="localhost")n="localhost";else if(p.split(".").length<=2)n=p;else{const g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return _e(this._path)?null:HR(this._path)}get ref(){return new cl(this._repo,this._path)}get _queryIdentifier(){const e=cS(this._queryParams),n=l_(e);return n==="{}"?"default":n}get _queryObject(){return cS(this._queryParams)}isEqual(e){if(e=Xe(e),!(e instanceof b_))return!1;const n=this._repo===e._repo,r=QR(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+NU(this._path)}}class cl extends b_{constructor(e,n){super(e,n,new p_,!1)}get parent(){const e=GR(this._path);return e===null?null:new cl(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}M$(cl);L$(cl);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V="FIREBASE_DATABASE_EMULATOR_HOST",v0={};let wV=!1;function EV(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||co("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Jt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=IS(s,i),a=o.repoInfo,l,u;typeof process<"u"&&process.env&&(u=process.env[_V]),u?(l=!0,s=`http://${u}?ns=${a.namespace}`,o=IS(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const c=i&&l?new a0(a0.OWNER):new rU(t.name,t.options,e);J$("Invalid Firebase Database URL",o),_e(o.path)||co("Database URL must point to the root of a Firebase Database (not including a child path).");const h=CV(a,t,c,new nU(t.name,n));return new TV(h,t)}function SV(t,e){const n=v0[e];(!n||n[t.key]!==t)&&co(`Database ${e}(${t.repoInfo_}) has already been deleted.`),dV(t),delete n[t.key]}function CV(t,e,n,r){let i=v0[e.name];i||(i={},v0[e.name]=i);let s=i[t.toURLString()];return s&&co("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new oV(t,wV,n,r),i[t.toURLString()]=s,s}class TV{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(aV(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new cl(this._repo,De())),this._rootInternal}_delete(){return this._rootInternal!==null&&(SV(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&co("Cannot call "+e+" on a deleted database.")}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IV(t){zF(Ss),cs(new mi("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return EV(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Yn(H2,K2,t),Yn(H2,K2,"esm2017")}li.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};li.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};IV();var ke;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(ke||(ke={}));var _0;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(_0||(_0={}));const z=ke.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ji=t=>{switch(typeof t){case"undefined":return z.undefined;case"string":return z.string;case"number":return isNaN(t)?z.nan:z.number;case"boolean":return z.boolean;case"function":return z.function;case"bigint":return z.bigint;case"symbol":return z.symbol;case"object":return Array.isArray(t)?z.array:t===null?z.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?z.promise:typeof Map<"u"&&t instanceof Map?z.map:typeof Set<"u"&&t instanceof Set?z.set:typeof Date<"u"&&t instanceof Date?z.date:z.object;default:return z.unknown}},M=ke.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),kV=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class gr extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,l=0;for(;l<o.path.length;){const u=o.path[l];l===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(n(o))):a[u]=a[u]||{_errors:[]},a=a[u],l++}}};return i(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,ke.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}gr.create=t=>new gr(t);const Xu=(t,e)=>{let n;switch(t.code){case M.invalid_type:t.received===z.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case M.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,ke.jsonStringifyReplacer)}`;break;case M.unrecognized_keys:n=`Unrecognized key(s) in object: ${ke.joinValues(t.keys,", ")}`;break;case M.invalid_union:n="Invalid input";break;case M.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ke.joinValues(t.options)}`;break;case M.invalid_enum_value:n=`Invalid enum value. Expected ${ke.joinValues(t.options)}, received '${t.received}'`;break;case M.invalid_arguments:n="Invalid function arguments";break;case M.invalid_return_type:n="Invalid function return type";break;case M.invalid_date:n="Invalid date";break;case M.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:ke.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case M.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case M.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case M.custom:n="Invalid input";break;case M.invalid_intersection_types:n="Intersection results could not be merged";break;case M.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case M.not_finite:n="Number must be finite";break;default:n=e.defaultError,ke.assertNever(t)}return{message:n}};let DN=Xu;function xV(t){DN=t}function gf(){return DN}const yf=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],o={...i,path:s};let a="";const l=r.filter(u=>!!u).slice().reverse();for(const u of l)a=u(o,{data:e,defaultError:a}).message;return{...i,path:s,message:i.message||a}},bV=[];function B(t,e){const n=yf({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,gf(),Xu].filter(r=>!!r)});t.common.issues.push(n)}class hn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return ue;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n)r.push({key:await i.key,value:await i.value});return hn.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return ue;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const ue=Object.freeze({status:"aborted"}),MN=t=>({status:"dirty",value:t}),_n=t=>({status:"valid",value:t}),w0=t=>t.status==="aborted",E0=t=>t.status==="dirty",vf=t=>t.status==="valid",_f=t=>typeof Promise<"u"&&t instanceof Promise;var te;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(te||(te={}));class zr{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const kS=(t,e)=>{if(vf(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new gr(t.common.issues);return this._error=n,this._error}}};function de(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:i}}class me{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return ji(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:ji(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new hn,ctx:{common:e.parent.common,data:e.data,parsedType:ji(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(_f(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const i={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ji(e)},s=this._parseSync({data:e,path:i.path,parent:i});return kS(i,s)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ji(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(_f(i)?i:Promise.resolve(i));return kS(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:M.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Cr({schema:this,typeName:ne.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ui.create(this,this._def)}nullable(){return yo.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return yr.create(this,this._def)}promise(){return $a.create(this,this._def)}or(e){return nc.create([this,e],this._def)}and(e){return rc.create(this,e,this._def)}transform(e){return new Cr({...de(this._def),schema:this,typeName:ne.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new lc({...de(this._def),innerType:this,defaultValue:n,typeName:ne.ZodDefault})}brand(){return new FN({typeName:ne.ZodBranded,type:this,...de(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Cf({...de(this._def),innerType:this,catchValue:n,typeName:ne.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return qc.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const RV=/^c[^\s-]{8,}$/i,NV=/^[a-z][a-z0-9]*$/,AV=/[0-9A-HJKMNP-TV-Z]{26}/,OV=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,PV=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,DV=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,MV=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,LV=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,FV=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function UV(t,e){return!!((e==="v4"||!e)&&MV.test(t)||(e==="v6"||!e)&&LV.test(t))}class dr extends me{constructor(){super(...arguments),this._regex=(e,n,r)=>this.refinement(i=>e.test(i),{validation:n,code:M.invalid_string,...te.errToObj(r)}),this.nonempty=e=>this.min(1,te.errToObj(e)),this.trim=()=>new dr({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new dr({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new dr({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==z.string){const s=this._getOrReturnCtx(e);return B(s,{code:M.invalid_type,expected:z.string,received:s.parsedType}),ue}const r=new hn;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),B(i,{code:M.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),B(i,{code:M.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?B(i,{code:M.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&B(i,{code:M.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")PV.test(e.data)||(i=this._getOrReturnCtx(e,i),B(i,{validation:"email",code:M.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")DV.test(e.data)||(i=this._getOrReturnCtx(e,i),B(i,{validation:"emoji",code:M.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")OV.test(e.data)||(i=this._getOrReturnCtx(e,i),B(i,{validation:"uuid",code:M.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")RV.test(e.data)||(i=this._getOrReturnCtx(e,i),B(i,{validation:"cuid",code:M.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")NV.test(e.data)||(i=this._getOrReturnCtx(e,i),B(i,{validation:"cuid2",code:M.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")AV.test(e.data)||(i=this._getOrReturnCtx(e,i),B(i,{validation:"ulid",code:M.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),B(i,{validation:"url",code:M.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),B(i,{validation:"regex",code:M.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),B(i,{code:M.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),B(i,{code:M.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),B(i,{code:M.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?FV(s).test(e.data)||(i=this._getOrReturnCtx(e,i),B(i,{code:M.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="ip"?UV(e.data,s.version)||(i=this._getOrReturnCtx(e,i),B(i,{validation:"ip",code:M.invalid_string,message:s.message}),r.dirty()):ke.assertNever(s);return{status:r.value,value:e.data}}_addCheck(e){return new dr({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...te.errToObj(e)})}url(e){return this._addCheck({kind:"url",...te.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...te.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...te.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...te.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...te.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...te.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...te.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...te.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...te.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...te.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...te.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...te.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...te.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...te.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...te.errToObj(n)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}dr.create=t=>{var e;return new dr({checks:[],typeName:ne.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...de(t)})};function $V(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class ms extends me{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==z.number){const s=this._getOrReturnCtx(e);return B(s,{code:M.invalid_type,expected:z.number,received:s.parsedType}),ue}let r;const i=new hn;for(const s of this._def.checks)s.kind==="int"?ke.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),B(r,{code:M.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),B(r,{code:M.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),B(r,{code:M.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?$V(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),B(r,{code:M.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),B(r,{code:M.not_finite,message:s.message}),i.dirty()):ke.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,te.toString(n))}gt(e,n){return this.setLimit("min",e,!1,te.toString(n))}lte(e,n){return this.setLimit("max",e,!0,te.toString(n))}lt(e,n){return this.setLimit("max",e,!1,te.toString(n))}setLimit(e,n,r,i){return new ms({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:te.toString(i)}]})}_addCheck(e){return new ms({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:te.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:te.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:te.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:te.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:te.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:te.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:te.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:te.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:te.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ke.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}ms.create=t=>new ms({checks:[],typeName:ne.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...de(t)});class gs extends me{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==z.bigint){const s=this._getOrReturnCtx(e);return B(s,{code:M.invalid_type,expected:z.bigint,received:s.parsedType}),ue}let r;const i=new hn;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),B(r,{code:M.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),B(r,{code:M.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),B(r,{code:M.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):ke.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,te.toString(n))}gt(e,n){return this.setLimit("min",e,!1,te.toString(n))}lte(e,n){return this.setLimit("max",e,!0,te.toString(n))}lt(e,n){return this.setLimit("max",e,!1,te.toString(n))}setLimit(e,n,r,i){return new gs({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:te.toString(i)}]})}_addCheck(e){return new gs({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:te.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:te.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:te.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:te.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:te.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}gs.create=t=>{var e;return new gs({checks:[],typeName:ne.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...de(t)})};class Ju extends me{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==z.boolean){const r=this._getOrReturnCtx(e);return B(r,{code:M.invalid_type,expected:z.boolean,received:r.parsedType}),ue}return _n(e.data)}}Ju.create=t=>new Ju({typeName:ne.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...de(t)});class mo extends me{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==z.date){const s=this._getOrReturnCtx(e);return B(s,{code:M.invalid_type,expected:z.date,received:s.parsedType}),ue}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return B(s,{code:M.invalid_date}),ue}const r=new hn;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),B(i,{code:M.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),B(i,{code:M.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):ke.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new mo({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:te.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:te.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}mo.create=t=>new mo({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:ne.ZodDate,...de(t)});class wf extends me{_parse(e){if(this._getType(e)!==z.symbol){const r=this._getOrReturnCtx(e);return B(r,{code:M.invalid_type,expected:z.symbol,received:r.parsedType}),ue}return _n(e.data)}}wf.create=t=>new wf({typeName:ne.ZodSymbol,...de(t)});class ec extends me{_parse(e){if(this._getType(e)!==z.undefined){const r=this._getOrReturnCtx(e);return B(r,{code:M.invalid_type,expected:z.undefined,received:r.parsedType}),ue}return _n(e.data)}}ec.create=t=>new ec({typeName:ne.ZodUndefined,...de(t)});class tc extends me{_parse(e){if(this._getType(e)!==z.null){const r=this._getOrReturnCtx(e);return B(r,{code:M.invalid_type,expected:z.null,received:r.parsedType}),ue}return _n(e.data)}}tc.create=t=>new tc({typeName:ne.ZodNull,...de(t)});class Ua extends me{constructor(){super(...arguments),this._any=!0}_parse(e){return _n(e.data)}}Ua.create=t=>new Ua({typeName:ne.ZodAny,...de(t)});class Zs extends me{constructor(){super(...arguments),this._unknown=!0}_parse(e){return _n(e.data)}}Zs.create=t=>new Zs({typeName:ne.ZodUnknown,...de(t)});class Si extends me{_parse(e){const n=this._getOrReturnCtx(e);return B(n,{code:M.invalid_type,expected:z.never,received:n.parsedType}),ue}}Si.create=t=>new Si({typeName:ne.ZodNever,...de(t)});class Ef extends me{_parse(e){if(this._getType(e)!==z.undefined){const r=this._getOrReturnCtx(e);return B(r,{code:M.invalid_type,expected:z.void,received:r.parsedType}),ue}return _n(e.data)}}Ef.create=t=>new Ef({typeName:ne.ZodVoid,...de(t)});class yr extends me{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==z.array)return B(n,{code:M.invalid_type,expected:z.array,received:n.parsedType}),ue;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,a=n.data.length<i.exactLength.value;(o||a)&&(B(n,{code:o?M.too_big:M.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(B(n,{code:M.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(B(n,{code:M.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>i.type._parseAsync(new zr(n,o,n.path,a)))).then(o=>hn.mergeArray(r,o));const s=[...n.data].map((o,a)=>i.type._parseSync(new zr(n,o,n.path,a)));return hn.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new yr({...this._def,minLength:{value:e,message:te.toString(n)}})}max(e,n){return new yr({...this._def,maxLength:{value:e,message:te.toString(n)}})}length(e,n){return new yr({...this._def,exactLength:{value:e,message:te.toString(n)}})}nonempty(e){return this.min(1,e)}}yr.create=(t,e)=>new yr({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ne.ZodArray,...de(e)});function Lo(t){if(t instanceof tt){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=ui.create(Lo(r))}return new tt({...t._def,shape:()=>e})}else return t instanceof yr?new yr({...t._def,type:Lo(t.element)}):t instanceof ui?ui.create(Lo(t.unwrap())):t instanceof yo?yo.create(Lo(t.unwrap())):t instanceof Br?Br.create(t.items.map(e=>Lo(e))):t}class tt extends me{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=ke.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==z.object){const u=this._getOrReturnCtx(e);return B(u,{code:M.invalid_type,expected:z.object,received:u.parsedType}),ue}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Si&&this._def.unknownKeys==="strip"))for(const u in i.data)o.includes(u)||a.push(u);const l=[];for(const u of o){const c=s[u],h=i.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new zr(i,h,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof Si){const u=this._def.unknownKeys;if(u==="passthrough")for(const c of a)l.push({key:{status:"valid",value:c},value:{status:"valid",value:i.data[c]}});else if(u==="strict")a.length>0&&(B(i,{code:M.unrecognized_keys,keys:a}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const c of a){const h=i.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new zr(i,h,i.path,c)),alwaysSet:c in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const c of l){const h=await c.key;u.push({key:h,value:await c.value,alwaysSet:c.alwaysSet})}return u}).then(u=>hn.mergeObjectSync(r,u)):hn.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return te.errToObj,new tt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,s,o,a;const l=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=te.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new tt({...this._def,unknownKeys:"strip"})}passthrough(){return new tt({...this._def,unknownKeys:"passthrough"})}extend(e){return new tt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new tt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ne.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new tt({...this._def,catchall:e})}pick(e){const n={};return ke.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new tt({...this._def,shape:()=>n})}omit(e){const n={};return ke.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new tt({...this._def,shape:()=>n})}deepPartial(){return Lo(this)}partial(e){const n={};return ke.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new tt({...this._def,shape:()=>n})}required(e){const n={};return ke.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof ui;)s=s._def.innerType;n[r]=s}}),new tt({...this._def,shape:()=>n})}keyof(){return LN(ke.objectKeys(this.shape))}}tt.create=(t,e)=>new tt({shape:()=>t,unknownKeys:"strip",catchall:Si.create(),typeName:ne.ZodObject,...de(e)});tt.strictCreate=(t,e)=>new tt({shape:()=>t,unknownKeys:"strict",catchall:Si.create(),typeName:ne.ZodObject,...de(e)});tt.lazycreate=(t,e)=>new tt({shape:t,unknownKeys:"strip",catchall:Si.create(),typeName:ne.ZodObject,...de(e)});class nc extends me{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new gr(a.ctx.common.issues));return B(n,{code:M.invalid_union,unionErrors:o}),ue}if(n.common.async)return Promise.all(r.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const l of r){const u={...n,common:{...n.common,issues:[]},parent:null},c=l._parseSync({data:n.data,path:n.path,parent:u});if(c.status==="valid")return c;c.status==="dirty"&&!s&&(s={result:c,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new gr(l));return B(n,{code:M.invalid_union,unionErrors:a}),ue}}get options(){return this._def.options}}nc.create=(t,e)=>new nc({options:t,typeName:ne.ZodUnion,...de(e)});const rd=t=>t instanceof sc?rd(t.schema):t instanceof Cr?rd(t.innerType()):t instanceof oc?[t.value]:t instanceof ys?t.options:t instanceof ac?Object.keys(t.enum):t instanceof lc?rd(t._def.innerType):t instanceof ec?[void 0]:t instanceof tc?[null]:null;class Zp extends me{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==z.object)return B(n,{code:M.invalid_type,expected:z.object,received:n.parsedType}),ue;const r=this.discriminator,i=n.data[r],s=this.optionsMap.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(B(n,{code:M.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),ue)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const i=new Map;for(const s of n){const o=rd(s.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,s)}}return new Zp({typeName:ne.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...de(r)})}}function S0(t,e){const n=ji(t),r=ji(e);if(t===e)return{valid:!0,data:t};if(n===z.object&&r===z.object){const i=ke.objectKeys(e),s=ke.objectKeys(t).filter(a=>i.indexOf(a)!==-1),o={...t,...e};for(const a of s){const l=S0(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===z.array&&r===z.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],l=S0(o,a);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return n===z.date&&r===z.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class rc extends me{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(w0(s)||w0(o))return ue;const a=S0(s.value,o.value);return a.valid?((E0(s)||E0(o))&&n.dirty(),{status:n.value,value:a.data}):(B(r,{code:M.invalid_intersection_types}),ue)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}rc.create=(t,e,n)=>new rc({left:t,right:e,typeName:ne.ZodIntersection,...de(n)});class Br extends me{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==z.array)return B(r,{code:M.invalid_type,expected:z.array,received:r.parsedType}),ue;if(r.data.length<this._def.items.length)return B(r,{code:M.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ue;!this._def.rest&&r.data.length>this._def.items.length&&(B(r,{code:M.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new zr(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>hn.mergeArray(n,o)):hn.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new Br({...this._def,rest:e})}}Br.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Br({items:t,typeName:ne.ZodTuple,rest:null,...de(e)})};class ic extends me{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==z.object)return B(r,{code:M.invalid_type,expected:z.object,received:r.parsedType}),ue;const i=[],s=this._def.keyType,o=this._def.valueType;for(const a in r.data)i.push({key:s._parse(new zr(r,a,r.path,a)),value:o._parse(new zr(r,r.data[a],r.path,a))});return r.common.async?hn.mergeObjectAsync(n,i):hn.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof me?new ic({keyType:e,valueType:n,typeName:ne.ZodRecord,...de(r)}):new ic({keyType:dr.create(),valueType:e,typeName:ne.ZodRecord,...de(n)})}}class Sf extends me{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==z.map)return B(r,{code:M.invalid_type,expected:z.map,received:r.parsedType}),ue;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([a,l],u)=>({key:i._parse(new zr(r,a,r.path,[u,"key"])),value:s._parse(new zr(r,l,r.path,[u,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const u=await l.key,c=await l.value;if(u.status==="aborted"||c.status==="aborted")return ue;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(u.value,c.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const u=l.key,c=l.value;if(u.status==="aborted"||c.status==="aborted")return ue;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(u.value,c.value)}return{status:n.value,value:a}}}}Sf.create=(t,e,n)=>new Sf({valueType:e,keyType:t,typeName:ne.ZodMap,...de(n)});class go extends me{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==z.set)return B(r,{code:M.invalid_type,expected:z.set,received:r.parsedType}),ue;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(B(r,{code:M.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(B(r,{code:M.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(l){const u=new Set;for(const c of l){if(c.status==="aborted")return ue;c.status==="dirty"&&n.dirty(),u.add(c.value)}return{status:n.value,value:u}}const a=[...r.data.values()].map((l,u)=>s._parse(new zr(r,l,r.path,u)));return r.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new go({...this._def,minSize:{value:e,message:te.toString(n)}})}max(e,n){return new go({...this._def,maxSize:{value:e,message:te.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}go.create=(t,e)=>new go({valueType:t,minSize:null,maxSize:null,typeName:ne.ZodSet,...de(e)});class pa extends me{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==z.function)return B(n,{code:M.invalid_type,expected:z.function,received:n.parsedType}),ue;function r(a,l){return yf({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,gf(),Xu].filter(u=>!!u),issueData:{code:M.invalid_arguments,argumentsError:l}})}function i(a,l){return yf({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,gf(),Xu].filter(u=>!!u),issueData:{code:M.invalid_return_type,returnTypeError:l}})}const s={errorMap:n.common.contextualErrorMap},o=n.data;return this._def.returns instanceof $a?_n(async(...a)=>{const l=new gr([]),u=await this._def.args.parseAsync(a,s).catch(d=>{throw l.addIssue(r(a,d)),l}),c=await o(...u);return await this._def.returns._def.type.parseAsync(c,s).catch(d=>{throw l.addIssue(i(c,d)),l})}):_n((...a)=>{const l=this._def.args.safeParse(a,s);if(!l.success)throw new gr([r(a,l.error)]);const u=o(...l.data),c=this._def.returns.safeParse(u,s);if(!c.success)throw new gr([i(u,c.error)]);return c.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new pa({...this._def,args:Br.create(e).rest(Zs.create())})}returns(e){return new pa({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new pa({args:e||Br.create([]).rest(Zs.create()),returns:n||Zs.create(),typeName:ne.ZodFunction,...de(r)})}}class sc extends me{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}sc.create=(t,e)=>new sc({getter:t,typeName:ne.ZodLazy,...de(e)});class oc extends me{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return B(n,{received:n.data,code:M.invalid_literal,expected:this._def.value}),ue}return{status:"valid",value:e.data}}get value(){return this._def.value}}oc.create=(t,e)=>new oc({value:t,typeName:ne.ZodLiteral,...de(e)});function LN(t,e){return new ys({values:t,typeName:ne.ZodEnum,...de(e)})}class ys extends me{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return B(n,{expected:ke.joinValues(r),received:n.parsedType,code:M.invalid_type}),ue}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return B(n,{received:n.data,code:M.invalid_enum_value,options:r}),ue}return _n(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return ys.create(e)}exclude(e){return ys.create(this.options.filter(n=>!e.includes(n)))}}ys.create=LN;class ac extends me{_parse(e){const n=ke.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==z.string&&r.parsedType!==z.number){const i=ke.objectValues(n);return B(r,{expected:ke.joinValues(i),received:r.parsedType,code:M.invalid_type}),ue}if(n.indexOf(e.data)===-1){const i=ke.objectValues(n);return B(r,{received:r.data,code:M.invalid_enum_value,options:i}),ue}return _n(e.data)}get enum(){return this._def.values}}ac.create=(t,e)=>new ac({values:t,typeName:ne.ZodNativeEnum,...de(e)});class $a extends me{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==z.promise&&n.common.async===!1)return B(n,{code:M.invalid_type,expected:z.promise,received:n.parsedType}),ue;const r=n.parsedType===z.promise?n.data:Promise.resolve(n.data);return _n(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}$a.create=(t,e)=>new $a({type:t,typeName:ne.ZodPromise,...de(e)});class Cr extends me{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ne.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null;if(i.type==="preprocess"){const o=i.transform(r.data);return r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}const s={addIssue:o=>{B(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="refinement"){const o=a=>{const l=i.refinement(a,s);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?ue:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?ue:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!vf(o))return o;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>vf(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:n.value,value:a})):o);ke.assertNever(i)}}Cr.create=(t,e,n)=>new Cr({schema:t,typeName:ne.ZodEffects,effect:e,...de(n)});Cr.createWithPreprocess=(t,e,n)=>new Cr({schema:e,effect:{type:"preprocess",transform:t},typeName:ne.ZodEffects,...de(n)});class ui extends me{_parse(e){return this._getType(e)===z.undefined?_n(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ui.create=(t,e)=>new ui({innerType:t,typeName:ne.ZodOptional,...de(e)});class yo extends me{_parse(e){return this._getType(e)===z.null?_n(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}yo.create=(t,e)=>new yo({innerType:t,typeName:ne.ZodNullable,...de(e)});class lc extends me{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===z.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}lc.create=(t,e)=>new lc({innerType:t,typeName:ne.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...de(e)});class Cf extends me{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return _f(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new gr(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new gr(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Cf.create=(t,e)=>new Cf({innerType:t,typeName:ne.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...de(e)});class Tf extends me{_parse(e){if(this._getType(e)!==z.nan){const r=this._getOrReturnCtx(e);return B(r,{code:M.invalid_type,expected:z.nan,received:r.parsedType}),ue}return{status:"valid",value:e.data}}}Tf.create=t=>new Tf({typeName:ne.ZodNaN,...de(t)});const VV=Symbol("zod_brand");class FN extends me{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class qc extends me{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?ue:s.status==="dirty"?(n.dirty(),MN(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?ue:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new qc({in:e,out:n,typeName:ne.ZodPipeline})}}const UN=(t,e={},n)=>t?Ua.create().superRefine((r,i)=>{var s,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,l=(o=(s=a.fatal)!==null&&s!==void 0?s:n)!==null&&o!==void 0?o:!0,u=typeof a=="string"?{message:a}:a;i.addIssue({code:"custom",...u,fatal:l})}}):Ua.create(),jV={object:tt.lazycreate};var ne;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline"})(ne||(ne={}));const zV=(t,e={message:`Input not instance of ${t.name}`})=>UN(n=>n instanceof t,e),vs=dr.create,$N=ms.create,BV=Tf.create,WV=gs.create,VN=Ju.create,qV=mo.create,HV=wf.create,KV=ec.create,GV=tc.create,QV=Ua.create,YV=Zs.create,ZV=Si.create,XV=Ef.create,JV=yr.create,ej=tt.create,tj=tt.strictCreate,nj=nc.create,rj=Zp.create,ij=rc.create,sj=Br.create,oj=ic.create,aj=Sf.create,lj=go.create,uj=pa.create,cj=sc.create,hj=oc.create,dj=ys.create,fj=ac.create,pj=$a.create,xS=Cr.create,mj=ui.create,gj=yo.create,yj=Cr.createWithPreprocess,vj=qc.create,_j=()=>vs().optional(),wj=()=>$N().optional(),Ej=()=>VN().optional(),Sj={string:t=>dr.create({...t,coerce:!0}),number:t=>ms.create({...t,coerce:!0}),boolean:t=>Ju.create({...t,coerce:!0}),bigint:t=>gs.create({...t,coerce:!0}),date:t=>mo.create({...t,coerce:!0})},Cj=ue;var Ee=Object.freeze({__proto__:null,defaultErrorMap:Xu,setErrorMap:xV,getErrorMap:gf,makeIssue:yf,EMPTY_PATH:bV,addIssueToContext:B,ParseStatus:hn,INVALID:ue,DIRTY:MN,OK:_n,isAborted:w0,isDirty:E0,isValid:vf,isAsync:_f,get util(){return ke},get objectUtil(){return _0},ZodParsedType:z,getParsedType:ji,ZodType:me,ZodString:dr,ZodNumber:ms,ZodBigInt:gs,ZodBoolean:Ju,ZodDate:mo,ZodSymbol:wf,ZodUndefined:ec,ZodNull:tc,ZodAny:Ua,ZodUnknown:Zs,ZodNever:Si,ZodVoid:Ef,ZodArray:yr,ZodObject:tt,ZodUnion:nc,ZodDiscriminatedUnion:Zp,ZodIntersection:rc,ZodTuple:Br,ZodRecord:ic,ZodMap:Sf,ZodSet:go,ZodFunction:pa,ZodLazy:sc,ZodLiteral:oc,ZodEnum:ys,ZodNativeEnum:ac,ZodPromise:$a,ZodEffects:Cr,ZodTransformer:Cr,ZodOptional:ui,ZodNullable:yo,ZodDefault:lc,ZodCatch:Cf,ZodNaN:Tf,BRAND:VV,ZodBranded:FN,ZodPipeline:qc,custom:UN,Schema:me,ZodSchema:me,late:jV,get ZodFirstPartyTypeKind(){return ne},coerce:Sj,any:QV,array:JV,bigint:WV,boolean:VN,date:qV,discriminatedUnion:rj,effect:xS,enum:dj,function:uj,instanceof:zV,intersection:ij,lazy:cj,literal:hj,map:aj,nan:BV,nativeEnum:fj,never:ZV,null:GV,nullable:gj,number:$N,object:ej,oboolean:Ej,onumber:wj,optional:mj,ostring:_j,pipeline:vj,preprocess:yj,promise:pj,record:oj,set:lj,strictObject:tj,string:vs,symbol:HV,transformer:xS,tuple:sj,undefined:KV,union:nj,unknown:YV,void:XV,NEVER:Cj,ZodIssueCode:M,quotelessJson:kV,ZodError:gr});Ee.object({email:Ee.string().email(),password:Ee.string().min(1),rememberMe:Ee.boolean()});const jN=Ee.object({email:Ee.string().email("email is not valid"),password:Ee.string().min(8),confirmPassword:Ee.string().min(8),username:Ee.string().min(4),type:Ee.string().min(1).max(1),profile_photo:Ee.string().optional()}).refine(t=>t.password===t.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});el(Me,"users");async function xo(t){if(!t)throw new Error("id cannot be empty");const e=it(Me,"users",t),n=await vn(e);if(n.exists())return n.data();throw new Error("User dows not exist")}async function Tj(t,e){if(!t)throw new Error("id cannot be empty");if(!e)throw new Error("user cannot be empty");if(jN.safeParse(e).success===!1)throw new Error("user must be a valid SignUpData object");const n=it(Me,"users",t);return await E8(n,e)}async function Ij(t,e){if(!t)throw new Error("userId cannot be empty");if(!e)throw new Error("image cannot be empty");const n=zb(Bb,`profile photos/${t}`);await Vb(n,e);const r=await jb(n),i=it(Me,"users",t);return await os(i,{profile_photo:r})}const W=jF(H1);async function kj(t){const{user:{uid:e}}=await x7(W,t.email,t.password);return await Tj(e,t)}async function xj(t){t.rememberMe?await L2(W,mR):await L2(W,s_);const e=await b7(W,t.email,t.password);return t.rememberMe?window.localStorage.setItem("currentUser",JSON.stringify(e)):window.sessionStorage.setItem("currentUser",JSON.stringify(e)),e}async function bj(){return await W.currentUser}const Rj=Ee.object({text:Ee.string().min(1),images:Ee.array(Ee.instanceof(File))});Ee.object({id:Ee.string(),comment_ids:Ee.array(Ee.string()),votes:Ee.number(),voter_ids:Ee.array(Ee.object({id:Ee.string(),vote:Ee.enum(["up","down"])})),text:Ee.string().min(1),user_id:Ee.string(),created_at:Ee.instanceof(Ze),user_data:jN,images:Ee.array(Ee.string())});const uc=el(Me,"posts");async function Nj(){const t=Ma(uc,ef("created_at","desc")),n=(await $p(t)).docs.map(r=>({id:r.id,...r.data()}));return await Promise.all(n.map(async r=>{const i=(await vn(it(Me,"users",r.user_id))).data();return{...r,user_data:i}}))}function Aj(){let t,e;return async function(){console.log("last snap",e),e?t=Ma(uc,ef("created_at","desc"),v2(3),y8(e.docs.at(-1))):t=Ma(uc,ef("created_at","desc"),v2(3)),e=await $p(t);const n=e.docs.map(r=>({id:r.id,...r.data()}));return await Promise.all(n.map(async r=>{const i=(await vn(it(Me,"users",r.user_id))).data();return{...r,user_data:i}}))}}const Oj=Aj();async function Pj(t){if(!t)throw new Error("userId cannot be empty");const e=(await vn(it(Me,"users",t))).data(),n=Ma(uc,gb("user_id","==",t));return(await $p(n)).docs.map(i=>({id:i.id,...i.data(),user_data:e}))}async function Dj(t){var i;if(!t)throw new Error("post cannot be empty");if(Rj.safeParse(t).success===!1)throw new Error("post must be a valid Post object");console.log("post from api",t);const e=await Vp(uc,{text:t.text,created_at:Ze.now(),user_id:(i=W==null?void 0:W.currentUser)==null?void 0:i.uid,comment_ids:[],votes:0,voter_ids:[]});console.log("doc added",e.id);const{images:n}=t,r=await Promise.all(n.map(async s=>{const o=zb(Bb,`posts/${e.id}/${s.name}`);return await Vb(o,s),await jb(o)}));return console.log("urls",r),await os(it(Me,"posts",e.id),{images:r}),console.log("doc updated"),e.id}async function Mj(t){if(!t)throw new Error("id cannot be empty");const e=it(Me,"posts",t);return await S8(e)}async function Lj(t,e){var s,o,a,l;if(e!=="up"&&e!=="down")throw new Error('Invalid vote, vote should only be "up" or "down"');const n=it(Me,"posts",t),r=(await vn(n)).data();if(console.log("current user id",(s=W==null?void 0:W.currentUser)==null?void 0:s.uid),console.log("doc data",r),(r==null?void 0:r.voter_ids.map(({id:u})=>u)).includes((o=W==null?void 0:W.currentUser)==null?void 0:o.uid)){const u=r==null?void 0:r.voter_ids.find(({id:h})=>{var d;return h===((d=W==null?void 0:W.currentUser)==null?void 0:d.uid)}),c=r==null?void 0:r.voter_ids.filter(({id:h})=>{var d;return h!==((d=W==null?void 0:W.currentUser)==null?void 0:d.uid)});return u.vote===e?await os(n,{votes:ng(e==="up"?-1:1),voter_ids:[...c]}):await os(n,{votes:ng(e==="up"?2:-2),voter_ids:[...c,{id:(l=W==null?void 0:W.currentUser)==null?void 0:l.uid,vote:e}]})}else return await os(n,{votes:ng(e==="up"?1:-1),voter_ids:zp({id:(a=W==null?void 0:W.currentUser)==null?void 0:a.uid,vote:e})})}var Hc=t=>t.type==="checkbox",Jo=t=>t instanceof Date,mn=t=>t==null;const zN=t=>typeof t=="object";var Tt=t=>!mn(t)&&!Array.isArray(t)&&zN(t)&&!Jo(t),Fj=t=>Tt(t)&&t.target?Hc(t.target)?t.target.checked:t.target.value:t,Uj=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,$j=(t,e)=>t.has(Uj(e)),Vj=t=>{const e=t.constructor&&t.constructor.prototype;return Tt(e)&&e.hasOwnProperty("isPrototypeOf")},R_=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ni(t){let e;const n=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(R_&&(t instanceof Blob||t instanceof FileList))&&(n||Tt(t)))if(e=n?[]:{},!n&&!Vj(t))e=t;else for(const r in t)t.hasOwnProperty(r)&&(e[r]=Ni(t[r]));else return t;return e}var Kc=t=>Array.isArray(t)?t.filter(Boolean):[],pt=t=>t===void 0,Q=(t,e,n)=>{if(!e||!Tt(t))return n;const r=Kc(e.split(/[,[\].]+?/)).reduce((i,s)=>mn(i)?i:i[s],t);return pt(r)||r===t?pt(t[e])?n:t[e]:r};const bS={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},cr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Qr={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};Nt.createContext(null);var jj=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==cr.all&&(e._proxyFormState[o]=!r||cr.all),n&&(n[o]=!0),t[o]}});return i},Bn=t=>Tt(t)&&!Object.keys(t).length,zj=(t,e,n,r)=>{n(t);const{name:i,...s}=t;return Bn(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!r||cr.all))},gg=t=>Array.isArray(t)?t:[t];function Bj(t){const e=Nt.useRef(t);e.current=t,Nt.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}var Pr=t=>typeof t=="string",Wj=(t,e,n,r,i)=>Pr(t)?(r&&e.watch.add(t),Q(n,t,i)):Array.isArray(t)?t.map(s=>(r&&e.watch.add(s),Q(n,s))):(r&&(e.watchAll=!0),n),N_=t=>/^\w*$/.test(t),BN=t=>Kc(t.replace(/["|']|\]/g,"").split(/\.|\[/));function $e(t,e,n){let r=-1;const i=N_(e)?[e]:BN(e),s=i.length,o=s-1;for(;++r<s;){const a=i[r];let l=n;if(r!==o){const u=t[a];l=Tt(u)||Array.isArray(u)?u:isNaN(+i[r+1])?{}:[]}t[a]=l,t=t[a]}return t}var WN=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{};const C0=(t,e,n)=>{for(const r of n||Object.keys(t)){const i=Q(t,r);if(i){const{_f:s,...o}=i;if(s&&e(s.name)){if(s.ref.focus){s.ref.focus();break}else if(s.refs&&s.refs[0].focus){s.refs[0].focus();break}}else Tt(o)&&C0(o,e)}}};var RS=t=>({isOnSubmit:!t||t===cr.onSubmit,isOnBlur:t===cr.onBlur,isOnChange:t===cr.onChange,isOnAll:t===cr.all,isOnTouch:t===cr.onTouched}),NS=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length)))),qj=(t,e,n)=>{const r=Kc(Q(t,n));return $e(r,"root",e[n]),$e(t,n,r),t},ma=t=>typeof t=="boolean",A_=t=>t.type==="file",Hi=t=>typeof t=="function",If=t=>{if(!R_)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},id=t=>Pr(t),O_=t=>t.type==="radio",kf=t=>t instanceof RegExp;const AS={value:!1,isValid:!1},OS={value:!0,isValid:!0};var qN=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!pt(t[0].attributes.value)?pt(t[0].value)||t[0].value===""?OS:{value:t[0].value,isValid:!0}:OS:AS}return AS};const PS={isValid:!1,value:null};var HN=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,PS):PS;function DS(t,e,n="validate"){if(id(t)||Array.isArray(t)&&t.every(id)||ma(t)&&!t)return{type:n,message:id(t)?t:"",ref:e}}var Po=t=>Tt(t)&&!kf(t)?t:{value:t,message:""},MS=async(t,e,n,r,i)=>{const{ref:s,refs:o,required:a,maxLength:l,minLength:u,min:c,max:h,pattern:d,validate:p,name:g,valueAsNumber:_,mount:w,disabled:y}=t._f,f=Q(e,g);if(!w||y)return{};const m=o?o[0]:s,E=he=>{r&&m.reportValidity&&(m.setCustomValidity(ma(he)?"":he||""),m.reportValidity())},C={},T=O_(s),b=Hc(s),k=T||b,H=(_||A_(s))&&pt(s.value)&&pt(f)||If(s)&&s.value===""||f===""||Array.isArray(f)&&!f.length,Y=WN.bind(null,g,n,C),be=(he,re,fe,Ne=Qr.maxLength,It=Qr.minLength)=>{const Mt=he?re:fe;C[g]={type:he?Ne:It,message:Mt,ref:s,...Y(he?Ne:It,Mt)}};if(i?!Array.isArray(f)||!f.length:a&&(!k&&(H||mn(f))||ma(f)&&!f||b&&!qN(o).isValid||T&&!HN(o).isValid)){const{value:he,message:re}=id(a)?{value:!!a,message:a}:Po(a);if(he&&(C[g]={type:Qr.required,message:re,ref:m,...Y(Qr.required,re)},!n))return E(re),C}if(!H&&(!mn(c)||!mn(h))){let he,re;const fe=Po(h),Ne=Po(c);if(!mn(f)&&!isNaN(f)){const It=s.valueAsNumber||f&&+f;mn(fe.value)||(he=It>fe.value),mn(Ne.value)||(re=It<Ne.value)}else{const It=s.valueAsDate||new Date(f),Mt=ie=>new Date(new Date().toDateString()+" "+ie),U=s.type=="time",G=s.type=="week";Pr(fe.value)&&f&&(he=U?Mt(f)>Mt(fe.value):G?f>fe.value:It>new Date(fe.value)),Pr(Ne.value)&&f&&(re=U?Mt(f)<Mt(Ne.value):G?f<Ne.value:It<new Date(Ne.value))}if((he||re)&&(be(!!he,fe.message,Ne.message,Qr.max,Qr.min),!n))return E(C[g].message),C}if((l||u)&&!H&&(Pr(f)||i&&Array.isArray(f))){const he=Po(l),re=Po(u),fe=!mn(he.value)&&f.length>+he.value,Ne=!mn(re.value)&&f.length<+re.value;if((fe||Ne)&&(be(fe,he.message,re.message),!n))return E(C[g].message),C}if(d&&!H&&Pr(f)){const{value:he,message:re}=Po(d);if(kf(he)&&!f.match(he)&&(C[g]={type:Qr.pattern,message:re,ref:s,...Y(Qr.pattern,re)},!n))return E(re),C}if(p){if(Hi(p)){const he=await p(f,e),re=DS(he,m);if(re&&(C[g]={...re,...Y(Qr.validate,re.message)},!n))return E(re.message),C}else if(Tt(p)){let he={};for(const re in p){if(!Bn(he)&&!n)break;const fe=DS(await p[re](f,e),m,re);fe&&(he={...fe,...Y(re,fe.message)},E(fe.message),n&&(C[g]=he))}if(!Bn(he)&&(C[g]={ref:m,...he},!n))return C}}return E(!0),C};function Hj(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=pt(t)?r++:t[e[r++]];return t}function Kj(t){for(const e in t)if(t.hasOwnProperty(e)&&!pt(t[e]))return!1;return!0}function Ut(t,e){const n=Array.isArray(e)?e:N_(e)?[e]:BN(e),r=n.length===1?t:Hj(t,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(Tt(r)&&Bn(r)||Array.isArray(r)&&Kj(r))&&Ut(t,n.slice(0,-1)),t}function yg(){let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}}var xf=t=>mn(t)||!zN(t);function Bs(t,e){if(xf(t)||xf(e))return t===e;if(Jo(t)&&Jo(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){const s=t[i];if(!r.includes(i))return!1;if(i!=="ref"){const o=e[i];if(Jo(s)&&Jo(o)||Tt(s)&&Tt(o)||Array.isArray(s)&&Array.isArray(o)?!Bs(s,o):s!==o)return!1}}return!0}var KN=t=>t.type==="select-multiple",Gj=t=>O_(t)||Hc(t),vg=t=>If(t)&&t.isConnected,GN=t=>{for(const e in t)if(Hi(t[e]))return!0;return!1};function bf(t,e={}){const n=Array.isArray(t);if(Tt(t)||n)for(const r in t)Array.isArray(t[r])||Tt(t[r])&&!GN(t[r])?(e[r]=Array.isArray(t[r])?[]:{},bf(t[r],e[r])):mn(t[r])||(e[r]=!0);return e}function QN(t,e,n){const r=Array.isArray(t);if(Tt(t)||r)for(const i in t)Array.isArray(t[i])||Tt(t[i])&&!GN(t[i])?pt(e)||xf(n[i])?n[i]=Array.isArray(t[i])?bf(t[i],[]):{...bf(t[i])}:QN(t[i],mn(e)?{}:e[i],n[i]):n[i]=!Bs(t[i],e[i]);return n}var _g=(t,e)=>QN(t,e,bf(e)),YN=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>pt(t)?t:e?t===""?NaN:t&&+t:n&&Pr(t)?new Date(t):r?r(t):t;function wg(t){const e=t.ref;if(!(t.refs?t.refs.every(n=>n.disabled):e.disabled))return A_(e)?e.files:O_(e)?HN(t.refs).value:KN(e)?[...e.selectedOptions].map(({value:n})=>n):Hc(e)?qN(t.refs).value:YN(pt(e.value)?t.ref.value:e.value,t)}var Qj=(t,e,n,r)=>{const i={};for(const s of t){const o=Q(e,s);o&&$e(i,s,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},Al=t=>pt(t)?t:kf(t)?t.source:Tt(t)?kf(t.value)?t.value.source:t.value:t,Yj=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function LS(t,e,n){const r=Q(t,n);if(r||N_(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),o=Q(e,s),a=Q(t,s);if(o&&!Array.isArray(o)&&n!==s)return{name:n};if(a&&a.type)return{name:s,error:a};i.pop()}return{name:n}}var Zj=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,Xj=(t,e)=>!Kc(Q(t,e)).length&&Ut(t,e);const Jj={mode:cr.onSubmit,reValidateMode:cr.onChange,shouldFocusError:!0};function ez(t={},e){let n={...Jj,...t},r={submitCount:0,isDirty:!1,isLoading:Hi(n.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},i={},s=Tt(n.defaultValues)||Tt(n.values)?Ni(n.defaultValues||n.values)||{}:{},o=n.shouldUnregister?{}:Ni(s),a={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},u,c=0;const h={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},d={values:yg(),array:yg(),state:yg()},p=t.resetOptions&&t.resetOptions.keepDirtyValues,g=RS(n.mode),_=RS(n.reValidateMode),w=n.criteriaMode===cr.all,y=S=>x=>{clearTimeout(c),c=setTimeout(S,x)},f=async S=>{if(h.isValid||S){const x=n.resolver?Bn((await H()).errors):await be(i,!0);x!==r.isValid&&d.state.next({isValid:x})}},m=S=>h.isValidating&&d.state.next({isValidating:S}),E=(S,x=[],N,K,j=!0,L=!0)=>{if(K&&N){if(a.action=!0,L&&Array.isArray(Q(i,S))){const ee=N(Q(i,S),K.argA,K.argB);j&&$e(i,S,ee)}if(L&&Array.isArray(Q(r.errors,S))){const ee=N(Q(r.errors,S),K.argA,K.argB);j&&$e(r.errors,S,ee),Xj(r.errors,S)}if(h.touchedFields&&L&&Array.isArray(Q(r.touchedFields,S))){const ee=N(Q(r.touchedFields,S),K.argA,K.argB);j&&$e(r.touchedFields,S,ee)}h.dirtyFields&&(r.dirtyFields=_g(s,o)),d.state.next({name:S,isDirty:re(S,x),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else $e(o,S,x)},C=(S,x)=>{$e(r.errors,S,x),d.state.next({errors:r.errors})},T=(S,x,N,K)=>{const j=Q(i,S);if(j){const L=Q(o,S,pt(N)?Q(s,S):N);pt(L)||K&&K.defaultChecked||x?$e(o,S,x?L:wg(j._f)):It(S,L),a.mount&&f()}},b=(S,x,N,K,j)=>{let L=!1,ee=!1;const Qe={name:S};if(!N||K){h.isDirty&&(ee=r.isDirty,r.isDirty=Qe.isDirty=re(),L=ee!==Qe.isDirty);const P=Bs(Q(s,S),x);ee=Q(r.dirtyFields,S),P?Ut(r.dirtyFields,S):$e(r.dirtyFields,S,!0),Qe.dirtyFields=r.dirtyFields,L=L||h.dirtyFields&&ee!==!P}if(N){const P=Q(r.touchedFields,S);P||($e(r.touchedFields,S,N),Qe.touchedFields=r.touchedFields,L=L||h.touchedFields&&P!==N)}return L&&j&&d.state.next(Qe),L?Qe:{}},k=(S,x,N,K)=>{const j=Q(r.errors,S),L=h.isValid&&ma(x)&&r.isValid!==x;if(t.delayError&&N?(u=y(()=>C(S,N)),u(t.delayError)):(clearTimeout(c),u=null,N?$e(r.errors,S,N):Ut(r.errors,S)),(N?!Bs(j,N):j)||!Bn(K)||L){const ee={...K,...L&&ma(x)?{isValid:x}:{},errors:r.errors,name:S};r={...r,...ee},d.state.next(ee)}m(!1)},H=async S=>n.resolver(o,n.context,Qj(S||l.mount,i,n.criteriaMode,n.shouldUseNativeValidation)),Y=async S=>{const{errors:x}=await H();if(S)for(const N of S){const K=Q(x,N);K?$e(r.errors,N,K):Ut(r.errors,N)}else r.errors=x;return x},be=async(S,x,N={valid:!0})=>{for(const K in S){const j=S[K];if(j){const{_f:L,...ee}=j;if(L){const Qe=l.array.has(L.name),P=await MS(j,o,w,n.shouldUseNativeValidation&&!x,Qe);if(P[L.name]&&(N.valid=!1,x))break;!x&&(Q(P,L.name)?Qe?qj(r.errors,P,L.name):$e(r.errors,L.name,P[L.name]):Ut(r.errors,L.name))}ee&&await be(ee,x,N)}}return N.valid},he=()=>{for(const S of l.unMount){const x=Q(i,S);x&&(x._f.refs?x._f.refs.every(N=>!vg(N)):!vg(x._f.ref))&&Et(S)}l.unMount=new Set},re=(S,x)=>(S&&x&&$e(o,S,x),!Bs(Le(),s)),fe=(S,x,N)=>Wj(S,l,{...a.mount?o:pt(x)?s:Pr(S)?{[S]:x}:x},N,x),Ne=S=>Kc(Q(a.mount?o:s,S,t.shouldUnregister?Q(s,S,[]):[])),It=(S,x,N={})=>{const K=Q(i,S);let j=x;if(K){const L=K._f;L&&(!L.disabled&&$e(o,S,YN(x,L)),j=If(L.ref)&&mn(x)?"":x,KN(L.ref)?[...L.ref.options].forEach(ee=>ee.selected=j.includes(ee.value)):L.refs?Hc(L.ref)?L.refs.length>1?L.refs.forEach(ee=>(!ee.defaultChecked||!ee.disabled)&&(ee.checked=Array.isArray(j)?!!j.find(Qe=>Qe===ee.value):j===ee.value)):L.refs[0]&&(L.refs[0].checked=!!j):L.refs.forEach(ee=>ee.checked=ee.value===j):A_(L.ref)?L.ref.value="":(L.ref.value=j,L.ref.type||d.values.next({name:S,values:{...o}})))}(N.shouldDirty||N.shouldTouch)&&b(S,j,N.shouldTouch,N.shouldDirty,!0),N.shouldValidate&&ie(S)},Mt=(S,x,N)=>{for(const K in x){const j=x[K],L=`${S}.${K}`,ee=Q(i,L);(l.array.has(S)||!xf(j)||ee&&!ee._f)&&!Jo(j)?Mt(L,j,N):It(L,j,N)}},U=(S,x,N={})=>{const K=Q(i,S),j=l.array.has(S),L=Ni(x);$e(o,S,L),j?(d.array.next({name:S,values:{...o}}),(h.isDirty||h.dirtyFields)&&N.shouldDirty&&d.state.next({name:S,dirtyFields:_g(s,o),isDirty:re(S,L)})):K&&!K._f&&!mn(L)?Mt(S,L,N):It(S,L,N),NS(S,l)&&d.state.next({...r}),d.values.next({name:S,values:{...o}}),!a.mount&&e()},G=async S=>{const x=S.target;let N=x.name,K=!0;const j=Q(i,N),L=()=>x.type?wg(j._f):Fj(S);if(j){let ee,Qe;const P=L(),J=S.type===bS.BLUR||S.type===bS.FOCUS_OUT,at=!Yj(j._f)&&!n.resolver&&!Q(r.errors,N)&&!j._f.deps||Zj(J,Q(r.touchedFields,N),r.isSubmitted,_,g),ft=NS(N,l,J);$e(o,N,P),J?(j._f.onBlur&&j._f.onBlur(S),u&&u(0)):j._f.onChange&&j._f.onChange(S);const Ft=b(N,P,J,!1),xs=!Bn(Ft)||ft;if(!J&&d.values.next({name:N,type:S.type,values:{...o}}),at)return h.isValid&&f(),xs&&d.state.next({name:N,...ft?{}:Ft});if(!J&&ft&&d.state.next({...r}),m(!0),n.resolver){const{errors:Gr}=await H([N]),ml=LS(r.errors,i,N),Ro=LS(Gr,i,ml.name||N);ee=Ro.error,N=Ro.name,Qe=Bn(Gr)}else ee=(await MS(j,o,w,n.shouldUseNativeValidation))[N],K=isNaN(P)||P===Q(o,N,P),K&&(ee?Qe=!1:h.isValid&&(Qe=await be(i,!0)));K&&(j._f.deps&&ie(j._f.deps),k(N,Qe,ee,Ft))}},ie=async(S,x={})=>{let N,K;const j=gg(S);if(m(!0),n.resolver){const L=await Y(pt(S)?S:j);N=Bn(L),K=S?!j.some(ee=>Q(L,ee)):N}else S?(K=(await Promise.all(j.map(async L=>{const ee=Q(i,L);return await be(ee&&ee._f?{[L]:ee}:ee)}))).every(Boolean),!(!K&&!r.isValid)&&f()):K=N=await be(i);return d.state.next({...!Pr(S)||h.isValid&&N!==r.isValid?{}:{name:S},...n.resolver||!S?{isValid:N}:{},errors:r.errors,isValidating:!1}),x.shouldFocus&&!K&&C0(i,L=>L&&Q(r.errors,L),S?j:l.mount),K},Le=S=>{const x={...s,...a.mount?o:{}};return pt(S)?x:Pr(S)?Q(x,S):S.map(N=>Q(x,N))},Ue=(S,x)=>({invalid:!!Q((x||r).errors,S),isDirty:!!Q((x||r).dirtyFields,S),isTouched:!!Q((x||r).touchedFields,S),error:Q((x||r).errors,S)}),Hr=S=>{S&&gg(S).forEach(x=>Ut(r.errors,x)),d.state.next({errors:S?r.errors:{}})},Lt=(S,x,N)=>{const K=(Q(i,S,{_f:{}})._f||{}).ref;$e(r.errors,S,{...x,ref:K}),d.state.next({name:S,errors:r.errors,isValid:!1}),N&&N.shouldFocus&&K&&K.focus&&K.focus()},ki=(S,x)=>Hi(S)?d.values.subscribe({next:N=>S(fe(void 0,x),N)}):fe(S,x,!0),Et=(S,x={})=>{for(const N of S?gg(S):l.mount)l.mount.delete(N),l.array.delete(N),x.keepValue||(Ut(i,N),Ut(o,N)),!x.keepError&&Ut(r.errors,N),!x.keepDirty&&Ut(r.dirtyFields,N),!x.keepTouched&&Ut(r.touchedFields,N),!n.shouldUnregister&&!x.keepDefaultValue&&Ut(s,N);d.values.next({values:{...o}}),d.state.next({...r,...x.keepDirty?{isDirty:re()}:{}}),!x.keepIsValid&&f()},nr=(S,x={})=>{let N=Q(i,S);const K=ma(x.disabled);return $e(i,S,{...N||{},_f:{...N&&N._f?N._f:{ref:{name:S}},name:S,mount:!0,...x}}),l.mount.add(S),pt(x.value)||$e(o,S,x.value),N?K&&$e(o,S,x.disabled?void 0:Q(o,S,wg(N._f))):T(S,!0,x.value),{...K?{disabled:x.disabled}:{},...n.progressive?{required:!!x.required,min:Al(x.min),max:Al(x.max),minLength:Al(x.minLength),maxLength:Al(x.maxLength),pattern:Al(x.pattern)}:{},name:S,onChange:G,onBlur:G,ref:j=>{if(j){nr(S,x),N=Q(i,S);const L=pt(j.value)&&j.querySelectorAll&&j.querySelectorAll("input,select,textarea")[0]||j,ee=Gj(L),Qe=N._f.refs||[];if(ee?Qe.find(P=>P===L):L===N._f.ref)return;$e(i,S,{_f:{...N._f,...ee?{refs:[...Qe.filter(vg),L,...Array.isArray(Q(s,S))?[{}]:[]],ref:{type:L.type,name:S}}:{ref:L}}}),T(S,!1,void 0,L)}else N=Q(i,S,{}),N._f&&(N._f.mount=!1),(n.shouldUnregister||x.shouldUnregister)&&!($j(l.array,S)&&a.action)&&l.unMount.add(S)}}},fl=()=>n.shouldFocusError&&C0(i,S=>S&&Q(r.errors,S),l.mount),pl=(S,x)=>async N=>{N&&(N.preventDefault&&N.preventDefault(),N.persist&&N.persist());let K=Ni(o);if(d.state.next({isSubmitting:!0}),n.resolver){const{errors:j,values:L}=await H();r.errors=j,K=L}else await be(i);Ut(r.errors,"root"),Bn(r.errors)?(d.state.next({errors:{}}),await S(K,N)):(x&&await x({...r.errors},N),fl(),setTimeout(fl)),d.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Bn(r.errors),submitCount:r.submitCount+1,errors:r.errors})},bo=(S,x={})=>{Q(i,S)&&(pt(x.defaultValue)?U(S,Q(s,S)):(U(S,x.defaultValue),$e(s,S,x.defaultValue)),x.keepTouched||Ut(r.touchedFields,S),x.keepDirty||(Ut(r.dirtyFields,S),r.isDirty=x.defaultValue?re(S,Q(s,S)):re()),x.keepError||(Ut(r.errors,S),h.isValid&&f()),d.state.next({...r}))},ks=(S,x={})=>{const N=S||s,K=Ni(N),j=S&&!Bn(S)?K:s;if(x.keepDefaultValues||(s=N),!x.keepValues){if(x.keepDirtyValues||p)for(const L of l.mount)Q(r.dirtyFields,L)?$e(j,L,Q(o,L)):U(L,Q(j,L));else{if(R_&&pt(S))for(const L of l.mount){const ee=Q(i,L);if(ee&&ee._f){const Qe=Array.isArray(ee._f.refs)?ee._f.refs[0]:ee._f.ref;if(If(Qe)){const P=Qe.closest("form");if(P){P.reset();break}}}}i={}}o=t.shouldUnregister?x.keepDefaultValues?Ni(s):{}:Ni(j),d.array.next({values:{...j}}),d.values.next({values:{...j}})}l={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!a.mount&&e(),a.mount=!h.isValid||!!x.keepIsValid,a.watch=!!t.shouldUnregister,d.state.next({submitCount:x.keepSubmitCount?r.submitCount:0,isDirty:x.keepDirty?r.isDirty:!!(x.keepDefaultValues&&!Bs(S,s)),isSubmitted:x.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:x.keepDirtyValues?r.dirtyFields:x.keepDefaultValues&&S?_g(s,S):{},touchedFields:x.keepTouched?r.touchedFields:{},errors:x.keepErrors?r.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},Kr=(S,x)=>ks(Hi(S)?S(o):S,x);return{control:{register:nr,unregister:Et,getFieldState:Ue,handleSubmit:pl,setError:Lt,_executeSchema:H,_getWatch:fe,_getDirty:re,_updateValid:f,_removeUnmounted:he,_updateFieldArray:E,_getFieldArray:Ne,_reset:ks,_resetDefaultValues:()=>Hi(n.defaultValues)&&n.defaultValues().then(S=>{Kr(S,n.resetOptions),d.state.next({isLoading:!1})}),_updateFormState:S=>{r={...r,...S}},_subjects:d,_proxyFormState:h,get _fields(){return i},get _formValues(){return o},get _state(){return a},set _state(S){a=S},get _defaultValues(){return s},get _names(){return l},set _names(S){l=S},get _formState(){return r},set _formState(S){r=S},get _options(){return n},set _options(S){n={...n,...S}}},trigger:ie,register:nr,handleSubmit:pl,watch:ki,setValue:U,getValues:Le,reset:Kr,resetField:bo,clearErrors:Hr,unregister:Et,setError:Lt,setFocus:(S,x={})=>{const N=Q(i,S),K=N&&N._f;if(K){const j=K.refs?K.refs[0]:K.ref;j.focus&&(j.focus(),x.shouldSelect&&j.select())}},getFieldState:Ue}}function hl(t={}){const e=Nt.useRef(),n=Nt.useRef(),[r,i]=Nt.useState({isDirty:!1,isValidating:!1,isLoading:Hi(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:Hi(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...ez(t,()=>i(o=>({...o}))),formState:r});const s=e.current.control;return s._options=t,Bj({subject:s._subjects.state,next:o=>{zj(o,s._proxyFormState,s._updateFormState,!0)&&i({...s._formState})}}),Nt.useEffect(()=>{t.values&&!Bs(t.values,n.current)?(s._reset(t.values,s._options.resetOptions),n.current=t.values):s._resetDefaultValues()},[t.values,s]),Nt.useEffect(()=>{s._state.mount||(s._updateValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),e.current.formState=jj(r,s),e.current}var FS=function(t,e,n){if(t&&"reportValidity"in t){var r=Q(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},ZN=function(t,e){var n=function(i){var s=e.fields[i];s&&s.ref&&"reportValidity"in s.ref?FS(s.ref,i,t):s.refs&&s.refs.forEach(function(o){return FS(o,i,t)})};for(var r in e.fields)n(r)},tz=function(t,e){e.shouldUseNativeValidation&&ZN(t,e);var n={};for(var r in t){var i=Q(e.fields,r);$e(n,r,Object.assign(t[r]||{},{ref:i&&i.ref}))}return n},nz=function(t,e){for(var n={};t.length;){var r=t[0],i=r.code,s=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var a=r.unionErrors[0].errors[0];n[o]={message:a.message,type:a.code}}else n[o]={message:s,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(c){return c.errors.forEach(function(h){return t.push(h)})}),e){var l=n[o].types,u=l&&l[r.code];n[o]=WN(o,e,n,i,u?[].concat(u,r.message):r.message)}t.shift()}return n},Gc=function(t,e,n){return n===void 0&&(n={}),function(r,i,s){try{return Promise.resolve(function(o,a){try{var l=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(u){return s.shouldUseNativeValidation&&ZN({},s),{errors:{},values:n.raw?r:u}})}catch(u){return a(u)}return l&&l.then?l.then(void 0,a):l}(0,function(o){if(function(a){return a.errors!=null}(o))return{values:{},errors:tz(nz(o.errors,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw o}))}catch(o){return Promise.reject(o)}}};function rz(t){return Je({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M19 13.586V10c0-3.217-2.185-5.927-5.145-6.742C13.562 2.52 12.846 2 12 2s-1.562.52-1.855 1.258C7.185 4.074 5 6.783 5 10v3.586l-1.707 1.707A.996.996 0 0 0 3 16v2a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1v-2a.996.996 0 0 0-.293-.707L19 13.586zM19 17H5v-.586l1.707-1.707A.996.996 0 0 0 7 14v-4c0-2.757 2.243-5 5-5s5 2.243 5 5v4c0 .266.105.52.293.707L19 16.414V17zm-7 5a2.98 2.98 0 0 0 2.818-2H9.182A2.98 2.98 0 0 0 12 22z"}}]})(t)}function iz(t){return Je({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M21 3h-7a2.98 2.98 0 0 0-2 .78A2.98 2.98 0 0 0 10 3H3a1 1 0 0 0-1 1v15a1 1 0 0 0 1 1h5.758c.526 0 1.042.214 1.414.586l1.121 1.121c.009.009.021.012.03.021.086.079.182.149.294.196h.002a.996.996 0 0 0 .762 0h.002c.112-.047.208-.117.294-.196.009-.009.021-.012.03-.021l1.121-1.121A2.015 2.015 0 0 1 15.242 20H21a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1zM8.758 18H4V5h6c.552 0 1 .449 1 1v12.689A4.032 4.032 0 0 0 8.758 18zM20 18h-4.758c-.799 0-1.584.246-2.242.689V6c0-.551.448-1 1-1h6v13z"}}]})(t)}function XN(t){return Je({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M21 8c-.202 0-4.85.029-9 2.008C7.85 8.029 3.202 8 3 8a1 1 0 0 0-1 1v9.883a1 1 0 0 0 .305.719c.195.188.48.305.729.28l.127-.001c.683 0 4.296.098 8.416 2.025.016.008.034.005.05.011.119.049.244.083.373.083s.254-.034.374-.083c.016-.006.034-.003.05-.011 4.12-1.928 7.733-2.025 8.416-2.025l.127.001c.238.025.533-.092.729-.28.194-.189.304-.449.304-.719V9a1 1 0 0 0-1-1zM4 10.049c1.485.111 4.381.48 7 1.692v7.742c-3-1.175-5.59-1.494-7-1.576v-7.858zm16 7.858c-1.41.082-4 .401-7 1.576v-7.742c2.619-1.212 5.515-1.581 7-1.692v7.858z"}},{tag:"circle",attr:{cx:"12",cy:"5",r:"3"}}]})(t)}function sz(t){return Je({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M7 11h2v2H7zm0 4h2v2H7zm4-4h2v2h-2zm0 4h2v2h-2zm4-4h2v2h-2zm0 4h2v2h-2z"}},{tag:"path",attr:{d:"M5 22h14c1.103 0 2-.897 2-2V6c0-1.103-.897-2-2-2h-2V2h-2v2H9V2H7v2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2zM19 8l.001 12H5V8h14z"}}]})(t)}function oz(t){return Je({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M5 18v3.766l1.515-.909L11.277 18H16c1.103 0 2-.897 2-2V8c0-1.103-.897-2-2-2H4c-1.103 0-2 .897-2 2v8c0 1.103.897 2 2 2h1zM4 8h12v8h-5.277L7 18.234V16H4V8z"}},{tag:"path",attr:{d:"M20 2H8c-1.103 0-2 .897-2 2h12c1.103 0 2 .897 2 2v8c1.103 0 2-.897 2-2V4c0-1.103-.897-2-2-2z"}}]})(t)}function JN(t){return Je({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M7 7h10v2H7zm0 4h7v2H7z"}},{tag:"path",attr:{d:"M20 2H4c-1.103 0-2 .897-2 2v18l5.333-4H20c1.103 0 2-.897 2-2V4c0-1.103-.897-2-2-2zm0 14H6.667L4 18V4h16v12z"}}]})(t)}function e9(t){return Je({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}}]})(t)}function P_(t){return Je({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20.901 10.566A1.001 1.001 0 0 0 20 10h-4V3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v7H4a1.001 1.001 0 0 0-.781 1.625l8 10a1 1 0 0 0 1.562 0l8-10c.24-.301.286-.712.12-1.059zM12 19.399 6.081 12H10V4h4v8h3.919L12 19.399z"}}]})(t)}function t9(t){return Je({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M19.045 7.401c.378-.378.586-.88.586-1.414s-.208-1.036-.586-1.414l-1.586-1.586c-.378-.378-.88-.586-1.414-.586s-1.036.208-1.413.585L4 13.585V18h4.413L19.045 7.401zm-3-3 1.587 1.585-1.59 1.584-1.586-1.585 1.589-1.584zM6 16v-1.585l7.04-7.018 1.586 1.586L7.587 16H6zm-2 4h16v2H4z"}}]})(t)}function az(t){return Je({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"circle",attr:{cx:"7.499",cy:"9.5",r:"1.5"}},{tag:"path",attr:{d:"m10.499 14-1.5-2-3 4h12l-4.5-6z"}},{tag:"path",attr:{d:"M19.999 4h-16c-1.103 0-2 .897-2 2v12c0 1.103.897 2 2 2h16c1.103 0 2-.897 2-2V6c0-1.103-.897-2-2-2zm-16 14V6h16l.002 12H3.999z"}}]})(t)}function lz(t){return Je({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z"}}]})(t)}function uz(t){return Je({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20.742 13.045a8.088 8.088 0 0 1-2.077.271c-2.135 0-4.14-.83-5.646-2.336a8.025 8.025 0 0 1-2.064-7.723A1 1 0 0 0 9.73 2.034a10.014 10.014 0 0 0-4.489 2.582c-3.898 3.898-3.898 10.243 0 14.143a9.937 9.937 0 0 0 7.072 2.93 9.93 9.93 0 0 0 7.07-2.929 10.007 10.007 0 0 0 2.583-4.491 1.001 1.001 0 0 0-1.224-1.224zm-2.772 4.301a7.947 7.947 0 0 1-5.656 2.343 7.953 7.953 0 0 1-5.658-2.344c-3.118-3.119-3.118-8.195 0-11.314a7.923 7.923 0 0 1 2.06-1.483 10.027 10.027 0 0 0 2.89 7.848 9.972 9.972 0 0 0 7.848 2.891 8.036 8.036 0 0 1-1.484 2.059z"}}]})(t)}function cz(t){return Je({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M4 21a1 1 0 0 0 .24 0l4-1a1 1 0 0 0 .47-.26L21 7.41a2 2 0 0 0 0-2.82L19.42 3a2 2 0 0 0-2.83 0L4.3 15.29a1.06 1.06 0 0 0-.27.47l-1 4A1 1 0 0 0 3.76 21 1 1 0 0 0 4 21zM18 4.41 19.59 6 18 7.59 16.42 6zM5.91 16.51 15 7.41 16.59 9l-9.1 9.1-2.11.52z"}}]})(t)}function hz(t){return Je({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 21c4.411 0 8-3.589 8-8 0-3.35-2.072-6.221-5-7.411v2.223A6 6 0 0 1 18 13c0 3.309-2.691 6-6 6s-6-2.691-6-6a5.999 5.999 0 0 1 3-5.188V5.589C6.072 6.779 4 9.65 4 13c0 4.411 3.589 8 8 8z"}},{tag:"path",attr:{d:"M11 2h2v10h-2z"}}]})(t)}function dz(t){return Je({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M5.5 15a3.51 3.51 0 0 0 2.36-.93l6.26 3.58a3.06 3.06 0 0 0-.12.85 3.53 3.53 0 1 0 1.14-2.57l-6.26-3.58a2.74 2.74 0 0 0 .12-.76l6.15-3.52A3.49 3.49 0 1 0 14 5.5a3.35 3.35 0 0 0 .12.85L8.43 9.6A3.5 3.5 0 1 0 5.5 15zm12 2a1.5 1.5 0 1 1-1.5 1.5 1.5 1.5 0 0 1 1.5-1.5zm0-13A1.5 1.5 0 1 1 16 5.5 1.5 1.5 0 0 1 17.5 4zm-12 6A1.5 1.5 0 1 1 4 11.5 1.5 1.5 0 0 1 5.5 10z"}}]})(t)}function fz(t){return Je({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m6.516 14.323-1.49 6.452a.998.998 0 0 0 1.529 1.057L12 18.202l5.445 3.63a1.001 1.001 0 0 0 1.517-1.106l-1.829-6.4 4.536-4.082a1 1 0 0 0-.59-1.74l-5.701-.454-2.467-5.461a.998.998 0 0 0-1.822 0L8.622 8.05l-5.701.453a1 1 0 0 0-.619 1.713l4.214 4.107zm2.853-4.326a.998.998 0 0 0 .832-.586L12 5.43l1.799 3.981a.998.998 0 0 0 .832.586l3.972.315-3.271 2.944c-.284.256-.397.65-.293 1.018l1.253 4.385-3.736-2.491a.995.995 0 0 0-1.109 0l-3.904 2.603 1.05-4.546a1 1 0 0 0-.276-.94l-3.038-2.962 4.09-.326z"}}]})(t)}function pz(t){return Je({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M6.993 12c0 2.761 2.246 5.007 5.007 5.007s5.007-2.246 5.007-5.007S14.761 6.993 12 6.993 6.993 9.239 6.993 12zM12 8.993c1.658 0 3.007 1.349 3.007 3.007S13.658 15.007 12 15.007 8.993 13.658 8.993 12 10.342 8.993 12 8.993zM10.998 19h2v3h-2zm0-17h2v3h-2zm-9 9h3v2h-3zm17 0h3v2h-3zM4.219 18.363l2.12-2.122 1.415 1.414-2.12 2.122zM16.24 6.344l2.122-2.122 1.414 1.414-2.122 2.122zM6.342 7.759 4.22 5.637l1.415-1.414 2.12 2.122zm13.434 10.605-1.414 1.414-2.122-2.122 1.414-1.414z"}}]})(t)}function D_(t){return Je({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.781 2.375c-.381-.475-1.181-.475-1.562 0l-8 10A1.001 1.001 0 0 0 4 14h4v7a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-7h4a1.001 1.001 0 0 0 .781-1.625l-8-10zM15 12h-1v8h-4v-8H6.081L12 4.601 17.919 12H15z"}}]})(t)}function mz(t){return Je({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18 7c0-1.103-.897-2-2-2H4c-1.103 0-2 .897-2 2v10c0 1.103.897 2 2 2h12c1.103 0 2-.897 2-2v-3.333L22 17V7l-4 3.333V7zm-1.998 10H4V7h12l.001 4.999L16 12l.001.001.001 4.999z"}}]})(t)}var n9={exports:{}},gz="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",yz=gz,vz=yz;function r9(){}function i9(){}i9.resetWarningCache=r9;var _z=function(){function t(r,i,s,o,a,l){if(l!==vz){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:i9,resetWarningCache:r9};return n.PropTypes=n,n};n9.exports=_z();var s9=n9.exports;const Fe=tC(s9);var wz=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function Qc(t,e){var n=Ez(t);if(typeof n.path!="string"){var r=t.webkitRelativePath;Object.defineProperty(n,"path",{value:typeof e=="string"?e:typeof r=="string"&&r.length>0?r:t.name,writable:!1,configurable:!1,enumerable:!0})}return n}function Ez(t){var e=t.name,n=e&&e.lastIndexOf(".")!==-1;if(n&&!t.type){var r=e.split(".").pop().toLowerCase(),i=wz.get(r);i&&Object.defineProperty(t,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return t}var Sz=[".DS_Store","Thumbs.db"];function Cz(t){return nl(this,void 0,void 0,function(){return rl(this,function(e){return Rf(t)&&Tz(t.dataTransfer)?[2,bz(t.dataTransfer,t.type)]:Iz(t)?[2,kz(t)]:Array.isArray(t)&&t.every(function(n){return"getFile"in n&&typeof n.getFile=="function"})?[2,xz(t)]:[2,[]]})})}function Tz(t){return Rf(t)}function Iz(t){return Rf(t)&&Rf(t.target)}function Rf(t){return typeof t=="object"&&t!==null}function kz(t){return T0(t.target.files).map(function(e){return Qc(e)})}function xz(t){return nl(this,void 0,void 0,function(){var e;return rl(this,function(n){switch(n.label){case 0:return[4,Promise.all(t.map(function(r){return r.getFile()}))];case 1:return e=n.sent(),[2,e.map(function(r){return Qc(r)})]}})})}function bz(t,e){return nl(this,void 0,void 0,function(){var n,r;return rl(this,function(i){switch(i.label){case 0:return t.items?(n=T0(t.items).filter(function(s){return s.kind==="file"}),e!=="drop"?[2,n]:[4,Promise.all(n.map(Rz))]):[3,2];case 1:return r=i.sent(),[2,US(o9(r))];case 2:return[2,US(T0(t.files).map(function(s){return Qc(s)}))]}})})}function US(t){return t.filter(function(e){return Sz.indexOf(e.name)===-1})}function T0(t){if(t===null)return[];for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(r)}return e}function Rz(t){if(typeof t.webkitGetAsEntry!="function")return $S(t);var e=t.webkitGetAsEntry();return e&&e.isDirectory?a9(e):$S(t)}function o9(t){return t.reduce(function(e,n){return x2(x2([],k2(e),!1),k2(Array.isArray(n)?o9(n):[n]),!1)},[])}function $S(t){var e=t.getAsFile();if(!e)return Promise.reject("".concat(t," is not a File"));var n=Qc(e);return Promise.resolve(n)}function Nz(t){return nl(this,void 0,void 0,function(){return rl(this,function(e){return[2,t.isDirectory?a9(t):Az(t)]})})}function a9(t){var e=t.createReader();return new Promise(function(n,r){var i=[];function s(){var o=this;e.readEntries(function(a){return nl(o,void 0,void 0,function(){var l,u,c;return rl(this,function(h){switch(h.label){case 0:if(a.length)return[3,5];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return l=h.sent(),n(l),[3,4];case 3:return u=h.sent(),r(u),[3,4];case 4:return[3,6];case 5:c=Promise.all(a.map(Nz)),i.push(c),s(),h.label=6;case 6:return[2]}})})},function(a){r(a)})}s()})}function Az(t){return nl(this,void 0,void 0,function(){return rl(this,function(e){return[2,new Promise(function(n,r){t.file(function(i){var s=Qc(i,t.fullPath);n(s)},function(i){r(i)})})]})})}var Oz=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(","),r=t.name||"",i=(t.type||"").toLowerCase(),s=i.replace(/\/.*$/,"");return n.some(function(o){var a=o.trim().toLowerCase();return a.charAt(0)==="."?r.toLowerCase().endsWith(a):a.endsWith("/*")?s===a.replace(/\/.*$/,""):i===a})}return!0};function VS(t){return Mz(t)||Dz(t)||u9(t)||Pz()}function Pz(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dz(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Mz(t){if(Array.isArray(t))return I0(t)}function jS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jS(Object(n),!0).forEach(function(r){l9(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function l9(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cc(t,e){return Uz(t)||Fz(t,e)||u9(t,e)||Lz()}function Lz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u9(t,e){if(t){if(typeof t=="string")return I0(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I0(t,e)}}function I0(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Fz(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,a;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function Uz(t){if(Array.isArray(t))return t}var $z="file-invalid-type",Vz="file-too-large",jz="file-too-small",zz="too-many-files",Bz=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var n=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:$z,message:"File type must be ".concat(n)}},BS=function(e){return{code:Vz,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},WS=function(e){return{code:jz,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},Wz={code:zz,message:"Too many files"};function c9(t,e){var n=t.type==="application/x-moz-file"||Oz(t,e);return[n,n?null:Bz(e)]}function h9(t,e,n){if(Ps(t.size))if(Ps(e)&&Ps(n)){if(t.size>n)return[!1,BS(n)];if(t.size<e)return[!1,WS(e)]}else{if(Ps(e)&&t.size<e)return[!1,WS(e)];if(Ps(n)&&t.size>n)return[!1,BS(n)]}return[!0,null]}function Ps(t){return t!=null}function qz(t){var e=t.files,n=t.accept,r=t.minSize,i=t.maxSize,s=t.multiple,o=t.maxFiles,a=t.validator;return!s&&e.length>1||s&&o>=1&&e.length>o?!1:e.every(function(l){var u=c9(l,n),c=cc(u,1),h=c[0],d=h9(l,r,i),p=cc(d,1),g=p[0],_=a?a(l):null;return h&&g&&!_})}function Nf(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function Oh(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function qS(t){t.preventDefault()}function Hz(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function Kz(t){return t.indexOf("Edge/")!==-1}function Gz(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return Hz(t)||Kz(t)}function Ir(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return e.some(function(a){return!Nf(r)&&a&&a.apply(void 0,[r].concat(s)),Nf(r)})}}function Qz(){return"showOpenFilePicker"in window}function Yz(t){if(Ps(t)){var e=Object.entries(t).filter(function(n){var r=cc(n,2),i=r[0],s=r[1],o=!0;return d9(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(s)||!s.every(f9))&&(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(n,r){var i=cc(r,2),s=i[0],o=i[1];return zS(zS({},n),{},l9({},s,o))},{});return[{description:"Files",accept:e}]}return t}function Zz(t){if(Ps(t))return Object.entries(t).reduce(function(e,n){var r=cc(n,2),i=r[0],s=r[1];return[].concat(VS(e),[i],VS(s))},[]).filter(function(e){return d9(e)||f9(e)}).join(",")}function Xz(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function Jz(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function d9(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||/\w+\/[-+.\w]+/g.test(t)}function f9(t){return/^.*\.[\w]+$/.test(t)}var eB=["children"],tB=["open"],nB=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],rB=["refKey","onChange","onClick"];function iB(t){return aB(t)||oB(t)||p9(t)||sB()}function sB(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oB(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function aB(t){if(Array.isArray(t))return k0(t)}function Eg(t,e){return cB(t)||uB(t,e)||p9(t,e)||lB()}function lB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p9(t,e){if(t){if(typeof t=="string")return k0(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k0(t,e)}}function k0(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function uB(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,a;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function cB(t){if(Array.isArray(t))return t}function HS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function et(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HS(Object(n),!0).forEach(function(r){x0(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function x0(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Af(t,e){if(t==null)return{};var n=hB(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function hB(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var M_=I.forwardRef(function(t,e){var n=t.children,r=Af(t,eB),i=g9(r),s=i.open,o=Af(i,tB);return I.useImperativeHandle(e,function(){return{open:s}},[s]),Nt.createElement(I.Fragment,null,n(et(et({},o),{},{open:s})))});M_.displayName="Dropzone";var m9={disabled:!1,getFilesFromEvent:Cz,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};M_.defaultProps=m9;M_.propTypes={children:Fe.func,accept:Fe.objectOf(Fe.arrayOf(Fe.string)),multiple:Fe.bool,preventDropOnDocument:Fe.bool,noClick:Fe.bool,noKeyboard:Fe.bool,noDrag:Fe.bool,noDragEventsBubbling:Fe.bool,minSize:Fe.number,maxSize:Fe.number,maxFiles:Fe.number,disabled:Fe.bool,getFilesFromEvent:Fe.func,onFileDialogCancel:Fe.func,onFileDialogOpen:Fe.func,useFsAccessApi:Fe.bool,autoFocus:Fe.bool,onDragEnter:Fe.func,onDragLeave:Fe.func,onDragOver:Fe.func,onDrop:Fe.func,onDropAccepted:Fe.func,onDropRejected:Fe.func,onError:Fe.func,validator:Fe.func};var b0={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function g9(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=et(et({},m9),t),n=e.accept,r=e.disabled,i=e.getFilesFromEvent,s=e.maxSize,o=e.minSize,a=e.multiple,l=e.maxFiles,u=e.onDragEnter,c=e.onDragLeave,h=e.onDragOver,d=e.onDrop,p=e.onDropAccepted,g=e.onDropRejected,_=e.onFileDialogCancel,w=e.onFileDialogOpen,y=e.useFsAccessApi,f=e.autoFocus,m=e.preventDropOnDocument,E=e.noClick,C=e.noKeyboard,T=e.noDrag,b=e.noDragEventsBubbling,k=e.onError,H=e.validator,Y=I.useMemo(function(){return Zz(n)},[n]),be=I.useMemo(function(){return Yz(n)},[n]),he=I.useMemo(function(){return typeof w=="function"?w:KS},[w]),re=I.useMemo(function(){return typeof _=="function"?_:KS},[_]),fe=I.useRef(null),Ne=I.useRef(null),It=I.useReducer(dB,b0),Mt=Eg(It,2),U=Mt[0],G=Mt[1],ie=U.isFocused,Le=U.isFileDialogActive,Ue=I.useRef(typeof window<"u"&&window.isSecureContext&&y&&Qz()),Hr=function(){!Ue.current&&Le&&setTimeout(function(){if(Ne.current){var J=Ne.current.files;J.length||(G({type:"closeDialog"}),re())}},300)};I.useEffect(function(){return window.addEventListener("focus",Hr,!1),function(){window.removeEventListener("focus",Hr,!1)}},[Ne,Le,re,Ue]);var Lt=I.useRef([]),ki=function(J){fe.current&&fe.current.contains(J.target)||(J.preventDefault(),Lt.current=[])};I.useEffect(function(){return m&&(document.addEventListener("dragover",qS,!1),document.addEventListener("drop",ki,!1)),function(){m&&(document.removeEventListener("dragover",qS),document.removeEventListener("drop",ki))}},[fe,m]),I.useEffect(function(){return!r&&f&&fe.current&&fe.current.focus(),function(){}},[fe,f,r]);var Et=I.useCallback(function(P){k?k(P):console.error(P)},[k]),nr=I.useCallback(function(P){P.preventDefault(),P.persist(),j(P),Lt.current=[].concat(iB(Lt.current),[P.target]),Oh(P)&&Promise.resolve(i(P)).then(function(J){if(!(Nf(P)&&!b)){var at=J.length,ft=at>0&&qz({files:J,accept:Y,minSize:o,maxSize:s,multiple:a,maxFiles:l,validator:H}),Ft=at>0&&!ft;G({isDragAccept:ft,isDragReject:Ft,isDragActive:!0,type:"setDraggedFiles"}),u&&u(P)}}).catch(function(J){return Et(J)})},[i,u,Et,b,Y,o,s,a,l,H]),fl=I.useCallback(function(P){P.preventDefault(),P.persist(),j(P);var J=Oh(P);if(J&&P.dataTransfer)try{P.dataTransfer.dropEffect="copy"}catch{}return J&&h&&h(P),!1},[h,b]),pl=I.useCallback(function(P){P.preventDefault(),P.persist(),j(P);var J=Lt.current.filter(function(ft){return fe.current&&fe.current.contains(ft)}),at=J.indexOf(P.target);at!==-1&&J.splice(at,1),Lt.current=J,!(J.length>0)&&(G({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Oh(P)&&c&&c(P))},[fe,c,b]),bo=I.useCallback(function(P,J){var at=[],ft=[];P.forEach(function(Ft){var xs=c9(Ft,Y),Gr=Eg(xs,2),ml=Gr[0],Ro=Gr[1],om=h9(Ft,o,s),eh=Eg(om,2),am=eh[0],lm=eh[1],um=H?H(Ft):null;if(ml&&am&&!um)at.push(Ft);else{var cm=[Ro,lm];um&&(cm=cm.concat(um)),ft.push({file:Ft,errors:cm.filter(function(k9){return k9})})}}),(!a&&at.length>1||a&&l>=1&&at.length>l)&&(at.forEach(function(Ft){ft.push({file:Ft,errors:[Wz]})}),at.splice(0)),G({acceptedFiles:at,fileRejections:ft,type:"setFiles"}),d&&d(at,ft,J),ft.length>0&&g&&g(ft,J),at.length>0&&p&&p(at,J)},[G,a,Y,o,s,l,d,p,g,H]),ks=I.useCallback(function(P){P.preventDefault(),P.persist(),j(P),Lt.current=[],Oh(P)&&Promise.resolve(i(P)).then(function(J){Nf(P)&&!b||bo(J,P)}).catch(function(J){return Et(J)}),G({type:"reset"})},[i,bo,Et,b]),Kr=I.useCallback(function(){if(Ue.current){G({type:"openDialog"}),he();var P={multiple:a,types:be};window.showOpenFilePicker(P).then(function(J){return i(J)}).then(function(J){bo(J,null),G({type:"closeDialog"})}).catch(function(J){Xz(J)?(re(J),G({type:"closeDialog"})):Jz(J)?(Ue.current=!1,Ne.current?(Ne.current.value=null,Ne.current.click()):Et(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):Et(J)});return}Ne.current&&(G({type:"openDialog"}),he(),Ne.current.value=null,Ne.current.click())},[G,he,re,y,bo,Et,be,a]),rm=I.useCallback(function(P){!fe.current||!fe.current.isEqualNode(P.target)||(P.key===" "||P.key==="Enter"||P.keyCode===32||P.keyCode===13)&&(P.preventDefault(),Kr())},[fe,Kr]),im=I.useCallback(function(){G({type:"focus"})},[]),sm=I.useCallback(function(){G({type:"blur"})},[]),S=I.useCallback(function(){E||(Gz()?setTimeout(Kr,0):Kr())},[E,Kr]),x=function(J){return r?null:J},N=function(J){return C?null:x(J)},K=function(J){return T?null:x(J)},j=function(J){b&&J.stopPropagation()},L=I.useMemo(function(){return function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},J=P.refKey,at=J===void 0?"ref":J,ft=P.role,Ft=P.onKeyDown,xs=P.onFocus,Gr=P.onBlur,ml=P.onClick,Ro=P.onDragEnter,om=P.onDragOver,eh=P.onDragLeave,am=P.onDrop,lm=Af(P,nB);return et(et(x0({onKeyDown:N(Ir(Ft,rm)),onFocus:N(Ir(xs,im)),onBlur:N(Ir(Gr,sm)),onClick:x(Ir(ml,S)),onDragEnter:K(Ir(Ro,nr)),onDragOver:K(Ir(om,fl)),onDragLeave:K(Ir(eh,pl)),onDrop:K(Ir(am,ks)),role:typeof ft=="string"&&ft!==""?ft:"presentation"},at,fe),!r&&!C?{tabIndex:0}:{}),lm)}},[fe,rm,im,sm,S,nr,fl,pl,ks,C,T,r]),ee=I.useCallback(function(P){P.stopPropagation()},[]),Qe=I.useMemo(function(){return function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},J=P.refKey,at=J===void 0?"ref":J,ft=P.onChange,Ft=P.onClick,xs=Af(P,rB),Gr=x0({accept:Y,multiple:a,type:"file",style:{display:"none"},onChange:x(Ir(ft,ks)),onClick:x(Ir(Ft,ee)),tabIndex:-1},at,Ne);return et(et({},Gr),xs)}},[Ne,n,a,ks,r]);return et(et({},U),{},{isFocused:ie&&!r,getRootProps:L,getInputProps:Qe,rootRef:fe,inputRef:Ne,open:x(Kr)})}function dB(t,e){switch(e.type){case"focus":return et(et({},t),{},{isFocused:!0});case"blur":return et(et({},t),{},{isFocused:!1});case"openDialog":return et(et({},b0),{},{isFileDialogActive:!0});case"closeDialog":return et(et({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return et(et({},t),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return et(et({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return et({},b0);default:return t}}function KS(){}const fB="_slider_4r1mt_1";function y9(){var f;const t=Ee.object({postText:vs().min(1,{message:"post text can't be empty"})}),{data:e,status:n}=Un({queryKey:["getUserWithId"],queryFn:()=>{var m;return xo(((m=W==null?void 0:W.currentUser)==null?void 0:m.uid)||"")},enabled:!1}),{register:r,handleSubmit:i,formState:{errors:s},reset:o}=hl({resolver:Gc(t),defaultValues:{postText:""}}),a=wo(),l=tr(),{mutate:u,isLoading:c}=pi({mutationFn:Dj,onSuccess:async()=>{const m=await a.fetchQuery([`${window.location.pathname==="/"?"posts":"getUserPosts"}`]);a.setQueryData([`${window.location.pathname==="/"?"posts":"getUserPosts"}`],m)}}),[h,d]=I.useState([]),{getRootProps:p,getInputProps:g,isDragActive:_,isFocused:w}=g9({accept:{"image/*":[".jpeg",".png"]},onDrop:I.useCallback(m=>{console.log(m),d(E=>[...E,...m])},[]),multiple:!0});function y(m){u({text:m.postText,images:h}),d([]),o()}return A("div",{className:"mx-auto w-full max-w-lg bg-slate-950 h-fit mt-2 mb-6 rounded-md px-3 py-3",children:[A("div",{className:"flex gap-2",children:[v("div",{className:"w-10 h-10 rounded-full overflow-hidden shrink-0",children:v("img",{onClick:()=>{var m;return l(`/profile/${(m=W.currentUser)==null?void 0:m.uid}`)},src:e!=null&&e.profile_photo?e==null?void 0:e.profile_photo:"https://st3.depositphotos.com/6672868/13701/v/450/depositphotos_137014128-stock-illustration-user-profile-icon.jpg",className:"w-12 h-12 rounded-full object-cover cursor-pointer"})}),v("div",{className:"w-full mb-4",children:A("form",{onSubmit:i(y),className:"w-full",children:[v("textarea",{...r("postText"),placeholder:"Add a post",className:"focus:outline-none bg-slate-900 max-h-64 p-2 rounded-md h-28 resize-none transition-all w-full"}),v("div",{className:"text-red-600",children:(f=s.postText)==null?void 0:f.message}),A("div",{...p({className:`cursor-pointer bg-slate-900 p-2 rounded-md h-16 text-center 
                  flex justify-center items-center text-gray-700 transition-all
                  ${_?"border-2":""}
                  ${(e==null?void 0:e.type)==="w"?"border-yellow-500":"border-blue-600"}`}),children:[v("input",{...g()}),_?v("p",{children:"Release to Drop ..."}):A("p",{children:[v("span",{className:"text-gray-400",children:"Drag 'n' drop"})," some files here",v("br",{}),"or ",v("span",{className:"text-gray-400",children:"click"})," to select files"]})]}),h.length>0&&v("div",{className:` ${fB} flex justify-start items-center overflow-x-scroll`,style:{scrollbarColor:"red"},children:h.map(m=>v("img",{style:{height:"100px",width:"auto"},src:URL.createObjectURL(m)},m.name))}),v("button",{type:"submit",className:"bg-yellow-500 px-8 py-2 mt-2 rounded-md",children:c?A("div",{role:"status",className:"w-full flex flex-col items-center",children:[A("svg",{"aria-hidden":"true",className:"inline w-6 h-6 text-gray-200 animate-spin dark:text-gray-600 fill-white",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[v("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),v("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),v("span",{className:"sr-only",children:"Loading..."})]}):"Post"})]})})]}),A("div",{className:"flex flex-wrap gap-2",children:[A("div",{className:"bg-slate-900 px-2 py-1 rounded-md flex items-center gap-1 text-gray-400",children:[v(az,{className:"text-green-600"}),"Photo"]}),A("div",{className:"bg-slate-900 px-2 py-1 rounded-md flex items-center gap-1 text-gray-400",children:[v(mz,{className:"text-blue-600"}),"Video"]}),A("div",{className:"bg-slate-900 px-2 py-1 rounded-md flex items-center gap-1 text-gray-400",children:[v(sz,{className:"text-red-600"}),"Event"]}),A("div",{className:"bg-slate-900 px-2 py-1 rounded-md flex items-center gap-1 text-gray-400",children:[v(e5,{className:"text-yellow-500"}),"Feeling /Activity"]}),v("div",{className:"bg-slate-900 px-2 py-1 rounded-md flex items-center gap-1 text-gray-400",children:"..."})]})]})}function pB(t){return Je({tag:"svg",attr:{version:"1.1",viewBox:"0 0 17 17"},child:[{tag:"g",attr:{},child:[]},{tag:"path",attr:{d:"M8.5 0.5c-3.032 0-5.5 2.467-5.5 5.5 0 4.373 4.913 10.086 5.122 10.328l0.378 0.435 0.378-0.436c0.209-0.241 5.122-5.954 5.122-10.327 0-3.033-2.468-5.5-5.5-5.5zM8.5 15.215c-1.146-1.424-4.5-5.879-4.5-9.215 0-2.481 2.019-4.5 4.5-4.5s4.5 2.019 4.5 4.5c0 3.333-3.354 7.791-4.5 9.215zM8.5 3.139c-1.654 0-3 1.346-3 3s1.346 3 3 3 3-1.346 3-3-1.346-3-3-3zM8.5 8.139c-1.103 0-2-0.897-2-2s0.897-2 2-2 2 0.897 2 2-0.897 2-2 2z"}}]})(t)}function mB(t){return Je({tag:"svg",attr:{version:"1.1",viewBox:"0 0 17 17"},child:[{tag:"g",attr:{},child:[]},{tag:"path",attr:{d:"M8.5 5.972c-1.378 0-2.5 1.122-2.5 2.5s1.122 2.5 2.5 2.5 2.5-1.122 2.5-2.5-1.122-2.5-2.5-2.5zM8.5 9.972c-0.827 0-1.5-0.673-1.5-1.5s0.673-1.5 1.5-1.5 1.5 0.673 1.5 1.5-0.673 1.5-1.5 1.5zM16.94 9.446c0.037-0.321 0.060-0.645 0.060-0.974s-0.023-0.653-0.060-0.974l-2.588-0.778c-0.119-0.402-0.278-0.787-0.474-1.149l1.279-2.377c-0.406-0.51-0.869-0.973-1.38-1.38l-2.377 1.28c-0.363-0.196-0.748-0.354-1.15-0.474l-0.776-2.588c-0.32-0.037-0.644-0.060-0.974-0.060s-0.654 0.023-0.974 0.060l-0.776 2.588c-0.403 0.119-0.789 0.278-1.15 0.475l-2.377-1.28c-0.511 0.406-0.974 0.869-1.379 1.38l1.279 2.375c-0.196 0.362-0.354 0.748-0.474 1.15l-2.589 0.778c-0.037 0.32-0.060 0.644-0.060 0.974s0.023 0.654 0.060 0.974l2.588 0.776c0.12 0.403 0.278 0.789 0.474 1.151l-1.279 2.376c0.406 0.511 0.869 0.974 1.38 1.38l2.377-1.279c0.362 0.196 0.748 0.354 1.15 0.474l0.776 2.588c0.321 0.037 0.645 0.060 0.974 0.060s0.654-0.023 0.974-0.060l0.776-2.588c0.402-0.12 0.788-0.278 1.15-0.474l2.376 1.279c0.511-0.407 0.974-0.87 1.38-1.381l-1.278-2.376c0.196-0.362 0.354-0.748 0.474-1.15l2.588-0.776zM13.548 9.419l-0.154 0.518c-0.1 0.337-0.233 0.66-0.396 0.959l-0.256 0.475 0.255 0.475 0.952 1.77c-0.099 0.105-0.201 0.207-0.306 0.306l-2.243-1.209-0.475 0.256c-0.301 0.163-0.624 0.295-0.96 0.396l-0.518 0.154-0.155 0.518-0.579 1.932c-0.072 0.002-0.143 0.003-0.213 0.003s-0.141-0.001-0.213-0.003l-0.579-1.932-0.155-0.518-0.518-0.154c-0.336-0.1-0.659-0.233-0.959-0.396l-0.475-0.256-2.245 1.207c-0.104-0.099-0.207-0.201-0.306-0.306l1.208-2.244-0.256-0.475c-0.162-0.3-0.295-0.623-0.396-0.96l-0.153-0.517-2.449-0.734c-0.003-0.072-0.004-0.143-0.004-0.212 0-0.070 0.001-0.141 0.004-0.213l2.448-0.734 0.154-0.518c0.1-0.337 0.233-0.66 0.396-0.959l0.256-0.475-1.208-2.245c0.099-0.104 0.201-0.207 0.305-0.306l2.247 1.21 0.476-0.259c0.297-0.162 0.619-0.295 0.956-0.395l0.518-0.154 0.155-0.518 0.579-1.932c0.073-0.001 0.144-0.002 0.214-0.002s0.141 0.001 0.213 0.003l0.579 1.932 0.155 0.518 0.518 0.154c0.335 0.1 0.659 0.233 0.96 0.396l0.475 0.255 2.244-1.208c0.104 0.099 0.207 0.201 0.306 0.306l-0.953 1.77-0.255 0.475 0.257 0.475c0.163 0.3 0.295 0.622 0.395 0.957l0.154 0.518 0.518 0.155 1.932 0.581c0.001 0.072 0.002 0.143 0.002 0.213s-0.001 0.141-0.004 0.213l-2.448 0.734z"}}]})(t)}function Xp(t){return gB(t.seconds*1e3)}const gB=t=>{const n=Date.now()-t,r=new Intl.RelativeTimeFormat("en",{numeric:"auto"});if(n<60*1e3){const i=Math.round(n/1e3);return r.format(-i,"second")}if(n<60*60*1e3){const i=Math.round(n/6e4);return r.format(-i,"minute")}if(n<24*60*60*1e3){const i=Math.round(n/36e5);return r.format(-i,"hour")}if(n<30*24*60*60*1e3){const i=Math.round(n/864e5);return r.format(-i,"day")}if(n<12*30*24*60*60*1e3){const i=Math.round(n/2592e6);return r.format(-i,"month")}return"Long time ago"},yB=el(Me,"comments");async function vB(t){var s;if(!t)throw new Error("postId cannot be empty");const e=it(Me,"posts",t),r=(s=(await vn(e)).data())==null?void 0:s.comment_ids;return console.log(r),(await Promise.all(r.map(async o=>{const a=(await vn(it(Me,"comments",o))).data();console.log("comment data",a);const l=(await vn(it(Me,"users",a==null?void 0:a.user_id))).data();return{id:o,...a,user_data:l}}))).sort((o,a)=>a.created_at-o.created_at)}async function _B(t,e){var i;if(!e)throw new Error("commentText cannot be empty");if(!t)throw new Error("postId cannot be empty");const n=await Vp(yB,{text:e,created_at:Ze.now(),user_id:(i=W==null?void 0:W.currentUser)==null?void 0:i.uid,post_id:t,reply_ids:[],votes:0,voter_ids:[]});console.log("new comment id",n);const r=it(Me,"posts",t);return await os(r,{comment_ids:zp(n.id)})}const wB=el(Me,"replies");async function EB(t){var i;if(!t)throw new Error("commentId cannot be empty");const e=it(Me,"comments",t),r=(i=(await vn(e)).data())==null?void 0:i.reply_ids;return(await Promise.all(r.map(async s=>{const o=(await vn(it(Me,"replies",s))).data(),a=(await vn(it(Me,"users",o==null?void 0:o.user_id))).data();return{id:s,...o,user_data:a}}))).sort((s,o)=>o.created_at-s.created_at)}async function SB(t,e){var i;if(!t)throw new Error("commentId cannot be empty");if(!e)throw new Error("text cannot be empty");const n=await Vp(wB,{text:e,created_at:Ze.now(),user_id:(i=W==null?void 0:W.currentUser)==null?void 0:i.uid,comment_id:t,votes:0,voter_ids:[]}),r=it(Me,"comments",t);return await os(r,{reply_ids:zp(n.id)})}function L_(t){return Je({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M15.964.686a.5.5 0 0 0-.65-.65L.767 5.855H.766l-.452.18a.5.5 0 0 0-.082.887l.41.26.001.002 4.995 3.178 3.178 4.995.002.002.26.41a.5.5 0 0 0 .886-.083l6-15Zm-1.833 1.89L6.637 10.07l-.215-.338a.5.5 0 0 0-.154-.154l-.338-.215 7.494-7.494 1.178-.471-.47 1.178Z"}}]})(t)}function CB({reply:t}){var u,c;const[e,n]=I.useState(!1),[r,i]=I.useState(!1),[s,o]=I.useState(!1),a=tr();function l(h){!e&&!r?h===1?n(!0):h===-1&&i(!0):e&&h===1?n(!1):e&&h===-1?(n(!1),i(!0)):r&&h===-1?i(!1):r&&h===1&&(n(!0),i(!1))}return A("div",{className:"",children:[A("div",{className:"chat chat-end my-2",children:[v("div",{className:"chat-image avatar",children:v("div",{className:"w-10 rounded-full",children:v("img",{className:"cursor-pointer",onClick:()=>a(`/profile/${t.user_id}`),src:(u=t.user_data)!=null&&u.profile_photo?(c=t.user_data)==null?void 0:c.profile_photo:"https://st3.depositphotos.com/6672868/13701/v/450/depositphotos_137014128-stock-illustration-user-profile-icon.jpg"})})}),A("div",{className:"chat-header mb-2 text-xs",children:[v("p",{className:"cursor-pointer",onClick:()=>a(`/profile/${t.user_id}`),children:t.user_data.username}),v("time",{className:"text-xs opacity-50 ml-2",children:Xp(t.created_at)})]}),v("div",{className:`px-4 py-2 rounded-tl-xl rounded-bl-xl rounded-tr-xl ${t.user_data.type==="r"?"bg-blue-600":"bg-yellow-500"} text-white text-sm`,children:t.text.length<200?t.text:A(vr,{children:[s?t.text:t.text.slice(0,200),v("span",{className:"ml-2 cursor-pointer text-sm underline",onClick:()=>o(!s),children:s?"show less":"show more"})]})})]}),v("div",{className:"flex justify-end gap-4 items-center px-4 py-2 mr-8",children:A("p",{className:"flex gap-2 items-center",children:[v(D_,{className:`${e?"text-teal-500":"text-white"}`,onClick:()=>{l(1)}})," ",v("span",{className:"text-sm",children:"0"})," ",v(P_,{className:`${r?"text-yellow-500":"text-white"}`,onClick:()=>{l(-1)}})]})})]})}function TB({commentID:t}){const e=Ee.object({replyText:vs().min(1,{message:"comment text can't be empty"})}),{register:n,handleSubmit:r,formState:{errors:i},reset:s}=hl({resolver:Gc(e),defaultValues:{replyText:""}}),o=wo(),a=tr(),{mutate:l,isLoading:u}=pi({mutationFn:({id:_,text:w})=>SB(_,w),onSuccess:async()=>{const _=await o.fetchQuery(["repliesForComm",t]);o.setQueryData(["repliesForComm",t],_)}}),{data:c,isSuccess:h}=Un({queryKey:["getUserWithId"],queryFn:()=>{var _;return xo((_=W==null?void 0:W.currentUser)==null?void 0:_.uid)}}),{data:d,status:p}=Un({queryKey:["repliesForComm",t],queryFn:()=>EB(t)});function g(_){l({text:_.replyText,id:t}),s()}return p==="loading"?A("div",{role:"status",className:"w-full flex flex-col items-center",children:[A("svg",{"aria-hidden":"true",className:"inline w-8 h-8 mr-2 text-gray-200 animate-spin dark:text-gray-600 fill-yellow-400",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[v("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),v("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),v("span",{className:"sr-only",children:"Loading..."})]}):A("div",{className:"px-4",children:[A("div",{className:"flex gap-2 mt-2",children:[v("div",{className:"w-10 h-10 rounded-full overflow-hidden shrink-0",children:v("img",{onClick:()=>{var _;return a(`/profile/${(_=W.currentUser)==null?void 0:_.uid}`)},src:h?c==null?void 0:c.profile_photo:"https://st3.depositphotos.com/6672868/13701/v/450/depositphotos_137014128-stock-illustration-user-profile-icon.jpg",className:"w-12 h-12 rounded-full object-cover"})}),A("form",{onSubmit:r(g),className:"w-full bg-slate-900 h-10 rounded-md flex",children:[v("textarea",{...n("replyText"),placeholder:"Add a reply",className:"focus:outline-none bg-transparent  max-h-64 p-2 pl-3 rounded-md h-10 resize-none transition-all w-full"}),v("button",{type:"submit",className:"mr-3 text-xl text-yellow-500",children:v(L_,{})})]})]}),u&&A("div",{role:"status",className:"w-full mt-4 flex flex-col items-center",children:[A("svg",{"aria-hidden":"true",className:"inline w-8 h-8 mr-2 text-gray-200 animate-spin dark:text-gray-600 fill-yellow-400",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[v("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),v("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),v("span",{className:"sr-only",children:"Loading..."})]}),d!=null&&d.length&&(d==null?void 0:d.length)>0?d==null?void 0:d.map(_=>v(CB,{reply:_},_==null?void 0:_.comment_id)):v("div",{className:"w-full flex items-center justify-center mt-2",children:v("p",{className:"mx-auto",children:"no replies yet"})})]})}function IB({comment:t}){var h,d;const[e,n]=I.useState(!1),[r,i]=I.useState(!1),[s,o]=I.useState(!1),[a,l]=I.useState(!1),u=tr();function c(p){!r&&!s?p===1?i(!0):p===-1&&o(!0):r&&p===1?i(!1):r&&p===-1?(i(!1),o(!0)):s&&p===-1?o(!1):s&&p===1&&(i(!0),o(!1))}return A("div",{className:"",children:[A("div",{className:"chat chat-start my-2",children:[v("div",{className:"chat-image avatar",children:v("div",{className:"w-10 rounded-full",children:v("img",{onClick:()=>u(`/profile/${t.user_id}`),src:(h=t.user_data)!=null&&h.profile_photo?(d=t.user_data)==null?void 0:d.profile_photo:"https://st3.depositphotos.com/6672868/13701/v/450/depositphotos_137014128-stock-illustration-user-profile-icon.jpg",className:"cursor-pointer"})})}),A("div",{className:"chat-header mb-2 text-sm flex",children:[v("p",{className:"cursor-pointer",onClick:()=>u(`/profile/${t.user_id}`),children:t.user_data.username}),v("time",{className:"text-sm opacity-50 ml-2",children:Xp(t.created_at)})]}),v("div",{className:`px-4 py-2 rounded-tl-xl rounded-tr-xl rounded-br-xl ${t.user_data.type==="r"?"bg-blue-600":"bg-yellow-500"} text-white text-sm`,children:t.text.length<200?t.text:A(vr,{children:[a?t.text:t.text.slice(0,200),v("span",{className:"ml-2 cursor-pointer text-sm underline",onClick:()=>l(!a),children:a?"show less":"show more"})]})})]}),A("div",{className:"flex gap-4 items-center px-4 py-2 ml-8",children:[A("p",{className:"flex gap-2 items-center",children:[v(D_,{className:`${r?"text-teal-500":"text-white"}`,onClick:()=>{c(1)}})," ",v("span",{className:"text-sm",children:`${t.votes}`})," ",v(P_,{className:`${s?"text-yellow-500":"text-white"}`,onClick:()=>{c(-1)}})]}),A("label",{htmlFor:`replies_${t.id}`,className:"flex gap-2 items-center",onClick:()=>{n(!e)},children:[v(JN,{})," ",v("span",{className:"text-sm",children:`${t.reply_ids.length}`})]})]}),e&&v(TB,{commentID:t.id})]})}function kB({postID:t}){const e=Ee.object({commText:vs().min(1,{message:"comment text can't be empty"})}),{register:n,handleSubmit:r,formState:{errors:i},reset:s}=hl({resolver:Gc(e),defaultValues:{commText:""}}),o=wo(),{mutate:a,isLoading:l}=pi({mutationFn:({id:_,text:w})=>_B(_,w),onSuccess:async()=>{const _=await o.fetchQuery(["commsForPost",t]);o.setQueryData(["commsForPost",t],_)}}),{data:u,isSuccess:c}=Un({queryKey:["getUserWithId"],queryFn:()=>{var _;return xo((_=W==null?void 0:W.currentUser)==null?void 0:_.uid)}}),{data:h,status:d}=Un({queryKey:["commsForPost",t],queryFn:()=>vB(t)});function p(_){console.log(_),a({text:_.commText,id:t}),s()}const g=tr();return d==="loading"?A("div",{role:"status",className:"w-full flex flex-col items-center",children:[A("svg",{"aria-hidden":"true",className:"inline w-8 h-8 mr-2 text-gray-200 animate-spin dark:text-gray-600 fill-yellow-400",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[v("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),v("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),v("span",{className:"sr-only",children:"Loading..."})]}):A("div",{className:"px-4",children:[A("div",{className:"flex gap-2 mt-2",children:[v("div",{className:"w-10 h-10 rounded-full overflow-hidden shrink-0",children:v("img",{onClick:()=>{var _;return g(`/profile/${(_=W.currentUser)==null?void 0:_.uid}`)},src:c?u==null?void 0:u.profile_photo:"https://st3.depositphotos.com/6672868/13701/v/450/depositphotos_137014128-stock-illustration-user-profile-icon.jpg",className:"w-12 h-12 rounded-full object-cover"})}),A("form",{onSubmit:r(p),className:"w-full bg-slate-900 h-10 rounded-md flex",children:[v("textarea",{...n("commText"),placeholder:"Add a comment",className:"focus:outline-none bg-transparent  max-h-64 p-2 pl-3 rounded-md h-10 resize-none transition-all w-full"}),v("button",{type:"submit",className:"mr-3 text-xl text-yellow-500",children:v(L_,{})})]})]}),l&&A("div",{role:"status",className:"w-full mt-4 flex flex-col items-center",children:[A("svg",{"aria-hidden":"true",className:"inline w-8 h-8 mr-2 text-gray-200 animate-spin dark:text-gray-600 fill-yellow-400",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[v("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),v("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),v("span",{className:"sr-only",children:"Loading..."})]}),h!=null&&h.length&&(h==null?void 0:h.length)>0?h==null?void 0:h.map(_=>v(IB,{comment:_},_.id)):v("div",{className:"w-full flex items-center justify-center mt-2",children:v("p",{className:"mx-auto",children:"no comments yet"})})]})}var v9={},Jp={},F_={},Sg={},GS;function xB(){return GS||(GS=1,function(t){(function(e,n){n(t,I,s9)})(eC,function(e,n,r){Object.defineProperty(e,"__esModule",{value:!0}),e.setHasSupportToCaptureOption=g;var i=o(n),s=o(r);function o(f){return f&&f.__esModule?f:{default:f}}var a=Object.assign||function(f){for(var m=1;m<arguments.length;m++){var E=arguments[m];for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(f[C]=E[C])}return f};function l(f,m){var E={};for(var C in f)m.indexOf(C)>=0||Object.prototype.hasOwnProperty.call(f,C)&&(E[C]=f[C]);return E}function u(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")}var c=function(){function f(m,E){for(var C=0;C<E.length;C++){var T=E[C];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(m,T.key,T)}}return function(m,E,C){return E&&f(m.prototype,E),C&&f(m,C),m}}();function h(f,m){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:f}function d(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(f,m):f.__proto__=m)}var p=!1;function g(f){p=f}try{addEventListener("test",null,Object.defineProperty({},"capture",{get:function(){g(!0)}}))}catch{}function _(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{capture:!0};return p?f:f.capture}function w(f){if("touches"in f){var m=f.touches[0],E=m.pageX,C=m.pageY;return{x:E,y:C}}var T=f.screenX,b=f.screenY;return{x:T,y:b}}var y=function(f){d(m,f);function m(){var E;u(this,m);for(var C=arguments.length,T=Array(C),b=0;b<C;b++)T[b]=arguments[b];var k=h(this,(E=m.__proto__||Object.getPrototypeOf(m)).call.apply(E,[this].concat(T)));return k._handleSwipeStart=k._handleSwipeStart.bind(k),k._handleSwipeMove=k._handleSwipeMove.bind(k),k._handleSwipeEnd=k._handleSwipeEnd.bind(k),k._onMouseDown=k._onMouseDown.bind(k),k._onMouseMove=k._onMouseMove.bind(k),k._onMouseUp=k._onMouseUp.bind(k),k._setSwiperRef=k._setSwiperRef.bind(k),k}return c(m,[{key:"componentDidMount",value:function(){this.swiper&&this.swiper.addEventListener("touchmove",this._handleSwipeMove,_({capture:!0,passive:!1}))}},{key:"componentWillUnmount",value:function(){this.swiper&&this.swiper.removeEventListener("touchmove",this._handleSwipeMove,_({capture:!0,passive:!1}))}},{key:"_onMouseDown",value:function(C){this.props.allowMouseEvents&&(this.mouseDown=!0,document.addEventListener("mouseup",this._onMouseUp),document.addEventListener("mousemove",this._onMouseMove),this._handleSwipeStart(C))}},{key:"_onMouseMove",value:function(C){this.mouseDown&&this._handleSwipeMove(C)}},{key:"_onMouseUp",value:function(C){this.mouseDown=!1,document.removeEventListener("mouseup",this._onMouseUp),document.removeEventListener("mousemove",this._onMouseMove),this._handleSwipeEnd(C)}},{key:"_handleSwipeStart",value:function(C){var T=w(C),b=T.x,k=T.y;this.moveStart={x:b,y:k},this.props.onSwipeStart(C)}},{key:"_handleSwipeMove",value:function(C){if(this.moveStart){var T=w(C),b=T.x,k=T.y,H=b-this.moveStart.x,Y=k-this.moveStart.y;this.moving=!0;var be=this.props.onSwipeMove({x:H,y:Y},C);be&&C.cancelable&&C.preventDefault(),this.movePosition={deltaX:H,deltaY:Y}}}},{key:"_handleSwipeEnd",value:function(C){this.props.onSwipeEnd(C);var T=this.props.tolerance;this.moving&&this.movePosition&&(this.movePosition.deltaX<-T?this.props.onSwipeLeft(1,C):this.movePosition.deltaX>T&&this.props.onSwipeRight(1,C),this.movePosition.deltaY<-T?this.props.onSwipeUp(1,C):this.movePosition.deltaY>T&&this.props.onSwipeDown(1,C)),this.moveStart=null,this.moving=!1,this.movePosition=null}},{key:"_setSwiperRef",value:function(C){this.swiper=C,this.props.innerRef(C)}},{key:"render",value:function(){var C=this.props;C.tagName;var T=C.className,b=C.style,k=C.children;C.allowMouseEvents,C.onSwipeUp,C.onSwipeDown,C.onSwipeLeft,C.onSwipeRight,C.onSwipeStart,C.onSwipeMove,C.onSwipeEnd,C.innerRef,C.tolerance;var H=l(C,["tagName","className","style","children","allowMouseEvents","onSwipeUp","onSwipeDown","onSwipeLeft","onSwipeRight","onSwipeStart","onSwipeMove","onSwipeEnd","innerRef","tolerance"]);return i.default.createElement(this.props.tagName,a({ref:this._setSwiperRef,onMouseDown:this._onMouseDown,onTouchStart:this._handleSwipeStart,onTouchEnd:this._handleSwipeEnd,className:T,style:b},H),k)}}]),m}(n.Component);y.displayName="ReactSwipe",y.propTypes={tagName:s.default.string,className:s.default.string,style:s.default.object,children:s.default.node,allowMouseEvents:s.default.bool,onSwipeUp:s.default.func,onSwipeDown:s.default.func,onSwipeLeft:s.default.func,onSwipeRight:s.default.func,onSwipeStart:s.default.func,onSwipeMove:s.default.func,onSwipeEnd:s.default.func,innerRef:s.default.func,tolerance:s.default.number.isRequired},y.defaultProps={tagName:"div",allowMouseEvents:!1,onSwipeUp:function(){},onSwipeDown:function(){},onSwipeLeft:function(){},onSwipeRight:function(){},onSwipeStart:function(){},onSwipeMove:function(){},onSwipeEnd:function(){},innerRef:function(){},tolerance:0},e.default=y})}(Sg)),Sg}(function(t){(function(e,n){n(t,xB())})(eC,function(e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=i(n);function i(s){return s&&s.__esModule?s:{default:s}}e.default=r.default})})(F_);var Yc={},_9={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var r=[],i=0;i<arguments.length;i++){var s=arguments[i];if(s){var o=typeof s;if(o==="string"||o==="number")r.push(s);else if(Array.isArray(s)){if(s.length){var a=n.apply(null,s);a&&r.push(a)}}else if(o==="object"){if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]")){r.push(s.toString());continue}for(var l in s)e.call(s,l)&&s[l]&&r.push(l)}}}return r.join(" ")}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(_9);var bB=_9.exports;Object.defineProperty(Yc,"__esModule",{value:!0});Yc.default=void 0;var Ri=RB(bB);function RB(t){return t&&t.__esModule?t:{default:t}}function NB(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var AB={ROOT:function(e){return(0,Ri.default)(NB({"carousel-root":!0},e||"",!!e))},CAROUSEL:function(e){return(0,Ri.default)({carousel:!0,"carousel-slider":e})},WRAPPER:function(e,n){return(0,Ri.default)({"thumbs-wrapper":!e,"slider-wrapper":e,"axis-horizontal":n==="horizontal","axis-vertical":n!=="horizontal"})},SLIDER:function(e,n){return(0,Ri.default)({thumbs:!e,slider:e,animated:!n})},ITEM:function(e,n,r){return(0,Ri.default)({thumb:!e,slide:e,selected:n,previous:r})},ARROW_PREV:function(e){return(0,Ri.default)({"control-arrow control-prev":!0,"control-disabled":e})},ARROW_NEXT:function(e){return(0,Ri.default)({"control-arrow control-next":!0,"control-disabled":e})},DOT:function(e){return(0,Ri.default)({dot:!0,selected:e})}};Yc.default=AB;var Zc={},em={};Object.defineProperty(em,"__esModule",{value:!0});em.outerWidth=void 0;var OB=function(e){var n=e.offsetWidth,r=getComputedStyle(e);return n+=parseInt(r.marginLeft)+parseInt(r.marginRight),n};em.outerWidth=OB;var dl={};Object.defineProperty(dl,"__esModule",{value:!0});dl.default=void 0;var PB=function(e,n,r){var i=e===0?e:e+n,s=r==="horizontal"?[i,0,0]:[0,i,0],o="translate3d",a="("+s.join(",")+")";return o+a};dl.default=PB;var Xc={};Object.defineProperty(Xc,"__esModule",{value:!0});Xc.default=void 0;var DB=function(){return window};Xc.default=DB;Object.defineProperty(Zc,"__esModule",{value:!0});Zc.default=void 0;var ir=FB(I),bs=tm(Yc),MB=em,QS=tm(dl),LB=tm(F_),Ph=tm(Xc);function tm(t){return t&&t.__esModule?t:{default:t}}function w9(){if(typeof WeakMap!="function")return null;var t=new WeakMap;return w9=function(){return t},t}function FB(t){if(t&&t.__esModule)return t;if(t===null||uu(t)!=="object"&&typeof t!="function")return{default:t};var e=w9();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var s=r?Object.getOwnPropertyDescriptor(t,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=t[i]}return n.default=t,e&&e.set(t,n),n}function uu(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?uu=function(n){return typeof n}:uu=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},uu(t)}function R0(){return R0=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},R0.apply(this,arguments)}function UB(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function YS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $B(t,e,n){return e&&YS(t.prototype,e),n&&YS(t,n),t}function VB(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&N0(t,e)}function N0(t,e){return N0=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},N0(t,e)}function jB(t){var e=BB();return function(){var r=Of(t),i;if(e){var s=Of(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return zB(this,i)}}function zB(t,e){return e&&(uu(e)==="object"||typeof e=="function")?e:fn(t)}function fn(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function BB(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Of(t){return Of=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Of(t)}function Qt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var WB=function(e){return e.hasOwnProperty("key")},U_=function(t){VB(n,t);var e=jB(n);function n(r){var i;return UB(this,n),i=e.call(this,r),Qt(fn(i),"itemsWrapperRef",void 0),Qt(fn(i),"itemsListRef",void 0),Qt(fn(i),"thumbsRef",void 0),Qt(fn(i),"setItemsWrapperRef",function(s){i.itemsWrapperRef=s}),Qt(fn(i),"setItemsListRef",function(s){i.itemsListRef=s}),Qt(fn(i),"setThumbsRef",function(s,o){i.thumbsRef||(i.thumbsRef=[]),i.thumbsRef[o]=s}),Qt(fn(i),"updateSizes",function(){if(!(!i.props.children||!i.itemsWrapperRef||!i.thumbsRef)){var s=ir.Children.count(i.props.children),o=i.itemsWrapperRef.clientWidth,a=i.props.thumbWidth?i.props.thumbWidth:(0,MB.outerWidth)(i.thumbsRef[0]),l=Math.floor(o/a),u=l<s,c=u?s-l:0;i.setState(function(h,d){return{itemSize:a,visibleItems:l,firstItem:u?i.getFirstItem(d.selectedItem):0,lastPosition:c,showArrows:u}})}}),Qt(fn(i),"handleClickItem",function(s,o,a){if(!WB(a)||a.key==="Enter"){var l=i.props.onSelectItem;typeof l=="function"&&l(s,o)}}),Qt(fn(i),"onSwipeStart",function(){i.setState({swiping:!0})}),Qt(fn(i),"onSwipeEnd",function(){i.setState({swiping:!1})}),Qt(fn(i),"onSwipeMove",function(s){var o=s.x;if(!i.state.itemSize||!i.itemsWrapperRef||!i.state.visibleItems)return!1;var a=0,l=ir.Children.count(i.props.children),u=-(i.state.firstItem*100)/i.state.visibleItems,c=Math.max(l-i.state.visibleItems,0),h=-c*100/i.state.visibleItems;u===a&&o>0&&(o=0),u===h&&o<0&&(o=0);var d=i.itemsWrapperRef.clientWidth,p=u+100/(d/o);return i.itemsListRef&&["WebkitTransform","MozTransform","MsTransform","OTransform","transform","msTransform"].forEach(function(g){i.itemsListRef.style[g]=(0,QS.default)(p,"%",i.props.axis)}),!0}),Qt(fn(i),"slideRight",function(s){i.moveTo(i.state.firstItem-(typeof s=="number"?s:1))}),Qt(fn(i),"slideLeft",function(s){i.moveTo(i.state.firstItem+(typeof s=="number"?s:1))}),Qt(fn(i),"moveTo",function(s){s=s<0?0:s,s=s>=i.state.lastPosition?i.state.lastPosition:s,i.setState({firstItem:s})}),i.state={selectedItem:r.selectedItem,swiping:!1,showArrows:!1,firstItem:0,visibleItems:0,lastPosition:0},i}return $B(n,[{key:"componentDidMount",value:function(){this.setupThumbs()}},{key:"componentDidUpdate",value:function(i){this.props.selectedItem!==this.state.selectedItem&&this.setState({selectedItem:this.props.selectedItem,firstItem:this.getFirstItem(this.props.selectedItem)}),this.props.children!==i.children&&this.updateSizes()}},{key:"componentWillUnmount",value:function(){this.destroyThumbs()}},{key:"setupThumbs",value:function(){(0,Ph.default)().addEventListener("resize",this.updateSizes),(0,Ph.default)().addEventListener("DOMContentLoaded",this.updateSizes),this.updateSizes()}},{key:"destroyThumbs",value:function(){(0,Ph.default)().removeEventListener("resize",this.updateSizes),(0,Ph.default)().removeEventListener("DOMContentLoaded",this.updateSizes)}},{key:"getFirstItem",value:function(i){var s=i;return i>=this.state.lastPosition&&(s=this.state.lastPosition),i<this.state.firstItem+this.state.visibleItems&&(s=this.state.firstItem),i<this.state.firstItem&&(s=i),s}},{key:"renderItems",value:function(){var i=this;return this.props.children.map(function(s,o){var a=bs.default.ITEM(!1,o===i.state.selectedItem),l={key:o,ref:function(c){return i.setThumbsRef(c,o)},className:a,onClick:i.handleClickItem.bind(i,o,i.props.children[o]),onKeyDown:i.handleClickItem.bind(i,o,i.props.children[o]),"aria-label":"".concat(i.props.labels.item," ").concat(o+1),style:{width:i.props.thumbWidth}};return ir.default.createElement("li",R0({},l,{role:"button",tabIndex:0}),s)})}},{key:"render",value:function(){var i=this;if(!this.props.children)return null;var s=ir.Children.count(this.props.children)>1,o=this.state.showArrows&&this.state.firstItem>0,a=this.state.showArrows&&this.state.firstItem<this.state.lastPosition,l={},u=-this.state.firstItem*(this.state.itemSize||0),c=(0,QS.default)(u,"px",this.props.axis),h=this.props.transitionTime+"ms";return l={WebkitTransform:c,MozTransform:c,MsTransform:c,OTransform:c,transform:c,msTransform:c,WebkitTransitionDuration:h,MozTransitionDuration:h,MsTransitionDuration:h,OTransitionDuration:h,transitionDuration:h,msTransitionDuration:h},ir.default.createElement("div",{className:bs.default.CAROUSEL(!1)},ir.default.createElement("div",{className:bs.default.WRAPPER(!1),ref:this.setItemsWrapperRef},ir.default.createElement("button",{type:"button",className:bs.default.ARROW_PREV(!o),onClick:function(){return i.slideRight()},"aria-label":this.props.labels.leftArrow}),s?ir.default.createElement(LB.default,{tagName:"ul",className:bs.default.SLIDER(!1,this.state.swiping),onSwipeLeft:this.slideLeft,onSwipeRight:this.slideRight,onSwipeMove:this.onSwipeMove,onSwipeStart:this.onSwipeStart,onSwipeEnd:this.onSwipeEnd,style:l,innerRef:this.setItemsListRef,allowMouseEvents:this.props.emulateTouch},this.renderItems()):ir.default.createElement("ul",{className:bs.default.SLIDER(!1,this.state.swiping),ref:function(p){return i.setItemsListRef(p)},style:l},this.renderItems()),ir.default.createElement("button",{type:"button",className:bs.default.ARROW_NEXT(!a),onClick:function(){return i.slideLeft()},"aria-label":this.props.labels.rightArrow})))}}]),n}(ir.Component);Zc.default=U_;Qt(U_,"displayName","Thumbs");Qt(U_,"defaultProps",{axis:"horizontal",labels:{leftArrow:"previous slide / item",rightArrow:"next slide / item",item:"slide item"},selectedItem:0,thumbWidth:80,transitionTime:350});var nm={};Object.defineProperty(nm,"__esModule",{value:!0});nm.default=void 0;var qB=function(){return document};nm.default=qB;var An={};Object.defineProperty(An,"__esModule",{value:!0});An.setPosition=An.getPosition=An.isKeyboardEvent=An.defaultStatusFormatter=An.noop=void 0;var HB=I,KB=GB(dl);function GB(t){return t&&t.__esModule?t:{default:t}}var QB=function(){};An.noop=QB;var YB=function(e,n){return"".concat(e," of ").concat(n)};An.defaultStatusFormatter=YB;var ZB=function(e){return e?e.hasOwnProperty("key"):!1};An.isKeyboardEvent=ZB;var XB=function(e,n){if(n.infiniteLoop&&++e,e===0)return 0;var r=HB.Children.count(n.children);if(n.centerMode&&n.axis==="horizontal"){var i=-e*n.centerSlidePercentage,s=r-1;return e&&(e!==s||n.infiniteLoop)?i+=(100-n.centerSlidePercentage)/2:e===s&&(i+=100-n.centerSlidePercentage),i}return-e*100};An.getPosition=XB;var JB=function(e,n){var r={};return["WebkitTransform","MozTransform","MsTransform","OTransform","transform","msTransform"].forEach(function(i){r[i]=(0,KB.default)(e,"%",n)}),r};An.setPosition=JB;var Dr={};Object.defineProperty(Dr,"__esModule",{value:!0});Dr.fadeAnimationHandler=Dr.slideStopSwipingHandler=Dr.slideSwipeAnimationHandler=Dr.slideAnimationHandler=void 0;var E9=I,eW=tW(dl),Mr=An;function tW(t){return t&&t.__esModule?t:{default:t}}function ZS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ds(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZS(Object(n),!0).forEach(function(r){nW(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nW(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var rW=function(e,n){var r={},i=n.selectedItem,s=i,o=E9.Children.count(e.children)-1,a=e.infiniteLoop&&(i<0||i>o);if(a)return s<0?e.centerMode&&e.centerSlidePercentage&&e.axis==="horizontal"?r.itemListStyle=(0,Mr.setPosition)(-(o+2)*e.centerSlidePercentage-(100-e.centerSlidePercentage)/2,e.axis):r.itemListStyle=(0,Mr.setPosition)(-(o+2)*100,e.axis):s>o&&(r.itemListStyle=(0,Mr.setPosition)(0,e.axis)),r;var l=(0,Mr.getPosition)(i,e),u=(0,eW.default)(l,"%",e.axis),c=e.transitionTime+"ms";return r.itemListStyle={WebkitTransform:u,msTransform:u,OTransform:u,transform:u},n.swiping||(r.itemListStyle=Ds(Ds({},r.itemListStyle),{},{WebkitTransitionDuration:c,MozTransitionDuration:c,OTransitionDuration:c,transitionDuration:c,msTransitionDuration:c})),r};Dr.slideAnimationHandler=rW;var iW=function(e,n,r,i){var s={},o=n.axis==="horizontal",a=E9.Children.count(n.children),l=0,u=(0,Mr.getPosition)(r.selectedItem,n),c=n.infiniteLoop?(0,Mr.getPosition)(a-1,n)-100:(0,Mr.getPosition)(a-1,n),h=o?e.x:e.y,d=h;u===l&&h>0&&(d=0),u===c&&h<0&&(d=0);var p=u+100/(r.itemSize/d),g=Math.abs(h)>n.swipeScrollTolerance;return n.infiniteLoop&&g&&(r.selectedItem===0&&p>-100?p-=a*100:r.selectedItem===a-1&&p<-a*100&&(p+=a*100)),(!n.preventMovementUntilSwipeScrollTolerance||g||r.swipeMovementStarted)&&(r.swipeMovementStarted||i({swipeMovementStarted:!0}),s.itemListStyle=(0,Mr.setPosition)(p,n.axis)),g&&!r.cancelClick&&i({cancelClick:!0}),s};Dr.slideSwipeAnimationHandler=iW;var sW=function(e,n){var r=(0,Mr.getPosition)(n.selectedItem,e),i=(0,Mr.setPosition)(r,e.axis);return{itemListStyle:i}};Dr.slideStopSwipingHandler=sW;var oW=function(e,n){var r=e.transitionTime+"ms",i="ease-in-out",s={position:"absolute",display:"block",zIndex:-2,minHeight:"100%",opacity:0,top:0,right:0,left:0,bottom:0,transitionTimingFunction:i,msTransitionTimingFunction:i,MozTransitionTimingFunction:i,WebkitTransitionTimingFunction:i,OTransitionTimingFunction:i};return n.swiping||(s=Ds(Ds({},s),{},{WebkitTransitionDuration:r,MozTransitionDuration:r,OTransitionDuration:r,transitionDuration:r,msTransitionDuration:r})),{slideStyle:s,selectedStyle:Ds(Ds({},s),{},{opacity:1,position:"relative"}),prevStyle:Ds({},s)}};Dr.fadeAnimationHandler=oW;Object.defineProperty(Jp,"__esModule",{value:!0});Jp.default=void 0;var Ae=uW(I),aW=Jc(F_),Jr=Jc(Yc),lW=Jc(Zc),Dh=Jc(nm),Mh=Jc(Xc),Wl=An,Pf=Dr;function Jc(t){return t&&t.__esModule?t:{default:t}}function S9(){if(typeof WeakMap!="function")return null;var t=new WeakMap;return S9=function(){return t},t}function uW(t){if(t&&t.__esModule)return t;if(t===null||cu(t)!=="object"&&typeof t!="function")return{default:t};var e=S9();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var s=r?Object.getOwnPropertyDescriptor(t,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=t[i]}return n.default=t,e&&e.set(t,n),n}function cu(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?cu=function(n){return typeof n}:cu=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},cu(t)}function A0(){return A0=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},A0.apply(this,arguments)}function XS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XS(Object(n),!0).forEach(function(r){pe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cW(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function JS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hW(t,e,n){return e&&JS(t.prototype,e),n&&JS(t,n),t}function dW(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&O0(t,e)}function O0(t,e){return O0=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},O0(t,e)}function fW(t){var e=mW();return function(){var r=Df(t),i;if(e){var s=Df(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return pW(this,i)}}function pW(t,e){return e&&(cu(e)==="object"||typeof e=="function")?e:ge(t)}function ge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mW(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Df(t){return Df=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Df(t)}function pe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var $_=function(t){dW(n,t);var e=fW(n);function n(r){var i;cW(this,n),i=e.call(this,r),pe(ge(i),"thumbsRef",void 0),pe(ge(i),"carouselWrapperRef",void 0),pe(ge(i),"listRef",void 0),pe(ge(i),"itemsRef",void 0),pe(ge(i),"timer",void 0),pe(ge(i),"animationHandler",void 0),pe(ge(i),"setThumbsRef",function(o){i.thumbsRef=o}),pe(ge(i),"setCarouselWrapperRef",function(o){i.carouselWrapperRef=o}),pe(ge(i),"setListRef",function(o){i.listRef=o}),pe(ge(i),"setItemsRef",function(o,a){i.itemsRef||(i.itemsRef=[]),i.itemsRef[a]=o}),pe(ge(i),"autoPlay",function(){Ae.Children.count(i.props.children)<=1||(i.clearAutoPlay(),i.props.autoPlay&&(i.timer=setTimeout(function(){i.increment()},i.props.interval)))}),pe(ge(i),"clearAutoPlay",function(){i.timer&&clearTimeout(i.timer)}),pe(ge(i),"resetAutoPlay",function(){i.clearAutoPlay(),i.autoPlay()}),pe(ge(i),"stopOnHover",function(){i.setState({isMouseEntered:!0},i.clearAutoPlay)}),pe(ge(i),"startOnLeave",function(){i.setState({isMouseEntered:!1},i.autoPlay)}),pe(ge(i),"isFocusWithinTheCarousel",function(){return i.carouselWrapperRef?!!((0,Dh.default)().activeElement===i.carouselWrapperRef||i.carouselWrapperRef.contains((0,Dh.default)().activeElement)):!1}),pe(ge(i),"navigateWithKeyboard",function(o){if(i.isFocusWithinTheCarousel()){var a=i.props.axis,l=a==="horizontal",u={ArrowUp:38,ArrowRight:39,ArrowDown:40,ArrowLeft:37},c=l?u.ArrowRight:u.ArrowDown,h=l?u.ArrowLeft:u.ArrowUp;c===o.keyCode?i.increment():h===o.keyCode&&i.decrement()}}),pe(ge(i),"updateSizes",function(){if(!(!i.state.initialized||!i.itemsRef||i.itemsRef.length===0)){var o=i.props.axis==="horizontal",a=i.itemsRef[0];if(a){var l=o?a.clientWidth:a.clientHeight;i.setState({itemSize:l}),i.thumbsRef&&i.thumbsRef.updateSizes()}}}),pe(ge(i),"setMountState",function(){i.setState({hasMount:!0}),i.updateSizes()}),pe(ge(i),"handleClickItem",function(o,a){if(Ae.Children.count(i.props.children)!==0){if(i.state.cancelClick){i.setState({cancelClick:!1});return}i.props.onClickItem(o,a),o!==i.state.selectedItem&&i.setState({selectedItem:o})}}),pe(ge(i),"handleOnChange",function(o,a){Ae.Children.count(i.props.children)<=1||i.props.onChange(o,a)}),pe(ge(i),"handleClickThumb",function(o,a){i.props.onClickThumb(o,a),i.moveTo(o)}),pe(ge(i),"onSwipeStart",function(o){i.setState({swiping:!0}),i.props.onSwipeStart(o)}),pe(ge(i),"onSwipeEnd",function(o){i.setState({swiping:!1,cancelClick:!1,swipeMovementStarted:!1}),i.props.onSwipeEnd(o),i.clearAutoPlay(),i.state.autoPlay&&i.autoPlay()}),pe(ge(i),"onSwipeMove",function(o,a){i.props.onSwipeMove(a);var l=i.props.swipeAnimationHandler(o,i.props,i.state,i.setState.bind(ge(i)));return i.setState(sr({},l)),!!Object.keys(l).length}),pe(ge(i),"decrement",function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;i.moveTo(i.state.selectedItem-(typeof o=="number"?o:1))}),pe(ge(i),"increment",function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;i.moveTo(i.state.selectedItem+(typeof o=="number"?o:1))}),pe(ge(i),"moveTo",function(o){if(typeof o=="number"){var a=Ae.Children.count(i.props.children)-1;o<0&&(o=i.props.infiniteLoop?a:0),o>a&&(o=i.props.infiniteLoop?0:a),i.selectItem({selectedItem:o}),i.state.autoPlay&&i.state.isMouseEntered===!1&&i.resetAutoPlay()}}),pe(ge(i),"onClickNext",function(){i.increment(1)}),pe(ge(i),"onClickPrev",function(){i.decrement(1)}),pe(ge(i),"onSwipeForward",function(){i.increment(1),i.props.emulateTouch&&i.setState({cancelClick:!0})}),pe(ge(i),"onSwipeBackwards",function(){i.decrement(1),i.props.emulateTouch&&i.setState({cancelClick:!0})}),pe(ge(i),"changeItem",function(o){return function(a){(!(0,Wl.isKeyboardEvent)(a)||a.key==="Enter")&&i.moveTo(o)}}),pe(ge(i),"selectItem",function(o){i.setState(sr({previousItem:i.state.selectedItem},o),function(){i.setState(i.animationHandler(i.props,i.state))}),i.handleOnChange(o.selectedItem,Ae.Children.toArray(i.props.children)[o.selectedItem])}),pe(ge(i),"getInitialImage",function(){var o=i.props.selectedItem,a=i.itemsRef&&i.itemsRef[o],l=a&&a.getElementsByTagName("img")||[];return l[0]}),pe(ge(i),"getVariableItemHeight",function(o){var a=i.itemsRef&&i.itemsRef[o];if(i.state.hasMount&&a&&a.children.length){var l=a.children[0].getElementsByTagName("img")||[];if(l.length>0){var u=l[0];if(!u.complete){var c=function p(){i.forceUpdate(),u.removeEventListener("load",p)};u.addEventListener("load",c)}}var h=l[0]||a.children[0],d=h.clientHeight;return d>0?d:null}return null});var s={initialized:!1,previousItem:r.selectedItem,selectedItem:r.selectedItem,hasMount:!1,isMouseEntered:!1,autoPlay:r.autoPlay,swiping:!1,swipeMovementStarted:!1,cancelClick:!1,itemSize:1,itemListStyle:{},slideStyle:{},selectedStyle:{},prevStyle:{}};return i.animationHandler=typeof r.animationHandler=="function"&&r.animationHandler||r.animationHandler==="fade"&&Pf.fadeAnimationHandler||Pf.slideAnimationHandler,i.state=sr(sr({},s),i.animationHandler(r,s)),i}return hW(n,[{key:"componentDidMount",value:function(){this.props.children&&this.setupCarousel()}},{key:"componentDidUpdate",value:function(i,s){!i.children&&this.props.children&&!this.state.initialized&&this.setupCarousel(),!i.autoFocus&&this.props.autoFocus&&this.forceFocus(),s.swiping&&!this.state.swiping&&this.setState(sr({},this.props.stopSwipingHandler(this.props,this.state))),(i.selectedItem!==this.props.selectedItem||i.centerMode!==this.props.centerMode)&&(this.updateSizes(),this.moveTo(this.props.selectedItem)),i.autoPlay!==this.props.autoPlay&&(this.props.autoPlay?this.setupAutoPlay():this.destroyAutoPlay(),this.setState({autoPlay:this.props.autoPlay}))}},{key:"componentWillUnmount",value:function(){this.destroyCarousel()}},{key:"setupCarousel",value:function(){var i=this;this.bindEvents(),this.state.autoPlay&&Ae.Children.count(this.props.children)>1&&this.setupAutoPlay(),this.props.autoFocus&&this.forceFocus(),this.setState({initialized:!0},function(){var s=i.getInitialImage();s&&!s.complete?s.addEventListener("load",i.setMountState):i.setMountState()})}},{key:"destroyCarousel",value:function(){this.state.initialized&&(this.unbindEvents(),this.destroyAutoPlay())}},{key:"setupAutoPlay",value:function(){this.autoPlay();var i=this.carouselWrapperRef;this.props.stopOnHover&&i&&(i.addEventListener("mouseenter",this.stopOnHover),i.addEventListener("mouseleave",this.startOnLeave))}},{key:"destroyAutoPlay",value:function(){this.clearAutoPlay();var i=this.carouselWrapperRef;this.props.stopOnHover&&i&&(i.removeEventListener("mouseenter",this.stopOnHover),i.removeEventListener("mouseleave",this.startOnLeave))}},{key:"bindEvents",value:function(){(0,Mh.default)().addEventListener("resize",this.updateSizes),(0,Mh.default)().addEventListener("DOMContentLoaded",this.updateSizes),this.props.useKeyboardArrows&&(0,Dh.default)().addEventListener("keydown",this.navigateWithKeyboard)}},{key:"unbindEvents",value:function(){(0,Mh.default)().removeEventListener("resize",this.updateSizes),(0,Mh.default)().removeEventListener("DOMContentLoaded",this.updateSizes);var i=this.getInitialImage();i&&i.removeEventListener("load",this.setMountState),this.props.useKeyboardArrows&&(0,Dh.default)().removeEventListener("keydown",this.navigateWithKeyboard)}},{key:"forceFocus",value:function(){var i;(i=this.carouselWrapperRef)===null||i===void 0||i.focus()}},{key:"renderItems",value:function(i){var s=this;return this.props.children?Ae.Children.map(this.props.children,function(o,a){var l=a===s.state.selectedItem,u=a===s.state.previousItem,c=l&&s.state.selectedStyle||u&&s.state.prevStyle||s.state.slideStyle||{};s.props.centerMode&&s.props.axis==="horizontal"&&(c=sr(sr({},c),{},{minWidth:s.props.centerSlidePercentage+"%"})),s.state.swiping&&s.state.swipeMovementStarted&&(c=sr(sr({},c),{},{pointerEvents:"none"}));var h={ref:function(p){return s.setItemsRef(p,a)},key:"itemKey"+a+(i?"clone":""),className:Jr.default.ITEM(!0,a===s.state.selectedItem,a===s.state.previousItem),onClick:s.handleClickItem.bind(s,a,o),style:c};return Ae.default.createElement("li",h,s.props.renderItem(o,{isSelected:a===s.state.selectedItem,isPrevious:a===s.state.previousItem}))}):[]}},{key:"renderControls",value:function(){var i=this,s=this.props,o=s.showIndicators,a=s.labels,l=s.renderIndicator,u=s.children;return o?Ae.default.createElement("ul",{className:"control-dots"},Ae.Children.map(u,function(c,h){return l&&l(i.changeItem(h),h===i.state.selectedItem,h,a.item)})):null}},{key:"renderStatus",value:function(){return this.props.showStatus?Ae.default.createElement("p",{className:"carousel-status"},this.props.statusFormatter(this.state.selectedItem+1,Ae.Children.count(this.props.children))):null}},{key:"renderThumbs",value:function(){return!this.props.showThumbs||!this.props.children||Ae.Children.count(this.props.children)===0?null:Ae.default.createElement(lW.default,{ref:this.setThumbsRef,onSelectItem:this.handleClickThumb,selectedItem:this.state.selectedItem,transitionTime:this.props.transitionTime,thumbWidth:this.props.thumbWidth,labels:this.props.labels,emulateTouch:this.props.emulateTouch},this.props.renderThumbs(this.props.children))}},{key:"render",value:function(){var i=this;if(!this.props.children||Ae.Children.count(this.props.children)===0)return null;var s=this.props.swipeable&&Ae.Children.count(this.props.children)>1,o=this.props.axis==="horizontal",a=this.props.showArrows&&Ae.Children.count(this.props.children)>1,l=a&&(this.state.selectedItem>0||this.props.infiniteLoop)||!1,u=a&&(this.state.selectedItem<Ae.Children.count(this.props.children)-1||this.props.infiniteLoop)||!1,c=this.renderItems(!0),h=c.shift(),d=c.pop(),p={className:Jr.default.SLIDER(!0,this.state.swiping),onSwipeMove:this.onSwipeMove,onSwipeStart:this.onSwipeStart,onSwipeEnd:this.onSwipeEnd,style:this.state.itemListStyle,tolerance:this.props.swipeScrollTolerance},g={};if(o){if(p.onSwipeLeft=this.onSwipeForward,p.onSwipeRight=this.onSwipeBackwards,this.props.dynamicHeight){var _=this.getVariableItemHeight(this.state.selectedItem);g.height=_||"auto"}}else p.onSwipeUp=this.props.verticalSwipe==="natural"?this.onSwipeBackwards:this.onSwipeForward,p.onSwipeDown=this.props.verticalSwipe==="natural"?this.onSwipeForward:this.onSwipeBackwards,p.style=sr(sr({},p.style),{},{height:this.state.itemSize}),g.height=this.state.itemSize;return Ae.default.createElement("div",{"aria-label":this.props.ariaLabel,className:Jr.default.ROOT(this.props.className),ref:this.setCarouselWrapperRef,tabIndex:this.props.useKeyboardArrows?0:void 0},Ae.default.createElement("div",{className:Jr.default.CAROUSEL(!0),style:{width:this.props.width}},this.renderControls(),this.props.renderArrowPrev(this.onClickPrev,l,this.props.labels.leftArrow),Ae.default.createElement("div",{className:Jr.default.WRAPPER(!0,this.props.axis),style:g},s?Ae.default.createElement(aW.default,A0({tagName:"ul",innerRef:this.setListRef},p,{allowMouseEvents:this.props.emulateTouch}),this.props.infiniteLoop&&d,this.renderItems(),this.props.infiniteLoop&&h):Ae.default.createElement("ul",{className:Jr.default.SLIDER(!0,this.state.swiping),ref:function(y){return i.setListRef(y)},style:this.state.itemListStyle||{}},this.props.infiniteLoop&&d,this.renderItems(),this.props.infiniteLoop&&h)),this.props.renderArrowNext(this.onClickNext,u,this.props.labels.rightArrow),this.renderStatus()),this.renderThumbs())}}]),n}(Ae.default.Component);Jp.default=$_;pe($_,"displayName","Carousel");pe($_,"defaultProps",{ariaLabel:void 0,axis:"horizontal",centerSlidePercentage:80,interval:3e3,labels:{leftArrow:"previous slide / item",rightArrow:"next slide / item",item:"slide item"},onClickItem:Wl.noop,onClickThumb:Wl.noop,onChange:Wl.noop,onSwipeStart:function(){},onSwipeEnd:function(){},onSwipeMove:function(){return!1},preventMovementUntilSwipeScrollTolerance:!1,renderArrowPrev:function(e,n,r){return Ae.default.createElement("button",{type:"button","aria-label":r,className:Jr.default.ARROW_PREV(!n),onClick:e})},renderArrowNext:function(e,n,r){return Ae.default.createElement("button",{type:"button","aria-label":r,className:Jr.default.ARROW_NEXT(!n),onClick:e})},renderIndicator:function(e,n,r,i){return Ae.default.createElement("li",{className:Jr.default.DOT(n),onClick:e,onKeyDown:e,value:r,key:r,role:"button",tabIndex:0,"aria-label":"".concat(i," ").concat(r+1)})},renderItem:function(e){return e},renderThumbs:function(e){var n=Ae.Children.map(e,function(r){var i=r;if(r.type!=="img"&&(i=Ae.Children.toArray(r.props.children).find(function(s){return s.type==="img"})),!!i)return i});return n.filter(function(r){return r}).length===0?(console.warn("No images found! Can't build the thumb list without images. If you don't need thumbs, set showThumbs={false} in the Carousel. Note that it's not possible to get images rendered inside custom components. More info at https://github.com/leandrowd/react-responsive-carousel/blob/master/TROUBLESHOOTING.md"),[]):n},statusFormatter:Wl.defaultStatusFormatter,selectedItem:0,showArrows:!0,showIndicators:!0,showStatus:!0,showThumbs:!0,stopOnHover:!0,swipeScrollTolerance:5,swipeable:!0,transitionTime:350,verticalSwipe:"standard",width:"100%",animationHandler:"slide",swipeAnimationHandler:Pf.slideSwipeAnimationHandler,stopSwipingHandler:Pf.slideStopSwipingHandler});var gW={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Carousel",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"CarouselProps",{enumerable:!0,get:function(){return n.CarouselProps}}),Object.defineProperty(t,"Thumbs",{enumerable:!0,get:function(){return r.default}});var e=i(Jp),n=gW,r=i(Zc);function i(s){return s&&s.__esModule?s:{default:s}}})(v9);function C9({user:t,post:e}){var E,C;const n=tr(),r=wo(),[i,s]=I.useState(!1),[o,a]=I.useState(!1),[l,u]=I.useState(!1),{mutate:c}=pi({mutationFn:({id:T,vote:b})=>Lj(T,b)}),{mutate:h,isLoading:d}=pi({mutationFn:()=>Mj(e.id),onSuccess:async()=>{const T=await r.fetchQuery([`${window.location.pathname==="/"?"posts":"getUserPosts"}`]);r.setQueryData([`${window.location.pathname==="/"?"posts":"getUserPosts"}`],T)}}),[p,g]=I.useState(e.votes),[_,w]=I.useState(!1),[y,f]=I.useState(!1);I.useEffect(()=>{const T=e.voter_ids.find(b=>{var k;return b.id===((k=W==null?void 0:W.currentUser)==null?void 0:k.uid)});T&&(T.vote==="up"?w(!0):f(!0))},[]);function m(T){c(T===1?{id:e.id,vote:"up"}:{id:e.id,vote:"down"}),!_&&!y?(T===1?w(!0):T===-1&&f(!0),e.votes+=T,g(e.votes)):_&&T===1?(w(!1),e.votes-=T,g(e.votes)):_&&T===-1?(w(!1),f(!0),e.votes+=2*T,g(e.votes)):y&&T===-1?(f(!1),e.votes-=T,g(e.votes)):y&&T===1&&(w(!0),f(!1),e.votes+=2*T,g(e.votes))}return A(vr,{children:[l&&v("div",{className:"w-full flex items-center justify-center  px-2 h-screen z-50 bg-black bg-opacity-50 fixed top-0 left-0",children:A("div",{className:"w-full max-w-lg flex flex-col gap-8 items-center opacity-100 py-8 bg-slate-900 rounded-md px-4 ",children:[v("p",{children:"Are you sure you want to delete this post? if you delete it, you won't be able to get it back"}),A("div",{className:"flex gap-4",children:[v("button",{onClick:T=>{h(),u(!1),T.target.disabled=!0},className:"p-2 px-4 rounded-md bg-yellow-950 text-yellow-500 text-sm md:text-base",children:d?A("div",{role:"status",className:"w-full flex flex-col items-center",children:[A("svg",{"aria-hidden":"true",className:"inline w-6 h-6 text-gray-200 animate-spin dark:text-gray-600 fill-yellow-500",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[v("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),v("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),v("span",{className:"sr-only",children:"Loading..."})]}):"Delete"}),v("button",{className:"p-2 px-4 rounded-md text-red-500 bg-red-950 bg-opacity-50 text-sm md:text-base",onClick:()=>u(!1),children:"Cancel"})]})]})}),A("div",{className:"rounded-md pb-4 bg-slate-950 w-full max-w-lg mx-auto w-fullshadow-xl mb-4",children:[A("div",{className:"flex gap-4 items-center pt-4 pl-4",children:[A("div",{className:"relative",children:[v("img",{onClick:()=>n(`/profile/${e.user_id}`),src:t&&t.profile_photo?t.profile_photo:"https://st3.depositphotos.com/6672868/13701/v/450/depositphotos_137014128-stock-illustration-user-profile-icon.jpg",className:" w-12 h-12 rounded-full object-cover cursor-pointer"}),v("div",{className:`absolute bottom-0 right-0 w-5 h-5 rounded-full ${t.type==="r"?"bg-blue-600":"bg-yellow-500"}  text-black border-2 border-base-100 flex items-center justify-center text-[14px]`,children:t.type==="r"?v(XN,{}):v(t9,{})})]}),A("div",{className:"text-sm",children:[v(CI,{to:`/profile/${e.user_id}`,className:"text-lg font-bold cursor-pointer",children:t.username||"user"}),e.community&&"/",v("a",{href:"#",children:e.community&&e.community.length>15?e.community.substring(0,15)+"...":e.community}),A("div",{className:"flex gap-2 text-base text-zinc-400",children:[v("p",{children:Xp(e.created_at)}),e.location&&A("a",{href:"#",className:"flex gap-1 items-center",children:[v(pB,{})," ",e.location]})]})]}),A("div",{className:`dropdown dropdown-end ml-auto mr-4 ${l&&"hidden"}`,children:[v("label",{tabIndex:0,className:"cursor-pointer",children:v(e9,{className:"text-2xl"})}),A("ul",{tabIndex:0,className:"dropdown-content menu p-2 shadow rounded-box w-52 bg-slate-950",children:[e.user_id===((E=W.currentUser)==null?void 0:E.uid)&&v("li",{onClick:()=>u(!0),children:v("a",{children:"Delete"})}),v("li",{children:v("a",{children:"Hide"})}),v("li",{children:v("a",{children:"Report"})}),v("li",{children:v("a",{children:"Copy link"})})]})]})]}),v("div",{className:"px-4 py-4",children:v("p",{children:e.text.length<200?e.text:A(vr,{children:[i?e.text:e.text.slice(0,200),v("span",{className:"ml-1 cursor-pointer underline",onClick:()=>s(!i),children:i?"show less":"show more"})]})})}),!d&&((C=e.images)==null?void 0:C.length)>0&&v(v9.Carousel,{showArrows:!0,showThumbs:!1,centerMode:!0,swipeable:!0,useKeyboardArrows:!0,children:e==null?void 0:e.images.map((T,b)=>v("div",{className:"h-[77vh] flex items-center justify-center",children:v("img",{src:T,className:"object-contain w-full h-full"})}))}),A("div",{className:"flex gap-4 items-center px-4 py-2",children:[A("p",{className:"flex gap-2 items-center",children:[v(D_,{className:`${_?"text-blue-600":"text-white"}`,onClick:()=>{m(1)}})," ",v("span",{className:"text-sm",children:`Votes (${p})`})," ",v(P_,{className:`${y?"text-yellow-500":"text-white"}`,onClick:()=>{m(-1)}})]}),A("label",{htmlFor:`comments_${e.id}`,className:"flex gap-2 items-center",onClick:()=>{a(!o)},children:[v(JN,{})," ",v("span",{className:"text-sm",children:`Comments (${e.comment_ids.length})`})]}),v(dz,{}),v(fz,{className:"ml-auto"})]}),o&&v(kB,{postID:e.id})]})]})}function yW(){const{data:t,status:e}=Un({queryKey:["posts"],queryFn:Nj});return A("div",{className:"px-4 pt-20",children:[e==="loading"&&A("div",{role:"status",className:"w-full h-screen flex flex-col pt-4 items-center",children:[A("svg",{"aria-hidden":"true",className:"inline w-8 h-8 mr-2 text-gray-200 animate-spin dark:text-gray-600 fill-yellow-400",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[v("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),v("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),v("span",{className:"sr-only",children:"Loading..."})]}),e==="success"&&v(y9,{}),e==="success"&&t.map(n=>n.user_data&&v(C9,{user:n.user_data,post:n},n.id))]})}function V_(){var _;const[t,e]=I.useState(""),n=I.useRef(),r=tr(),[i,s]=I.useState(!1),[o,a]=I.useState(!1),l=w=>{var m,E;const y=(E=(m=w==null?void 0:w.target)==null?void 0:m.files)==null?void 0:E[0],f=URL.createObjectURL(y);e(f)},u=()=>{var w;(w=n.current)==null||w.click()},{mutate:c,isLoading:h}=pi({mutationFn:()=>{var w,y,f;return Ij((w=W==null?void 0:W.currentUser)==null?void 0:w.uid,(f=(y=n==null?void 0:n.current)==null?void 0:y.files)==null?void 0:f[0])},onSuccess:async()=>{console.log("changed successfully"),location.reload()}}),{data:d,status:p}=Un({queryKey:["getUserWithId"],queryFn:()=>{var w;return xo((w=W==null?void 0:W.currentUser)==null?void 0:w.uid)}}),g=()=>{window.localStorage.removeItem("currentUser"),window.sessionStorage.removeItem("currentUser"),r("/login")};return A(vr,{children:[((_=n.current)==null?void 0:_.value)&&v("div",{className:"w-full flex items-center justify-center  px-2 h-screen z-50 bg-black bg-opacity-50 fixed top-0 left-0",children:A("div",{className:"w-full max-w-lg flex flex-col gap-8 items-center opacity-100 py-8 bg-slate-900 rounded-md px-4",children:[v("p",{className:"text-yellow-500 flex items-start gap-2",children:"Warning: you're about to Change your profile picture"}),v("img",{src:t,className:" w-40 h-40 rounded-full object-cover"}),A("div",{className:"flex gap-4",children:[v("button",{className:"p-2 px-4 rounded-md bg-yellow-500 text-sm md:text-base",onClick:w=>{c(),w.target.disabled=!0},children:h?A("div",{role:"status",className:"w-full flex flex-col items-center",children:[A("svg",{"aria-hidden":"true",className:"inline w-6 h-6 text-gray-200 animate-spin dark:text-gray-600 fill-white",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[v("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),v("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),v("span",{className:"sr-only",children:"Loading..."})]}):"Save"}),v("button",{className:"p-2 px-4 rounded-md bg-yellow-950 text-yellow-500 text-sm md:text-base",onClick:u,children:"Select other photo"}),v("button",{className:"p-2 px-4 rounded-md text-red-500 bg-red-950 bg-opacity-50 text-sm md:text-base",onClick:()=>{n.current.value="",e("")},children:"Cancel"})]})]})}),A("div",{className:"navbar justify-between bg-slate-950 fixed top-0 mb-4 z-30",children:[v("div",{onClick:()=>r("/"),className:"w-9 h-9 flex items-center justify-center text-lg font-bold rounded-sm bg-yellow-500",children:v(iz,{})}),v("div",{className:"flex-none",children:A("ul",{className:"menu menu-horizontal px-1 flex items-center gap-2",children:[v("div",{className:"w-9 h-9 flex items-center justify-center rounded-sm text-lg bg-slate-900",children:v(lz,{})}),v("div",{className:"w-9 h-9 flex items-center justify-center rounded-sm text-lg bg-slate-900",children:v(oz,{})}),v("div",{className:"w-9 h-9 flex items-center justify-center rounded-sm text-lg bg-slate-900",children:v(mB,{})}),v("div",{className:"w-9 h-9 flex items-center justify-center rounded-sm text-lg bg-slate-900",children:v(rz,{})}),p==="loading"&&A("div",{role:"status",className:"w-9 flex flex-col items-center",children:[A("svg",{"aria-hidden":"true",className:"inline w-6 h-6 text-gray-200 animate-spin dark:text-gray-600 fill-yellow-500",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[v("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),v("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),v("span",{className:"sr-only",children:"Loading..."})]}),p==="success"&&v("div",{onClick:()=>a(!o),className:"w-9 h-9 flex items-center justify-center rounded-sm text-lg bg-slate-900 overflow-hidden",children:v("img",{src:d!=null&&d.profile_photo?d==null?void 0:d.profile_photo:"https://st3.depositphotos.com/6672868/13701/v/450/depositphotos_137014128-stock-illustration-user-profile-icon.jpg"})}),v("div",{className:`absolute top-14 right-3 w-60 p-4 bg-slate-950 rounded-md ${o?"":"invisible"}`,children:A("div",{className:"flex flex-col gap-2",children:[A("div",{className:"flex gap-4",children:[v("img",{onClick:()=>s(!i),src:d!=null&&d.profile_photo?d==null?void 0:d.profile_photo:"https://st3.depositphotos.com/6672868/13701/v/450/depositphotos_137014128-stock-illustration-user-profile-icon.jpg",className:" w-12 h-12 rounded-full object-cover cursor-pointer"}),i&&v("button",{onClick:u,className:"z-40 absolute top-12 left-8 rounded-md bg-slate-950 p-2 text-sm md:text-base",children:"Change profile picture"}),v("input",{onChange:l,type:"file",id:"file",ref:n,accept:"image/png, image/jpeg",style:{display:"none"}}),A("div",{className:"flex flex-col",children:[v("p",{className:"font-bold",children:d==null?void 0:d.username}),v("p",{className:"text-sm text-gray-400",children:(d==null?void 0:d.type)==="r"?"Reader":"Writer"})]})]}),v("button",{onClick:()=>{var w;return r(`/profile/${(w=W.currentUser)==null?void 0:w.uid}`)},className:"w-full flex items-center justify-center py-2 text-sm bg-yellow-950 text-yellow-500",children:"View profile"}),v("button",{onClick:()=>r("/yelo"),className:"w-full flex items-center justify-center py-2 text-sm font-bold bg-yellow-500",children:"Yelo"}),A("button",{onClick:g,className:"w-full flex items-center p-4 ",children:[v(hz,{}),v("span",{className:"ml-2",children:"Sign Out"})]}),A("div",{className:"flex gap-4",children:[v("div",{className:"w-9 h-9 flex items-center justify-center rounded-sm text-lg bg-slate-900",children:v(pz,{})}),v("div",{className:"w-9 h-9 flex items-center justify-center rounded-sm text-lg bg-slate-900",children:v(uz,{})})]})]})})]})})]})]})}function T9(){var s,o;const t=bO();console.log(t.user_id);const{data:e,status:n}=Un({queryKey:["getUserUsingId"],queryFn:()=>xo(t.user_id||"")}),{data:r,status:i}=Un({queryKey:["getUserPosts"],queryFn:()=>Pj(t.user_id?t.user_id:"")});return I.useEffect(()=>{window.scrollTo(0,0)},[]),A("div",{className:"bg-slate-900 min-h-screen mb-0 overflow-hidden",children:[v(V_,{}),A("div",{className:"px-4 pt-20 flex flex-col",children:[n==="loading"&&v(vr,{children:A("div",{role:"status",className:"w-full h-screen flex flex-col pt-4 items-center",children:[A("svg",{"aria-hidden":"true",className:"inline w-8 h-8 mr-2 text-gray-200 animate-spin dark:text-gray-600 fill-yellow-400",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[v("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),v("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),v("span",{className:"sr-only",children:"Loading..."})]})}),n==="success"&&A(vr,{children:[A("div",{className:"w-full bg-slate-950 mb-4 max-w-lg md:mx-auto pt-20 pb-4 relative rounded-md overflow-hidden",children:[v("div",{className:`w-full h-36 absolute top-0 z-0 left-0 ${(e==null?void 0:e.type)==="r"?"bg-blue-600":"bg-yellow-500"}`,children:v("div",{className:`text-9xl  flex items-center ${(e==null?void 0:e.type)==="w"?"justify-start text-yellow-900":"justify-end text-blue-900"}`,children:(e==null?void 0:e.type)==="r"?v(XN,{}):v(t9,{})})}),A("div",{className:"flex w-full z-20 flex-col gap-4 relative items-center",children:[v("img",{src:e==null?void 0:e.profile_photo,className:"w-28 h-28 rounded-full object-cover border-white border-[3px]",alt:""}),v("p",{className:"text-2xl font-bold",children:e==null?void 0:e.username}),v("p",{className:"text-lg",children:(e==null?void 0:e.type)==="r"?"Reader":"Writer"}),t.user_id===((s=W.currentUser)==null?void 0:s.uid)&&A("div",{className:"flex gap-4",children:[A("button",{className:"p-2 px-4 flex items-center gap-1 rounded-md bg-yellow-950 text-yellow-500 text-sm md:text-base",children:["Edit profile",v(cz,{className:"text-xl"})]}),v("button",{className:"p-2 px-3 rounded-md text-lg flex items-center justify-center bg-slate-900",children:v(e9,{className:"text-2xl"})})]})]})]}),t.user_id===((o=W==null?void 0:W.currentUser)==null?void 0:o.uid)&&v(y9,{}),i==="loading"&&A("div",{role:"status",className:"w-full flex flex-col items-center",children:[A("svg",{"aria-hidden":"true",className:"inline w-8 h-8 mr-2 text-gray-200 animate-spin dark:text-gray-600 fill-yellow-400",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[v("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),v("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),v("span",{className:"sr-only",children:"Loading..."})]}),i==="success"&&r.map(a=>a.user_data&&v(C9,{user:a.user_data,post:a},a.id))]})]})]})}function vW(){return tr(),!window.localStorage.getItem("currentUser")&&!window.sessionStorage.getItem("currentUser")?v(jO,{to:"/login",replace:!0}):A("div",{className:"bg-slate-900 mb-0 overflow-hidden",children:[v(V_,{}),A(SI,{children:[v(Xr,{path:"*",element:v(yW,{})}),v(Xr,{path:"/profile/:user_id",element:v(T9,{})})]})]})}function _W(){const{register:t,handleSubmit:e}=hl({defaultValues:{email:"",password:"",confirmPassword:"",username:"",type:"w"}}),n=tr(),{mutate:r,data:i,error:s,isLoading:o,isError:a}=pi({mutationFn:kj,mutationKey:["currentUser"],onSuccess:async u=>{console.log("auth data from firebase",u),await bj(),n("/login")}});async function l(u){console.log("user data from submit handler",u),r(u)}return v("div",{className:"relative bg-slate-900 h-screen w-full flex items-center justify-center py-10 md:px-0",children:A("div",{className:"md:w-2/5 bg-slate-950 rounded-lg flex flex-col items-center py-6 md:mr-10 px-6 mx-6 relative z-10 backdrop-blur-sm",children:[o&&v("p",{children:"Loading..."}),v("h2",{className:"text-3xl font-bold mb-2 md:text-center",children:"Sign Up"}),A("p",{className:"font-light text-center mb-6",children:["Already have an account?"," ",v("span",{className:"text-yellow-500 cursor-pointer",onClick:()=>n("/login"),children:"Log In"})]}),A("form",{onSubmit:e(l),className:"space-y-4",children:[v("input",{type:"text",placeholder:"Email",className:"input input-bordered w-full py-6 rounded-sm bg-slate-900 focus:outline-none focus:border-yellow-500",...t("email",{required:!0})}),v("input",{type:"text",placeholder:"User Name",className:"input input-bordered w-full py-6 rounded-sm bg-slate-900 focus:outline-none focus:border-yellow-500",...t("username",{required:!0})}),v("input",{type:"password",placeholder:"Password",className:"input input-bordered w-full py-6 rounded-sm bg-slate-900 focus:outline-none focus:border-yellow-500",...t("password",{required:!0})}),v("input",{type:"password",placeholder:"Confirm Password",className:"input input-bordered w-full py-6 rounded-sm bg-slate-900 focus:outline-none focus:border-yellow-500",...t("confirmPassword",{required:!0})}),v("div",{className:"form-control mb-0",children:A("label",{className:"label cursor-pointer",children:[v("span",{className:"label-text",children:"Writer"}),v("input",{type:"radio",className:"radio checked:bg-yellow-500",checked:!0,value:"w",...t("type")})]})}),v("div",{className:"form-control mt-0",children:A("label",{className:"label cursor-pointer",children:[v("span",{className:"label-text",children:"Reader"}),v("input",{type:"radio",className:"radio checked:bg-blue-500",value:"r",...t("type")})]})}),v("button",{type:"submit",className:"text-lg font-semibold rounded-sm w-full py-3 bg-yellow-500",children:"Sign Up"})]})]})})}function wW(t){return Je({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M881 442.4H519.7v148.5h206.4c-8.9 48-35.9 88.6-76.6 115.8-34.4 23-78.3 36.6-129.9 36.6-99.9 0-184.4-67.5-214.6-158.2-7.6-23-12-47.6-12-72.9s4.4-49.9 12-72.9c30.3-90.6 114.8-158.1 214.7-158.1 56.3 0 106.8 19.4 146.6 57.4l110-110.1c-66.5-62-153.2-100-256.6-100-149.9 0-279.6 86-342.7 211.4-26 51.8-40.8 110.4-40.8 172.4S151 632.8 177 684.6C240.1 810 369.8 896 519.7 896c103.6 0 190.4-34.4 253.8-93 72.5-66.8 114.4-165.2 114.4-282.1 0-27.2-2.4-53.3-6.9-78.5z"}}]})(t)}const EW=Ee.object({email:vs().email({message:"Invalid email address"}),password:vs().min(6,{message:"Password is too short"})});function SW(){var d,p;const{register:t,handleSubmit:e,formState:n}=hl({resolver:Gc(EW),defaultValues:{email:"",password:""}}),[r,i]=I.useState(!1),{errors:s}=n,[o,a]=I.useState(!1),l=I.useRef(),u=tr();function c(g){const _={...g,rememberMe:o};h(_)}const{mutate:h}=pi({mutationFn:xj,onSuccess:()=>{u("/")},onError:g=>{console.log({...g}),(g.code==="auth/user-not-found"||g.code==="auth/wrong-password")&&(i(!0),l.current=window.setTimeout(()=>{i(!1)},3e3))}});return I.useEffect(()=>(window.localStorage.getItem("currentUser")&&(console.log(JSON.parse(window.localStorage.getItem("currentUser")).user.uid),u("/")),()=>{clearTimeout(l.current)}),[l]),v("div",{className:"relative bg-slate-900 h-screen w-full flex items-center justify-center py-10 md:px-0",children:A("div",{className:"md:w-2/5 bg-slate-950 w-full rounded-lg flex flex-col items-center py-6 md:mr-10 px-6 mx-6 relative z-10 backdrop-blur-sm",children:[v("h2",{className:"text-3xl font-bold mb-2 md:text-center",children:"Log In"}),A("p",{className:"font-light text-center mb-6",children:["Don't have an account?"," ",v(CI,{to:"/signup",className:"text-yellow-500 cursor-pointer",children:"Sign Up"})]}),A("form",{onSubmit:e(c),className:"space-y-2 w-full",children:[v("input",{type:"text",placeholder:"Email",className:"input input-bordered w-full py-6 rounded-sm bg-slate-900 focus:outline-none focus:border-yellow-500",...t("email")}),v("div",{className:"text-red-600",children:String((d=s.email)!=null&&d.message?s.email.message:"")}),v("input",{type:"password",placeholder:"Password",className:"input input-bordered w-full py-6 rounded-sm bg-slate-900 focus:outline-none focus:border-yellow-500",...t("password")}),v("div",{className:"text-red-600",children:String((p=s.password)!=null&&p.message?s.password.message:"")}),v("div",{className:"form-control",children:A("label",{className:"cursor-pointer label",children:[v("span",{className:"label-text",children:"Remember me"}),v("input",{type:"checkbox",checked:o,onChange:()=>{a(!o)},className:"checkbox checkbox-sm checkbox-warning"})]})}),v("button",{type:"submit",className:"text-lg font-semibold rounded-sm w-full py-3 bg-yellow-500",children:"Log In"}),A("div",{className:`alert alert-error my-4 rounded-none h-12 ${r?"":"hidden"}`,children:[v("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:v("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),v("span",{children:"Wrong email or password"})]}),v("p",{className:"text-center font-light",children:"or sign up with"}),v("button",{className:"text-lg flex justify-center font-semibold bg-slate-900 rounded-sm w-full py-2 md:py-3",children:v(wW,{className:"text-4xl md:text-3xl"})})]})]})})}function CW(){const[t,e]=I.useState(1),{data:n,status:r}=Un({queryKey:["test query",t],queryFn:Oj});return r==="loading"?v(vr,{children:"loading..."}):(r==="success"&&console.log("data",n),A(vr,{children:[v("p",{children:"data"}),v("button",{className:"btn",onClick:()=>{e(i=>i+1),console.log(t)},children:"add page"})]}))}function TW({userId:t}){const{data:e,isSuccess:n}=Un({queryKey:["getChatUserID",t],queryFn:()=>xo(t)});return A("div",{className:"w-full flex items-center gap-4 cursor-pointer",children:[v("img",{src:e&&e.profile_photo?e.profile_photo:"https://st3.depositphotos.com/6672868/13701/v/450/depositphotos_137014128-stock-illustration-user-profile-icon.jpg",className:" w-12 h-12 rounded-full object-cover cursor-pointer border-2 border-white"}),A("div",{className:"flex flex-col lg:w-fit w-0 overflow-hidden",children:[v("p",{className:"font-bold text-sm",children:n&&e.username}),v("p",{className:"text-xs",children:"Temp message"})]})]})}const IW=el(Me,"chats");async function kW(){const t=Ma(IW),n=(await $p(t)).docs.map(r=>({id:r.id,...r.data()})).filter(r=>{var i,s;return r.user_ids.includes((i=W.currentUser)!=null&&i.uid?(s=W.currentUser)==null?void 0:s.uid:"")});return await Promise.all(n.map(async r=>(console.log("chat data",r),{...r})))}const I9=el(Me,"messages");async function xW(t){var s;if(!t)throw new Error("chatId cannot be empty");const e=it(Me,"chats",t),r=(s=(await vn(e)).data())==null?void 0:s.message_ids;return console.log(r),(await Promise.all(r.map(async o=>{const a=(await vn(it(Me,"messages",o))).data(),l=(await vn(it(Me,"users",a==null?void 0:a.sender_id))).data();return{id:o,...a,user_data:l}}))).sort((o,a)=>o.sent_at-a.sent_at)}async function bW(t,e){var l;if(!t)throw new Error("chatId cannot be empty");const n=it(Me,"chats",t),i=(l=(await vn(n)).data())==null?void 0:l.message_ids;console.log("message ids",i);const s=Ma(I9,gb("chat_id","==",t),ef("sent_at"));let o=[];console.log("messages before ",o);const a=C8(s,u=>{o=[],u.docs.forEach(c=>{o.push({...c.data(),id:c.id})}),e(o),console.log("messages after",o)});return{messages:o.sort((u,c)=>u.sent_at-c.sent_at),unsubscribe:a}}async function RW(t,e){var i;if(!e)throw new Error("empty");if(!t)throw new Error("empty");const n=await Vp(I9,{text:e,sent_at:Ze.now(),sender_id:(i=W==null?void 0:W.currentUser)==null?void 0:i.uid,chat_id:t}),r=it(Me,"chats",t);return console.log(t),await os(r,{message_ids:zp(n.id)})}function NW({message:t}){var s,o;const[e,n]=I.useState(!1),{data:r,isSuccess:i}=Un({queryKey:["getUserWithId",t.sender_id],queryFn:()=>xo(t.sender_id)});return v("div",{className:"w-full",children:A("div",{className:`chat ${t.sender_id===((s=W.currentUser)==null?void 0:s.uid)?"chat-end":"chat-start"} my-2`,children:[v("div",{className:"chat-image avatar",children:v("div",{className:"w-10 rounded-full",children:v("img",{className:"cursor-pointer",src:r!=null&&r.profile_photo?r==null?void 0:r.profile_photo:"https://st3.depositphotos.com/6672868/13701/v/450/depositphotos_137014128-stock-illustration-user-profile-icon.jpg"})})}),v("div",{onClick:()=>n(!e),className:`px-4 py-2 rounded-tl-xl rounded-tr-xl ${t.sender_id===((o=W.currentUser)==null?void 0:o.uid)?"rounded-bl-xl":"rounded-br-xl"} bg-yellow-500 text-white text-sm`,children:t.text}),A("div",{className:`chat-footer mt-2 text-xs flex ${!e&&"hidden"}`,children:[v("p",{className:"cursor-pointer",children:r==null?void 0:r.username}),v("time",{className:"text-xs opacity-50 ml-2",children:Xp(t.sent_at)})]})]})})}function AW({chatID:t}){const e=I.useRef(null),n=Ee.object({msgText:vs().min(1,{message:"message text can't be empty"})}),{register:r,handleSubmit:i,formState:{errors:s},reset:o}=hl({resolver:Gc(n),defaultValues:{msgText:""}});if(!t)return A("div",{className:"h-full flex flex-col gap-4 items-center justify-center lg:w-3/4 w-full bg-slate-800",children:[v("img",{src:"https://firebasestorage.googleapis.com/v0/b/book-community-8cbb7.appspot.com/o/illustrates%2Fundraw_quick_chat_re_bit5.svg?alt=media&token=23945bd8-d876-4a19-bde5-5b1aa47de02c",alt:"",className:"w-40"}),v("p",{className:"text-2xl text-yellow-500 font-bold",children:"Welcome to Yelo chat"})]});wo();const{mutate:a,isLoading:l}=pi({mutationFn:({id:d,text:p})=>RW(d,p)}),[u,c]=I.useState([]);I.useEffect(()=>{(async()=>{const d=await xW(t);c(d)})()},[]),I.useEffect(()=>{let d;return(async()=>d=await bW(t,c))(),()=>d==null?void 0:d.unsubscribe()},[]),I.useEffect(()=>{var d;e.current&&((d=e.current)==null||d.scrollIntoView({behavior:"smooth"}))},[u]);function h(d){console.log(d),a({text:d.msgText,id:t}),o()}return A("div",{className:"lg:h-full h-5/6 relative lg:w-3/4 pb-4 w-full bg-slate-800",children:[A("div",{className:"px-4 overflow-y-scroll h-full",children:[u==null?void 0:u.map((d,p)=>v(NW,{message:d},d.id)),v("div",{ref:e,className:"h-10 w-full"})]}),v("div",{className:"fixed bottom-0 lg:left-1/4 left-0 w-full lg:w-3/4",children:A("form",{onSubmit:i(h),className:"w-full bg-slate-900 h-12 flex items-center",children:[v("textarea",{...r("msgText"),placeholder:"Write a message",className:"focus:outline-none bg-transparent h-12 flex items-center max-h-64 p-2 pl-3 rounded-md resize-none transition-all w-full"}),v("button",{type:"submit",className:"mr-3 text-xl text-yellow-500",children:v(L_,{})})]})})]})}function OW(){const[t,e]=I.useState("");I.useState([]);const{data:n,status:r}=Un({queryKey:["chats"],queryFn:kW});return console.log(t),A("div",{className:"flex lg:flex-row flex-col pt-16 h-screen",children:[v("div",{className:"h-24 lg:h-full lg:w-1/4 w-full p-4 flex lg:flex-col flex-row gap-4 bg-slate-900 lg:overflow-y-scroll overflow-x-scroll",children:n==null?void 0:n.map(i=>{var s;return v("div",{onClick:()=>e(i.id),children:v(TW,{userId:i.u1===((s=W.currentUser)==null?void 0:s.uid)?i.u2:i.u1})},i.id)})}),v(AW,{chatID:t},t)]})}function PW(){return A(vr,{children:[v(V_,{}),v(OW,{})]})}function DW(){return v(vr,{children:v("div",{className:"mb-0 overflow-hidden",children:A(SI,{children:[v(Xr,{path:"*",element:v(vW,{})}),v(Xr,{path:"/signup",element:v(_W,{})}),v(Xr,{path:"/login",element:v(SW,{})}),v(Xr,{path:"/test",element:v(CW,{})}),v(Xr,{path:"/profile/:user_id",Component:T9}),v(Xr,{path:"/yelo",element:v(PW,{})})]})})})}const MW=new m5;Cg.createRoot(document.getElementById("root")).render(v(Nt.StrictMode,{children:v(N5,{client:MW,children:v(GO,{children:v(DW,{})})})}));
